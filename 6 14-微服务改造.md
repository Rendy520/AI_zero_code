---
created: 2025-12-29T15:55:26 (UTC +08:00)
tags: [,Java,Python,JavaScript,å‰ç«¯,Cè¯­è¨€,C++,Goè¯­è¨€,ç¨‹åºå‘˜,ç¼–ç¨‹å­¦ä¹ ,ITæ•™ç¨‹,è‡ªå­¦ç¼–ç¨‹,è½¯ä»¶å¼€å‘,é¡¹ç›®å®æˆ˜,ç¼–ç¨‹å¯¼èˆª,å¼€å‘è€…äº¤æµç¤¾åŒº,ç¼–ç¨‹èµ„æº,è®¡ç®—æœº]
source: https://www.codefather.cn/course/1948291549923344386/section/1960544845213282305
author: 
---

# 14 - å¾®æœåŠ¡æ”¹é€  - ã€å¤§å‚å¿…å¤‡ã€‘LangChain4j +

> ## Excerpt
> æœ¬èŠ‚é‡ç‚¹ æœ¬èŠ‚æˆ‘ä»¬å°†ä¸º AI é›¶ä»£ç åº”ç”¨ç”Ÿæˆå¹³å°è¿›è¡Œå¾®æœåŠ¡æ¶æ„æ”¹é€ ï¼Œå°†åŸæœ‰çš„å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œæå‡ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§å’Œéƒ¨ç½²çµæ´»æ€§ã€‚ å¾®æœåŠ¡æ¶æ„æ˜¯ç°ä»£å¤§å‹åº”ç”¨çš„ä¸»æµæ¶æ„ã€‚ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹åˆ†äº«ï¼Œåšæ‚¨ç¼–ç¨‹å­¦ä¹ è·¯ä¸Šçš„å¯¼èˆªå‘˜ã€‚

---
## æœ¬èŠ‚é‡ç‚¹

æœ¬èŠ‚æˆ‘ä»¬å°†ä¸º AI é›¶ä»£ç åº”ç”¨ç”Ÿæˆå¹³å°è¿›â è¡Œå¾®æœåŠ¡æ¶æ„æ”¹é€ ï¼Œå°†åŸæœ‰çš„â å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œæå‡ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§å’Œéƒ¨ç½²çµæ´»æ€§ã€‚

å¾®æœåŠ¡æ¶æ„æ˜¯ç°ä»£å¤§å‹åº”ç”¨çš„ä¸»â æµæ¶æ„æ¨¡å¼ï¼ŒæŒæ¡å¾®â æœåŠ¡æ”¹é€ æŠ€èƒ½å¯¹æå‡æ¶æ„è®¾è®¡èƒ½åŠ›ä¹Ÿæ˜¯å¾ˆå¿…è¦çš„ã€‚F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=

æœ¬èŠ‚ä¸»è¦å†…å®¹åŒ…æ‹¬ï¼š

-   å¾®æœåŠ¡åŸºæœ¬æ¦‚å¿µ
-   å¾®æœåŠ¡æ¶æ„è®¾è®¡
-   å¾®æœåŠ¡æ‹†åˆ†å®æˆ˜
-   Nacos + Dubbo æœåŠ¡é—´è°ƒç”¨
-   Higress å¾®æœåŠ¡ç½‘å…³

æ³¨æ„ï¼Œæœ¬èŠ‚å†…å®¹å¯ç‹¬ç«‹äºæœ¬é¡¹ç›®å­¦ä¹ ï¼Œâ é±¼çš®è®²çš„æ˜¯é€šç”¨çš„å•ä½“é¡¹â ç›®æ”¹é€ ä¸ºå¾®æœåŠ¡çš„å¥—è·¯å’ŒæŠ€å·§ï¼Œå­¦ä¼šä¹‹åå»æ”¹é€ ä»»ä½•é¡¹ç›®åº”è¯¥éƒ½ä¼šæ¯”è¾ƒè½»æ¾~1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

## ä¸€ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ

å¾®æœåŠ¡æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå®ƒå°†åº”ç”¨ç¨‹â åºæ„å»ºä¸ºä¸€ç»„å°å‹ã€ç‹¬ç«‹çš„â æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½æ„å»ºï¼Œå¹¶é€šè¿‡æ˜ç¡®å®šä¹‰çš„ API è¿›è¡Œé€šä¿¡ã€‚

ä¸ºäº†æ›´å¥½åœ°ç†è§£å¾®æœåŠ¡æ¶æ„çš„ä½œâ ç”¨ï¼Œå…ˆç»™å¤§å®¶ä¸¾ä¸ªä¾‹â å­ï¼Œçœ‹çœ‹å•ä½“æ¶æ„å’Œå¾®æœåŠ¡æ¶æ„çš„å¯¹æ¯”ã€‚EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

å•ä½“æ¶æ„ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/Gg6W63vzAhRptGti.webp)

å¾®æœåŠ¡æ¶æ„ï¼šUzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/52nuKKRiq62qzqs5.webp)

ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå•ä½“æ¶æ„å°†æ‰€æœ‰åŠŸèƒ½æ¨¡å—é›†â ä¸­åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œè€Œå¾®æœåŠ¡æ¶â æ„å°†ä¸åŒçš„ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„æ•°æ®å­˜å‚¨å’Œä¸šåŠ¡é€»è¾‘ã€‚

### å¾®æœåŠ¡æœ‰å“ªäº›ä½œç”¨ï¼Ÿ

1ï¼‰ç‹¬ç«‹éƒ¨ç½²ä¸è¿è¡Œï¼šæ¯ä¸ªå¾®æœâ åŠ¡éƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘ã€â æµ‹è¯•ã€éƒ¨ç½²å’Œæ‰©å±•ï¼Œå½¼æ­¤ä¹‹é—´äº’ä¸å½±å“ï¼Œå¤§å¤§é™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹ç”¨æˆ·â ç®¡ç†åŠŸèƒ½æ—¶ï¼Œåªéœ€è¦â é‡æ–°éƒ¨ç½²ç”¨æˆ·æœåŠ¡ï¼Œå…¶ä»–æœåŠ¡å®Œå…¨ä¸å—å½±å“ï¼Œå¯ä»¥æ­£å¸¸è¿è¡Œã€‚

2ï¼‰æŒ‰ä¸šåŠ¡åŠŸèƒ½åˆ’åˆ†ï¼šå¾®æœåŠ¡çš„æ‹†åˆ†éµå¾ªä¸šåŠ¡è¾¹ç•Œï¼Œæ¯ä¸ªæœåŠ¡â ä¸“æ³¨äºç‰¹å®šçš„ä¸šåŠ¡é¢†åŸŸï¼Œåšåˆ°é«˜å†…èšã€ä½â è€¦åˆã€‚æ¯”å¦‚ç”¨æˆ·æœåŠ¡ä¸“é—¨è´Ÿè´£ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†ç­‰åŠŸèƒ½ï¼ŒAI æœåŠ¡åˆ™ä¸“æ³¨äºä»£ç ç”Ÿæˆã€æ¨¡å‹è°ƒç”¨ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

3ï¼‰æŠ€æœ¯é€‰å‹çµæ´»ï¼šä¸åŒçš„å¾®æœåŠ¡å¯ä»¥æ ¹æ®è‡ªèº«ç‰¹ç‚¹é€‰æ‹©æœ€åˆé€‚çš„æŠ€â æœ¯æ ˆï¼Œä¸å†å—é™äºç»Ÿä¸€çš„æŠ€æœ¯æ¶æ„ã€‚ç”¨æˆ·æœåŠ¡â å¯ä»¥ç”¨ MySQL å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œåº”ç”¨æœåŠ¡å¯ä»¥ç”¨ Redis ç¼“å­˜æ•°æ®ï¼Œæˆªå›¾æœåŠ¡å¯ä»¥ç”¨å¯¹è±¡å­˜å‚¨ä¿å­˜å›¾ç‰‡ï¼Œå„å–æ‰€éœ€ã€‚

4ï¼‰å¼¹æ€§æ‰©å±•ï¼šå¯ä»¥æ ¹æ®ä¸šåŠ¡è´Ÿè½½æƒ…å†µï¼Œé’ˆå¯¹æ€§åœ°æ‰©å±•é«˜å‹åŠ›â æœåŠ¡ï¼Œå®ç°èµ„æºçš„ç²¾å‡†åˆ©ç”¨ã€‚æ¯”å¦‚ AIâ  ä»£ç ç”Ÿæˆè¯·æ±‚é‡æ¿€å¢æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰©å±• AI æœåŠ¡çš„å®ä¾‹æ•°é‡ï¼Œè€Œä¸ç”¨æ‰©å±•æ•´ä¸ªåº”ç”¨ï¼Œæ—¢èŠ‚çœæˆæœ¬åˆæå‡æ•ˆç‡ã€‚

5ï¼‰æ•…éšœéš”ç¦»ï¼šé€šè¿‡åˆç†çš„å®¹é”™è®¾è®¡ï¼ˆç†”æ–­ã€â é‡è¯•ã€è¶…æ—¶ç­‰æœºåˆ¶ï¼‰ï¼Œå³ä½¿æŸâ ä¸ªæœåŠ¡å‡ºç°æ•…éšœï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–æœåŠ¡çš„æ­£å¸¸è¿è¡Œï¼Œå¤§å¤§æå‡äº†ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§ã€‚1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

### å¾®æœåŠ¡çš„æŒ‘æˆ˜

æ³¨æ„ï¼Œå¾®æœåŠ¡æ¶æ„ä¸æ˜¯é“¶å¼¹ï¼Œä¸â æ˜¯ä»€ä¹ˆæ—¶å€™éƒ½é€‚ç”¨çš„â ï¼Œå®ƒä¹Ÿä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼š

1ï¼‰åˆ†å¸ƒå¼å¤æ‚æ€§ï¼šåŸæœ¬ç®€å•çš„æœ¬åœ°æ–¹â æ³•è°ƒç”¨å˜æˆäº†è·¨ç½‘ç»œçš„æœâ åŠ¡è°ƒç”¨ï¼Œéœ€è¦å¤„ç†ç½‘ç»œå»¶è¿Ÿã€æœåŠ¡å‘ç°ã€æ•°æ®ä¸€è‡´æ€§ç­‰åˆ†å¸ƒå¼ç³»ç»Ÿç‰¹æœ‰çš„é—®é¢˜ã€‚cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

2ï¼‰è¿ç»´å¤æ‚åº¦æå‡ï¼šä»ç®¡ç†ä¸€ä¸ªåº”ç”¨å˜â æˆç®¡ç†å¤šä¸ªæœåŠ¡ï¼Œç›‘æ§ã€æ—¥â å¿—æ”¶é›†ã€éƒ¨ç½²å‘å¸ƒç­‰è¿ç»´å·¥ä½œçš„å¤æ‚åº¦æˆå€å¢é•¿ï¼Œéœ€è¦æ›´å®Œå–„çš„å·¥å…·å’Œæµç¨‹æ”¯æ’‘ã€‚

3ï¼‰æœåŠ¡æ²»ç†æŒ‘æˆ˜ï¼šéœ€è¦è§£å†³æœåŠ¡æ³¨å†Œå‘â ç°ã€è´Ÿè½½å‡è¡¡ã€é…ç½®ç®¡ç†ã€â é“¾è·¯è¿½è¸ªç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œé€šå¸¸éœ€è¦å¼•å…¥Nacosã€ç½‘å…³ç­‰é¢å¤–çš„åŸºç¡€è®¾æ–½ç»„ä»¶ã€‚

4ï¼‰æ•°æ®ä¸€è‡´æ€§éš¾é¢˜ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œâ å¦‚ä½•ä¿è¯è·¨æœåŠ¡çš„æ•°æ®ä¸€è‡´â æ€§æ˜¯ä¸€ä¸ªæŠ€æœ¯éš¾ç‚¹ï¼Œå¾€å¾€éœ€è¦é‡‡ç”¨æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼Œå¢åŠ äº†ä¸šåŠ¡é€»è¾‘çš„å¤æ‚æ€§ã€‚UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

è€Œä¸”å¾ˆå¤šé—®é¢˜çš„è§£å†³éƒ½è¦ä»å•ä½“è€ƒè™‘åˆ°åˆ†å¸ƒå¼åœºæ™¯ï¼Œæ¯”â å¦‚å•æœºé” => åˆ†å¸ƒå¼é”ã€å•æœºé™â æµ => åˆ†å¸ƒå¼é™æµã€å•æœºå®šæ—¶ä»»åŠ¡ => åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ï¼Œä¼šå¢åŠ å¾ˆå¤šçš„å¼€å‘æˆæœ¬å’Œå¤æ‚ä»»åŠ¡ã€‚

å› æ­¤ï¼Œåœ¨è¿›è¡Œå¾®æœåŠ¡æ”¹é€ æ—¶ï¼Œéœ€â è¦å……åˆ†æƒè¡¡åˆ©å¼Šï¼Œé€‰â æ‹©åˆé€‚çš„æ‹†åˆ†ç­–ç•¥ã€‚

ğŸ’¡ æ³¨æ„ï¼šDDD é¢†åŸŸé©±åŠ¨è®¾è®¡å’Œå¾®æœåŠ¡æ¶æ„å®Œâ å…¨æ˜¯ä¸¤ç äº‹ï¼ŒDDD æ˜¯ä¸€ç§è½¯ä»¶â è®¾è®¡æ–¹æ³•è®ºï¼Œè€Œå¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„é£æ ¼ã€‚DDD å¯ä»¥æŒ‡å¯¼å¾®æœåŠ¡çš„æ‹†åˆ†ï¼Œä½†ä¸ç­‰åŒäºå¾®æœåŠ¡æœ¬èº«ã€‚F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=

æƒ³å­¦ä¹ å®æˆ˜ DDD æ¶æ„çš„æœ‹å‹å¯ä»¥çœ‹ [ç¼–ç¨‹å¯¼èˆªçš„æ™ºèƒ½ååŒäº‘å›¾åº“é¡¹ç›®](https://www.codefather.cn/course/1864210260732116994) ç¬¬ 14 æœŸã€‚

## äºŒã€å¾®æœåŠ¡æ¶æ„è®¾è®¡æ–¹æ¡ˆ

åœ¨å¼€å§‹å¾®æœåŠ¡æ”¹é€ ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ€è€ƒå‡ ä¸ªå…³é”®é—®é¢˜ï¼šEVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

1.  **è®¾è®¡ä¸Šï¼šæ€ä¹ˆåˆ’åˆ†æœåŠ¡ï¼Ÿ** æŒ‰ç…§ä»€ä¹ˆåŸåˆ™å°†å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªå¾®æœåŠ¡ï¼Ÿ
2.  **å®ç°ä¸Šï¼šç”¨ä»€ä¹ˆæŠ€æœ¯ï¼Ÿ** é€‰æ‹©ä»€ä¹ˆæŠ€æœ¯æ ˆæ¥æ”¯æ’‘å¾®æœåŠ¡æ¶æ„ï¼Ÿ
3.  **æ²»ç†ä¸Šï¼šå¦‚ä½•ç®¡ç†æœåŠ¡ï¼Ÿ** å¦‚ä½•å®ç°æœåŠ¡æ³¨å†Œå‘ç°ã€é…ç½®ç®¡ç†ã€ç›‘æ§ç­‰ï¼Ÿ

æ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸€åˆ†æè¿™äº›é—®é¢˜ã€‚

### æœåŠ¡åˆ’åˆ†

å¾®æœåŠ¡æ‹†åˆ†æ˜¯æ•´ä¸ªæ”¹é€ è¿‡ç¨‹ä¸­æœ€â å…³é”®çš„ä¸€æ­¥ï¼Œæ‹†åˆ†å¾—â å¥½ä¸å¥½ç›´æ¥å†³å®šäº†åç»­å¼€å‘å’Œç»´æŠ¤çš„å¤æ‚åº¦ã€‚

#### æ‹†åˆ†åŸåˆ™

åœ¨è¿›è¡Œå¾®æœåŠ¡æ‹†åˆ†æ—¶ï¼Œæˆ‘ä»¬éµå¾ªä»¥ä¸‹åŸåˆ™ï¼šdWCTYpHEFA/xV8BrvOpKRqkO1d88b9Ip8VkvBeLuZho=

1.  ä¸šåŠ¡é¢†åŸŸé©±åŠ¨ï¼šæŒ‰ç…§ä¸šåŠ¡åŠŸèƒ½è¿›è¡Œæ‹†åˆ†ï¼Œç¡®ä¿æ¯ä¸ªæœåŠ¡éƒ½æœ‰æ˜ç¡®çš„ä¸šåŠ¡è¾¹ç•Œã€‚æ¯”å¦‚ç”¨æˆ·ç®¡ç†ã€åº”ç”¨ç®¡ç†ã€AI ä»£ç ç”Ÿæˆç­‰ï¼Œæ¯ä¸ªé¢†åŸŸçš„ä¸šåŠ¡é€»è¾‘ç›¸å¯¹ç‹¬ç«‹ã€‚
2.  æ•°æ®ä¸€è‡´æ€§ï¼šç›¸å…³æ€§å¼ºçš„æ•°æ®ä¿æŒåœ¨åŒä¸€æœåŠ¡ä¸­ï¼Œå‡å°‘è·¨æœåŠ¡çš„æ•°æ®ä¾èµ–ã€‚æ¯”å¦‚ç”¨æˆ·ä¿¡æ¯å’Œç”¨æˆ·æƒé™æ”¾åœ¨åŒä¸€ä¸ªæœåŠ¡ä¸­ï¼Œé¿å…è·¨æœåŠ¡æŸ¥è¯¢ã€‚
3.  å›¢é˜Ÿç»„ç»‡ï¼šè€ƒè™‘å›¢é˜Ÿè§„æ¨¡å’ŒæŠ€èƒ½åˆ†å·¥ï¼Œç¡®ä¿æ¯ä¸ªæœåŠ¡éƒ½æœ‰ä¸“é—¨çš„å›¢é˜Ÿè´Ÿè´£ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå¾®æœåŠ¡å›¢é˜Ÿçš„è§„æ¨¡åœ¨2-8äººä¹‹é—´æ¯”è¾ƒåˆé€‚ã€‚
4.  æ€§èƒ½è€ƒè™‘ï¼šå°†é‡è®¡ç®—æ¨¡å—ç‹¬ç«‹å‡ºæ¥ï¼Œä¾¿äºå•ç‹¬ä¼˜åŒ–å’Œæ‰©å±•ã€‚æ¯”å¦‚AIä»£ç ç”Ÿæˆå’Œç½‘é¡µæˆªå›¾éƒ½æ˜¯è®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œç‹¬ç«‹éƒ¨ç½²ä¾¿äºèµ„æºä¼˜åŒ–ã€‚
5.  æ‰©å±•æ€§éœ€æ±‚ï¼šæ ¹æ®ä¸åŒæ¨¡å—çš„æ‰©å±•éœ€æ±‚è¿›è¡Œæ‹†åˆ†ã€‚è®¿é—®é¢‘ç‡é«˜çš„æ¨¡å—å¯ä»¥ç‹¬ç«‹æ‰©å±•ï¼Œä¸å½±å“å…¶ä»–æœåŠ¡ã€‚

æ³¨æ„ï¼æ‹†åˆ†å¾®æœåŠ¡æ—¶ä¸€å®šè¦çµæ´»ï¼Œä¸èƒ½æ‹†çš„ä¸è¦ç¡¬æ‹†ï¼â å¦‚æœä¸¤ä¸ªåŠŸèƒ½æ¨¡å—è€¦åˆåº¦å¾ˆé«˜ï¼Œé¢‘ç¹â éœ€è¦ç›¸äº’è°ƒç”¨ï¼Œé‚£ä¹ˆå¼ºè¡Œæ‹†åˆ†åè€Œä¼šå¢åŠ ç³»ç»Ÿå¤æ‚åº¦ã€‚ç­‰ä¼šå„¿é±¼çš®ä¹Ÿä¼šåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ç»™å¤§å®¶æ¼”ç¤ºè¿™ä¸€ç‚¹ã€‚

#### åŸºç¡€æœåŠ¡åˆ’åˆ†

åŸºäºä»¥ä¸ŠåŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç³»ç»Ÿåˆ’åˆ†ä¸ºä»¥ä¸‹æ¨¡å—ï¼š

**é€šç”¨æ¨¡å—**

è¿™äº›æ¨¡å—ä¸æ˜¯ç‹¬ç«‹çš„æœåŠ¡ï¼Œè€Œæ˜¯è¢«å…¶ä»–æœåŠ¡ä¾èµ–çš„å…¬å…±ç»„ä»¶ï¼šp+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=

-   yu-ai-code-commonï¼šåŒ…å«æ‰€æœ‰æœåŠ¡å…¬ç”¨çš„ä»£ç ï¼Œå¦‚å¼‚å¸¸å¤„ç†ã€å·¥å…·ç±»ã€å¸¸é‡å®šä¹‰ç­‰ï¼Œä¸ºå…¶ä»–æœåŠ¡æä¾›åŸºç¡€è®¾æ–½æ”¯æŒã€‚
-   yu-ai-code-modelï¼šç»Ÿä¸€çš„æ•°æ®æ¨¡å‹å®šä¹‰ï¼ŒåŒ…å«å®ä½“ç±»ã€DTOã€VOã€æšä¸¾ç±»ç­‰ï¼Œç¡®ä¿å„æœåŠ¡é—´æ•°æ®æ ¼å¼çš„ä¸€è‡´æ€§ã€‚
-   yu-ai-code-clientï¼šå®šä¹‰éœ€è¦å†…éƒ¨è°ƒç”¨çš„æœåŠ¡æ¥å£ï¼Œä½œä¸ºæœåŠ¡é—´é€šä¿¡çš„å¥‘çº¦ï¼Œå®ç°æœåŠ¡é—´çš„æ¾è€¦åˆã€‚

**ä¸šåŠ¡æœåŠ¡**

è¿™äº›æ˜¯çœŸæ­£çš„å¾®æœåŠ¡ï¼Œï¼ˆåŸåˆ™ä¸Šâ æ¥è¯´ï¼‰æ¯ä¸ªæœåŠ¡éƒ½æœ‰â ç‹¬ç«‹çš„è¿›ç¨‹å’Œç«¯å£ï¼šqo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

-   ç”¨æˆ·æœåŠ¡ï¼šä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„åŸºç¡€ï¼Œç»Ÿä¸€ç®¡ç†ç”¨æˆ·çŠ¶æ€å’Œæƒé™ã€‚è´Ÿè´£ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æ³¨é”€ã€æƒé™éªŒè¯ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚**ç”±äºå‡ ä¹æ‰€æœ‰ä¸šåŠ¡éƒ½éœ€è¦ç”¨æˆ·ä¿¡æ¯ï¼Œæ‰€ä»¥ç”¨æˆ·æœåŠ¡æ˜¯å…¶ä»–æœåŠ¡çš„åŸºç¡€ä¾èµ–ã€‚**
-   åº”ç”¨æœåŠ¡ï¼šä¸šåŠ¡æ ¸å¿ƒæœåŠ¡ï¼Œè´Ÿè´£åº”ç”¨çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚åŒ…æ‹¬åº”ç”¨åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€å¯¹è¯å†å²ã€ä»£ç ä¿å­˜ã€é¡¹ç›®ä¸‹è½½ç­‰åŠŸèƒ½ï¼Œé›†æˆäº†æ–‡ä»¶æ“ä½œã€ç¼“å­˜ç®¡ç†ã€é™æµæ§åˆ¶ç­‰èƒ½åŠ›ã€‚
-   AI æœåŠ¡ï¼šä¸“é—¨å¤„ç†ä»£ç ç”Ÿæˆç›¸å…³åŠŸèƒ½ï¼Œé›†æˆ LangChain4j æ”¯æŒæµå¼å“åº”ã€‚åŒ…å« AI æ¨¡å‹è°ƒç”¨ã€ä»£ç ç”ŸæˆåŠŸèƒ½ã€‚
-   æˆªå›¾æœåŠ¡ï¼šç‹¬ç«‹çš„ IO å¯†é›†å‹æœåŠ¡ï¼Œä½¿ç”¨ Selenium WebDriver è¿›è¡Œç½‘é¡µæˆªå›¾ã€‚ç”±äºæˆªå›¾æ“ä½œæ¯”è¾ƒæ¶ˆè€— CPU å’Œå†…å­˜èµ„æºï¼Œç‹¬ç«‹éƒ¨ç½²ä¾¿äºå•ç‹¬ä¼˜åŒ–å’Œæ‰©å±•ã€‚

å½“ç„¶ï¼Œè¿™åªæ˜¯åˆæ­¥çš„åˆ’åˆ†ï¼Œä¹Ÿæ˜¯â æ¯”è¾ƒç†æƒ³çš„æƒ…å†µï¼Œå®â é™…ä¸ŠçœŸçš„èƒ½è¿™ä¹ˆæ“ä½œä¹ˆï¼Ÿè¿˜å¾—çœ‹çœ‹å„ä¸ªæœåŠ¡é—´çš„ä¾èµ–å…³ç³»ã€‚

#### æœåŠ¡é—´ä¾èµ–å…³ç³»

åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡é—´ä¸èƒ½åƒâ ä¹‹å‰é‚£æ ·é€šè¿‡æœ¬åœ°æ–¹â æ³•è°ƒç”¨ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œè¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚æˆ‘ä»¬çš„æœåŠ¡é—´ä¾èµ–å…³ç³»å¦‚ä¸‹ï¼š

-   åº”ç”¨æœåŠ¡ â†’ ç”¨æˆ·æœåŠ¡ï¼šåº”ç”¨æœåŠ¡éœ€è¦è°ƒç”¨ç”¨æˆ·æœåŠ¡è·å–ç”¨æˆ·ä¿¡æ¯ã€è¿›è¡Œæƒé™éªŒè¯ã€‚æ¯”å¦‚åˆ›å»ºåº”ç”¨æ—¶éœ€è¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼ŒæŸ¥è¯¢åº”ç”¨åˆ—è¡¨æ—¶éœ€è¦è·å–åˆ›å»ºè€…ä¿¡æ¯ã€‚
-   åº”ç”¨æœåŠ¡ â†’ æˆªå›¾æœåŠ¡ï¼šåº”ç”¨æœåŠ¡åœ¨ç”Ÿæˆä»£ç åï¼Œéœ€è¦è°ƒç”¨æˆªå›¾æœåŠ¡ç”Ÿæˆåº”ç”¨çš„é¢„è§ˆå›¾ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹æ•ˆæœã€‚
-   åº”ç”¨æœåŠ¡ â†â†’ AI æœåŠ¡ï¼šè¿™æ˜¯ä¸€ä¸ªåŒå‘ä¾èµ–å…³ç³»ã€‚åº”ç”¨æœåŠ¡éœ€è¦è°ƒç”¨ AI æœåŠ¡è¿›è¡Œä»£ç ç”Ÿæˆï¼Œè€Œ AI æœåŠ¡åœ¨ç”Ÿæˆå®Œæˆåéœ€è¦è°ƒç”¨åº”ç”¨æœåŠ¡ä¿å­˜èŠå¤©å†å²ã€‚

#### æœåŠ¡åˆ’åˆ†ç»“æœ

é€šè¿‡æ¢³ç†æœåŠ¡é—´ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å‘ç°åº”ç”¨æœåŠ¡å’Œ AI æœåŠ¡æ˜¯å¼ºç»‘å®šçš„å…³ç³»ï¼Œ**å› æ­¤ AI æœåŠ¡ä¸èƒ½ä½œä¸ºå®Œå…¨ç‹¬ç«‹çš„æœåŠ¡å ç”¨ç‹¬ç«‹ç«¯å£ï¼Œè€Œæ˜¯ä½œä¸º SDK æ¨¡å—å¼•å…¥åˆ°åº”ç”¨æœåŠ¡ä¸­**ã€‚

å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–çš„åŸå› ï¼š

1.  æŠ€æœ¯é™åˆ¶ï¼šDubbo çš„åºåˆ—åŒ–æœºåˆ¶ä¸æ”¯æŒ Reactor çš„ Flux ç±»å‹ï¼Œæ— æ³•é€šè¿‡ Dubbo è°ƒç”¨è¿”å›æµå¼å“åº”ã€‚
2.  æ€§èƒ½è€ƒè™‘ï¼šAI ä»£ç ç”Ÿæˆæ˜¯æµå¼å“åº”ï¼Œå¦‚æœé€šè¿‡ç½‘ç»œä¼ è¾“ä¼šå¢åŠ å»¶è¿Ÿå’Œå¤æ‚åº¦ã€‚

å¦å¤–ï¼Œå·¥ä½œæµå’Œå¯è§‚æµ‹æ€§æ¨¡å—ä½œâ ä¸ºæœ¬é¡¹ç›®ä¸­å¯ç‹¬ç«‹å­¦â ä¹ çš„éæ ¸å¿ƒä¸šåŠ¡ï¼Œæš‚ä¸è¿ç§»ã€‚

\*\*æœ€åï¼Œæˆ‘ä»¬éœ€è¦æ•´ç†å‡ºä¸€ä¸ªå¾®æœåŠ¡åˆ’åˆ†è¡¨ã€‚\*\*åŒ…æ‹¬å„ä¸ªæœåŠ¡çš„èŒè´£ã€ç«¯å£åˆ†é…ã€è·¯ç”±è§„åˆ’å’Œä¾èµ–å…³ç³»ï¼Œä¾¿äºåç»­çš„å¼€å‘å®ç°ã€‚

EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=p+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=p+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=p+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=p+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

|æœåŠ¡åç§°|ç«¯å£å’Œè·¯ç”±å‰ç¼€|ä¸»è¦åŠŸèƒ½EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=|ä¾èµ–æœåŠ¡|
|---|---|---|---|
|é€šç”¨æ¨¡å—|WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=|
|yu-ai-code-common|\-|æ³¨è§£ã€å¼‚å¸¸å¤„ç†ã€å·¥å…·ç±»ã€å¸¸é‡ã€å…¬å…±å“åº”ç±»nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=|\-â |
|yu-ai-code-model|\-|å®ä½“ç±»ã€DTOã€â VOã€æšä¸¾ç±»ã€AI æ¨¡å‹ç±»nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=|common|
|yu-ai-code-client|\-|æœåŠ¡æ¥å£å®šä¹‰ã€å†…éƒ¨è°ƒç”¨å¥‘çº¦EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=|commonã€model|
|ä¸šåŠ¡æœåŠ¡|UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=|
|yu-ai-code-user|8124 ç«¯å£ï¼Œ/api/user/\*\*|ç”¨æˆ·ç®¡ç†ã€æƒé™è®¤è¯ã€ç”¨æˆ·ä¿¡æ¯ç»´æŠ¤qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=|Redisã€MySQL|
|yu-ai-code-app|8125 ç«¯å£ï¼Œ/api/app/**/api/chatHistory/**cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=|åº”ç”¨ç®¡ç†ã€èŠå¤©å†å²ã€é¡¹ç›®ä¸‹è½½ã€ä»£ç è§£æä¿å­˜UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=|Redisã€MySQLã€ç”¨æˆ·æœåŠ¡ã€æˆªå›¾æœåŠ¡|
|yu-ai-code-ai â |\-|AIä»£â ç ç”Ÿæˆã€æ¨¡å‹ç®¡ç† qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=|AI å¤§æ¨¡å‹|
|yu-ai-code-screenshot|8127 ç«¯å£ï¼Œ/api/screenshot/\*\*|ç½‘é¡µæˆªå›¾ã€å›¾ç‰‡å¤„ç†ã€å¯¹è±¡å­˜å‚¨WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=|è…¾è®¯äº‘ COS|

### å¾®æœåŠ¡æŠ€æœ¯é€‰å‹

å¾®æœåŠ¡æ¶æ„éœ€è¦è§£å†³æœåŠ¡æ‹†åˆ†ã€æœåŠ¡é—´é€šä¿¡ã€æœåŠ¡å‘ç°ã€ç»Ÿä¸€ç½‘å…³ç­‰æ ¸å¿ƒé—®é¢˜ã€‚å¯¹åº”è¿™äº›â éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬å¼€å‘æ¡†æ¶ã€æ³¨å†Œä¸­â å¿ƒã€æœåŠ¡è°ƒç”¨ã€å¾®æœåŠ¡ç½‘å…³ã€‚æœ¬é¡¹ç›®å°†ä½¿ç”¨ Spring Cloud Alibabaã€Nacosã€Dubboã€Higress ç½‘å…³è¿™å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚

#### å¾®æœåŠ¡å¼€å‘æ¡†æ¶

å¾®æœåŠ¡å¼€å‘æ¡†æ¶æ˜¯æ„å»ºå¾®æœåŠ¡åº”ç”¨çš„åŸºç¡€ï¼Œå®ƒæä¾›äº†æœåŠ¡æ³¨å†Œâ å‘ç°ã€é…ç½®ç®¡ç†ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™çº§ç­‰â å¾®æœåŠ¡æ²»ç†èƒ½åŠ›çš„ç»Ÿä¸€æŠ½è±¡ã€‚æ²¡æœ‰æ¡†æ¶çš„è¯ï¼Œå¼€å‘è€…éœ€è¦è‡ªå·±å¤„ç†è¿™äº›å¤æ‚çš„åˆ†å¸ƒå¼é—®é¢˜ï¼Œå¼€å‘æ•ˆç‡ä¼šå¤§å¤§é™ä½ã€‚

ç›®å‰ä¸»æµçš„ Java å¾®æœåŠ¡å¼€å‘æ¡†æ¶åŒ…æ‹¬ï¼š

-   Spring Cloudï¼šåŸºäº Spring Boot çš„å¾®æœåŠ¡æ¡†æ¶ï¼Œç”Ÿæ€å®Œå–„ï¼Œç¤¾åŒºæ´»è·ƒ
-   Spring Cloud Alibabaï¼šé˜¿é‡ŒåŸºäº Spring Cloud çš„æ‰©å±•ï¼Œé›†æˆäº†é˜¿é‡Œäº‘çš„å¾®æœåŠ¡ç»„ä»¶
-   Dubboï¼šé˜¿é‡Œå¼€æºçš„é«˜æ€§èƒ½ RPC æ¡†æ¶ï¼Œä¸“æ³¨äºæœåŠ¡è°ƒç”¨

æœ¬é¡¹ç›®é€‰æ‹© [Spring Cloud Alibaba](https://sca.aliyun.com/docs/2023/overview/what-is-sca/) ä½œä¸ºå¾®æœåŠ¡å¼€å‘æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸ªå…¨å®¶æ¡¶ï¼ŒåŒ…å«äº†å¼€å‘åˆ†å¸ƒå¼åº”ç”¨å¾®æœåŠ¡çš„å¿…éœ€ç»„ä»¶ï¼Œæ–¹ä¾¿å¼€å‘è€…é€šè¿‡ Spring Cloud ç¼–ç¨‹æ¨¡å‹è½»æ¾ä½¿ç”¨è¿™äº›ç»„ä»¶æ¥å¼€å‘åˆ†å¸ƒå¼åº”ç”¨æœåŠ¡ã€‚

æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š

-   æœåŠ¡å‘ç°ä¸é…ç½®ç®¡ç†ï¼šé›†æˆäº† Nacos ä½œä¸ºæœåŠ¡æ³¨å†Œä¸å‘ç°ã€åˆ†å¸ƒå¼é…ç½®ç®¡ç†çš„è§£å†³æ–¹æ¡ˆã€‚
-   åˆ†å¸ƒå¼äº‹åŠ¡ï¼šæä¾›äº† Seata åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œä¿è¯è·¨æœåŠ¡çš„æ•°æ®ä¸€è‡´æ€§ã€‚
-   é™æµé™çº§ï¼šé›†æˆäº† Sentinel æµé‡æ§åˆ¶ç»„ä»¶ï¼Œæä¾›æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦æ¥ä¿éšœæœåŠ¡ä¹‹é—´çš„ç¨³å®šæ€§ã€‚
-   æ¶ˆæ¯é©±åŠ¨ï¼šæä¾›äº†å¯¹ RocketMQ çš„æ”¯æŒï¼Œå®ç°æ¶ˆæ¯é©±åŠ¨çš„å¾®æœåŠ¡æ¶æ„ã€‚
-   åˆ†å¸ƒå¼è°ƒåº¦ï¼šé›†æˆäº† SchedulerX ä»»åŠ¡è°ƒåº¦å¹³å°ï¼Œæä¾›åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦èƒ½åŠ›ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/zT25Wi4HhMmKyCj6.webp)

Spring Cloud Alibaba çš„ä¼˜åŠ¿åœ¨äºå®ƒå®Œå…¨å…¼å®¹ Spring Cloudâ  æ ‡å‡†ï¼ŒåŒæ—¶æä¾›äº†é˜¿é‡Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ–¹é¢å¤šå¹´çš„æŠ€æœ¯ç§¯ç´¯å’Œæœ€ä½³â å®è·µã€‚å¯¹äºå’±ä»¬å›½å†…å¼€å‘è€…ï¼ŒSpring Cloud Alibaba è¿˜æä¾›äº†æ›´å¥½çš„ä¸­æ–‡æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒï¼Œä¸ªäººä¹Ÿä¼šæ›´æ¨èä½¿ç”¨å®ƒè€Œä¸æ˜¯ Spring Cloudã€‚

#### æ³¨å†Œä¸­å¿ƒ

æ³¨å†Œä¸­å¿ƒæ˜¯å¾®æœåŠ¡æ¶æ„çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒè§£å†³äº†æœåŠ¡å‘ç°é—®é¢˜ã€‚

ä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°å‘¢ï¼Ÿ

åœ¨å¾®æœåŠ¡ç¯å¢ƒä¸­ï¼ŒæœåŠ¡å®ä¾‹ä¼šåŠ¨æ€å¯åŠ¨å’Œåœæ­¢ï¼ŒIP åœ°å€å’Œç«¯å£ä¹Ÿå¯èƒ½ç»â å¸¸å˜åŒ–ï¼ŒæœåŠ¡æ¶ˆè´¹è€…éœ€è¦çŸ¥é“æœåŠ¡æä¾›è€…çš„å‡†ç¡®åœ°â å€æ‰èƒ½å‘èµ·è°ƒç”¨ã€‚æ³¨å†Œä¸­å¿ƒå°±åƒä¸€ä¸ªç”µè¯ç°¿ï¼ŒæœåŠ¡å¯åŠ¨æ—¶å‘æ³¨å†Œä¸­å¿ƒæŠ¥å‘Šè‡ªå·±çš„åœ°å€ä¿¡æ¯ï¼ŒæœåŠ¡è°ƒç”¨æ—¶ä»æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢ç›®æ ‡æœåŠ¡çš„åœ°å€ã€‚p+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/bBqa00rfFuYomTnK.webp)

æœ¬é¡¹ç›®é€‰æ‹©å’Œ Spring â Cloud Aliâ baba å…¼å®¹çš„ Nacos ä½œä¸ºæ³¨å†Œä¸­å¿ƒã€‚

[Nacos](https://nacos.io/)ï¼ˆNaming and Configuration Serviceï¼‰ç”±é˜¿é‡Œå¼€æºï¼Œæ˜¯æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚å®ƒé›†æˆäº†æœåŠ¡æ³¨å†Œä¸å‘ç°ã€é…ç½®ä¸­å¿ƒã€æœåŠ¡å…ƒæ•°æ®ç®¡ç†ç­‰åŠŸèƒ½ï¼Œæ˜¯æ„å»ºå¾®æœåŠ¡æ¶æ„çš„é‡è¦åŸºç¡€è®¾æ–½ã€‚UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/TxdXdIsXbw5AehYC.webp)

é™¤äº† Nacosï¼Œå…¶ä»–æ³¨å†Œä¸­å¿ƒæ¯”å¦‚ Eurekâ a é€‚åˆ Spring Cloâ ud ç”Ÿæ€ã€Consul æä¾›äº†ä¸°å¯Œçš„æœåŠ¡æ²»ç†åŠŸèƒ½ã€Zookeeper åˆ™é€‚åˆé«˜å¯ç”¨åœºæ™¯ã€‚

ğŸ’¡ [ç¼–ç¨‹å¯¼èˆªçš„æ™ºèƒ½é¢è¯•åˆ·é¢˜é¡¹ç›®](https://www.codefather.cn/course/1826803928691945473) ä¸­å¸¦å¤§å®¶å®æˆ˜è¿‡åŸºäº Nacos çš„åŠ¨æ€é…ç½®ç®¡ç†èƒ½åŠ›ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å»ºè®®å­¦ä¹ ã€‚UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

#### å¾®æœåŠ¡è°ƒç”¨

å¾®æœåŠ¡è°ƒç”¨æ˜¯æŒ‡ä¸åŒæœåŠ¡ä¹‹é—´çš„é€šä¿¡æ–¹å¼ã€‚åœ¨å•ä½“åº”ç”¨â ä¸­ï¼Œä¸åŒæ¨¡å—ä¹‹é—´é€šè¿‡æœ¬åœ°æ–¹æ³•è°ƒç”¨â è¿›è¡Œäº¤äº’ï¼Œè€Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡éƒ¨ç½²åœ¨ä¸åŒçš„è¿›ç¨‹ç”šè‡³ä¸åŒçš„æœºå™¨ä¸Šï¼Œéœ€è¦é€šè¿‡ç½‘ç»œè¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚

å¸¸è§çš„å¾®æœåŠ¡è°ƒç”¨æŠ€æœ¯åŒ…æ‹¬ï¼šcZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

-   HTTP/RESTï¼šåŸºäº HTTP åè®®çš„ RESTful API è°ƒç”¨ï¼Œç®€å•æ˜“ç”¨ï¼Œè·¨è¯­è¨€æ”¯æŒå¥½
-   RPCï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå¦‚ Dubboã€gRPCï¼Œæ€§èƒ½æ›´é«˜ï¼Œä½†é€šå¸¸éœ€è¦ç›¸åŒçš„æŠ€æœ¯æ ˆ
-   æ¶ˆæ¯é˜Ÿåˆ—ï¼šå¦‚ RocketMQã€Kafkaï¼Œæ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œé€‚åˆè§£è€¦åœºæ™¯

HTTP å’Œ RPC ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

ç®€å•æ¥è¯´ï¼ŒRPC è°ƒç”¨æ›´åƒæ˜¯æœ¬åœ°æ–¹æ³•è°ƒç”¨ï¼Œæ€§èƒ½æ›´é«˜ï¼›è€Œ HTTP è°ƒç”¨æ›´åŠ é€šç”¨å’Œæ ‡å‡†åŒ–ï¼Œè·¨è¯­è¨€æ”¯æŒæ›´å¥½ã€‚è¯¦æƒ…å¯ä»¥å‚è€ƒè¿™é“é¢è¯•é¢˜ï¼š[RPC å’Œ HTTP çš„åŒºåˆ«](https://www.mianshiya.com/question/1799803242210992130)ã€‚WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

ä¸€ä¸ªç®€æ˜“çš„ RPC æ¡†æ¶æ¶æ„å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/vAcMNnhnXdJd5b5W.webp)

æœ¬é¡¹ç›®é€‰æ‹© Dubbo ä½œä¸ºä¸»è¦çš„æœåŠ¡è°ƒç”¨æ–¹å¼ã€‚[Apache Dubbo](https://cn.dubbo.apache.org/) æ˜¯é˜¿é‡Œå¼€æºçš„é«˜æ€§èƒ½ RPC æ¡†æ¶ï¼Œæä¾›äº†é¢å‘æ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ã€å®¹é”™å’Œè´Ÿè½½å‡è¡¡ç­‰èƒ½åŠ›ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/NX1PcAbsQlCfYw2D.webp)

ğŸ’¡ [ç¼–ç¨‹å¯¼èˆªçš„æ‰‹å†™ RPC æ¡†æ¶é¡¹ç›®](https://www.codefather.cn/course/1768543954720022530) ä¸­å‚è€ƒ Dubbo å®ç°äº†è‡ªå·±çš„ RPC æ¡†æ¶ï¼Œå­¦ä¹ åä¼šå¯¹ Dubbo å’Œ RPC æœ‰æ›´æ·±çš„ç†è§£ã€‚

#### å¾®æœåŠ¡ç½‘å…³

å¾®æœåŠ¡ç½‘å…³æ˜¯å¾®æœåŠ¡æ¶æ„çš„ç»Ÿä¸€å…¥å£ï¼Œå®ƒè§£å†³äº†å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®å¤šä¸ªå¾®æœåŠ¡çš„é—®é¢˜ã€‚æ²¡æœ‰ç½‘å…³çš„è¯ï¼Œå®¢â æˆ·ç«¯éœ€è¦ç›´æ¥è°ƒç”¨å„ä¸ªå¾®æœåŠ¡ï¼ˆè¾“å…¥ä¸åŒçš„è®¿é—®åœ°å€ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´å®¢â æˆ·ç«¯ä¸æœåŠ¡çš„å¼ºè€¦åˆï¼Œå¹¶ä¸”éš¾ä»¥ç»Ÿä¸€å¤„ç†è®¤è¯ã€é™æµã€ç›‘æ§ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ç½‘å…³å°±åƒä¸€ä¸ªä¿å®‰ï¼ˆå¼ºè¡ŒæŠ¼éŸµï¼Œå…¶å®åº”è¯¥ç†è§£ä¸ºé—¨å«ï¼‰ï¼Œç»Ÿä¸€å¤„ç†å¤–éƒ¨è¯·æ±‚ï¼Œç„¶åè½¬å‘åˆ°å†…éƒ¨çš„å…·ä½“æœåŠ¡ã€‚

å¸¸è§çš„å¾®æœåŠ¡ç½‘å…³æŠ€æœ¯åŒ…æ‹¬ï¼š

-   Spring Cloud Gatewayï¼šSpring å®˜æ–¹å‡ºå“ï¼Œå’Œ Spring Cloud ç”Ÿæ€é›†æˆåº¦é«˜
-   Higressï¼šé˜¿é‡Œå·´å·´å¼€æºçš„äº‘åŸç”Ÿ API ç½‘å…³ï¼ŒåŸºäº Envoyï¼Œæ€§èƒ½ä¼˜å¼‚
-   Kongï¼šåŸºäº Nginx çš„å¼€æºç½‘å…³ï¼Œæ’ä»¶ä¸°å¯Œ
-   Zuulï¼šNetflix å¼€æºï¼Œè¾ƒä¸ºæˆç†Ÿä½†æ€§èƒ½ä¸€èˆ¬

æœ¬é¡¹ç›®é€‰æ‹© [Higress](https://higress.cn/) ä½œä¸ºå¾®æœåŠ¡ç½‘å…³ã€‚Higress æ˜¯åŸºäºé˜¿é‡Œå†…éƒ¨å¤šå¹´ Envoy Gateway å®è·µçš„ **äº‘åŸç”Ÿ + AI åŸç”Ÿ** API ç½‘å…³ï¼Œé‡‡ç”¨ C++ å®ç°ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„ Java ç½‘å…³å…·æœ‰æ›´é«˜çš„æ€§èƒ½å’Œæ›´ä½çš„å†…å­˜å ç”¨ï¼Œè€Œä¸”èƒ½å¤Ÿå’Œ Nacos å’Œ Dubbo è½»æ¾é›†æˆã€‚

ä»€ä¹ˆæ˜¯ AI åŸç”Ÿå‘¢ï¼Ÿå¯ä»¥çœ‹çœ‹ [å®˜æ–¹å¯¹ AI ç½‘å…³çš„ä»‹ç»](https://higress.cn/docs/latest/overview/what-is-higress/)ï¼Œç®€å•æ¥è¯´ï¼ŒHigress æ”¯æŒå¤šç§ AI åè®®ï¼Œæä¾› AI å¯è§‚æµ‹æ€§ã€AI ä»£ç†ç¼“å­˜ã€AI ä»¤ç‰Œé™æµã€AI å¤§æ¨¡å‹å¯¹æ¥ç­‰èƒ½åŠ›ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/RXs3A7ITojlxqi12.webp)qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

ä¸‹é¢æ˜¯ Higress ä¸ â Spring Clâ oud Gateway çš„è¯¦ç»†å¯¹æ¯”ï¼š

cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=

|å¯¹æ¯”é¡¹|Spring Cloud Gateway|HigressnShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=|
|---|---|---|
|æ€§èƒ½|ä¸­ç­‰ (åŸºäº Spring WebFlux)|é«˜ (åŸºäº Envoy C++)nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=|
|å†…å­˜å ç”¨|è¾ƒé«˜ (JVM)|è¾ƒä½ (C++)EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=|
|é…ç½®æ–¹å¼|ä»£ç  + é…ç½®æ–‡ä»¶|æ§åˆ¶å° + é…ç½®æ–‡ä»¶cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=|
|æ’ä»¶ç”Ÿâ æ€|Spring ç”Ÿæ€|Envoy â + è‡ªå®šä¹‰æ’ä»¶qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=|
|å¯è§‚æµ‹æ€§|ä¾èµ– Spring Actuator|å†…ç½®ä¸°å¯Œçš„ç›‘æ§æŒ‡æ ‡dWCTYpHEFA/xV8BrvOpKRqkO1d88b9Ip8VkvBeLuZho=|
|äº‘åŸç”Ÿ|æ”¯æŒ|åŸç”Ÿäº‘åŸç”Ÿè®¾è®¡WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=|
|å­¦ä¹ æˆæœ¬|ä½ (ç†Ÿæ‚‰ Spring)|ä¸­ç­‰1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=|
|AI æ”¯æŒ|éœ€è¦è‡ªå®šä¹‰å¼€â å‘|åŸç”Ÿ AIâ  åŠŸèƒ½æ”¯æŒcZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=|

ä¸è¿‡å¦‚ä½•ä½ éœ€è¦åœ¨ç½‘å…³ä¸­å†™ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼ŒHigrâ ess å¯èƒ½å°±ä¸é€‚åˆäº†ï¼Œè€Œ Sâ pring Cloud Gateway æ˜¯å¯ä»¥åœ¨ä»£ç ä¸­å¼•å…¥å¹¶ä¸”è‡ªå®šä¹‰ Java ä¸šåŠ¡é€»è¾‘çš„ã€‚nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=

ğŸ’¡ [ç¼–ç¨‹å¯¼èˆªçš„ API å¼€æ”¾å¹³å°é¡¹ç›®](https://www.codefather.cn/course/1790979723916521474) å’Œ [OJ åˆ¤é¢˜ç³»ç»Ÿé¡¹ç›®](https://www.codefather.cn/course/1790980707917017089) éƒ½æœ‰å…³äº Spring Cloud Gateway çš„å®æˆ˜ã€‚

### å¾®æœåŠ¡éƒ¨ç½²æ¶æ„å›¾

å¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªå®Œæ•´çš„éƒ¨ç½²æ¶â æ„å›¾ï¼Œæ›´ç›´è§‚åœ°ç†è§£â æˆ‘ä»¬çš„å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼š1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/XMNglFDkM6kaTZjV.webp)

ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è¿›è¡Œå¾®æœåŠ¡æ‹†åˆ†å®æˆ˜ã€‚

## ä¸‰ã€å¾®æœåŠ¡æ‹†åˆ†å®æˆ˜

### åˆ›å»ºé¡¹ç›®ç»“æ„

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå¾®æœåŠ¡é¡¹ç›®çš„æ•´ä½“ç»“æ„ã€‚åœ¨åŸæœ‰é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å¾®æœåŠ¡çˆ¶é¡¹ç›® `yu-ai-code-mother-microservice`ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/vpIlG5cVMBdgJQlo.webp)qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

ç„¶åä¾æ¬¡åˆ›å»ºå„ä¸ªå­æ¨¡å—ï¼š

```plain
yu-ai-code-mother-microservice/
â”œâ”€â”€ pom.xml                          # çˆ¶é¡¹ç›® POM
â”œâ”€â”€ yu-ai-code-common/              # å…¬å…±æ¨¡å—
â”œâ”€â”€ yu-ai-code-model/               # å®ä½“æ¨¡å‹æ¨¡å—
â”œâ”€â”€ yu-ai-code-client/              # æœåŠ¡æ¥å£æ¨¡å—
â”œâ”€â”€ yu-ai-code-user/                # ç”¨æˆ·æœåŠ¡
â”œâ”€â”€ yu-ai-code-app/                 # åº”ç”¨æœåŠ¡
â”œâ”€â”€ yu-ai-code-ai/                  # AI ä»£ç ç”Ÿæˆ
â””â”€â”€ yu-ai-code-screenshot/          # ç½‘é¡µæˆªå›¾æœåŠ¡
```

![](https://pic.code-nav.cn/course_picture/1608440217629360130/bLxQlH3FSALCOCho.webp)nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=

#### æ˜ç¡®ä¾èµ–ç‰ˆæœ¬

æ³¨æ„ï¼Œå¾®æœåŠ¡å¼€å‘ä¸­ï¼Œç”±äºæ¶‰åŠâ çš„ä¾èµ–è¾ƒå¤šï¼Œä¸€å®šè¦â æ³¨æ„å„ä¸ªä¾èµ–ç‰ˆæœ¬çš„å…¼å®¹æ€§ï¼

æ ¹æ® [Spring Cloud Alibaba çš„ç‰ˆæœ¬è¯´æ˜](https://sca.aliyun.com/docs/2023/overview/version-explain)ï¼Œæˆ‘ä»¬é€‰æ‹©ä»¥ä¸‹ç‰ˆæœ¬è¿›è¡Œå¼€å‘ï¼šdWCTYpHEFA/xV8BrvOpKRqkO1d88b9Ip8VkvBeLuZho=

EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=p+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

|æŠ€æœ¯ç»„ä»¶|æ¨èç‰ˆæœ¬|
|---|---|
|Java|21|
|Spring Boot|3.5.3|
|Spring Cloudï¼ˆå…¶å®é¡¹ç›®ä¸­ç”¨ä¸åˆ°ï¼‰|2023.0.1|
|Spring Cloud Alibaba|2023.0.1.0|
|Nacos Server|2.3.2|
|Dubbo|3.3.0|
|Higress|2.1.6|

**è¯·ä¸¥æ ¼éµå¾ªé±¼çš®çš„ç‰ˆæœ¬å·ï¼å¦åˆ™å‡ºä»»ä½•é—®é¢˜å¯èƒ½éƒ½ä¸å¥½è§£å†³ï¼Œæµªè´¹æ—¶é—´ã€‚**

#### çˆ¶é¡¹ç›® POM é…ç½®

çˆ¶é¡¹ç›®çš„ POM æ–‡ä»¶æ˜¯æ•´ä¸ªâ å¾®æœåŠ¡é¡¹ç›®çš„æ ¸å¿ƒé…â ç½®æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†å…¨å±€ä¾èµ–ç‰ˆæœ¬å·ã€å¼•å…¥å…¨å±€ä¾èµ–ã€é…ç½®æ‰“åŒ…æ’ä»¶ç­‰ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.yupi</groupId>
    <artifactId>yu-ai-code-mother-microservice</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <modules>
        <module>yu-ai-code-common</module>
        <module>yu-ai-code-model</module>
        <module>yu-ai-code-client</module>
        <module>yu-ai-code-user</module>
        <module>yu-ai-code-app</module>
        <module>yu-ai-code-ai</module>
        <module>yu-ai-code-screenshot</module>
    </modules>

    <properties>
        <maven.compiler.source>21</maven.compiler.source>
        <maven.compiler.target>21</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <spring-boot.version>3.5.3</spring-boot.version>
        <spring-cloud.version>2023.0.1</spring-cloud.version>
        <spring-cloud-alibaba.version>2023.0.1.0</spring-cloud-alibaba.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-aop</artifactId>
        </dependency>
        <dependency>
            <groupId>com.github.xiaoymin</groupId>
            <artifactId>knife4j-openapi3-jakarta-spring-boot-starter</artifactId>
            <version>4.4.0</version>
        </dependency>
        <dependency>
            <groupId>cn.hutool</groupId>
            <artifactId>hutool-all</artifactId>
            <version>5.8.38</version>
        </dependency>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.38</version>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring-boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.springframework.cloud</groupId>
                <artifactId>spring-cloud-dependencies</artifactId>
                <version>${spring-cloud.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>com.alibaba.cloud</groupId>
                <artifactId>spring-cloud-alibaba-dependencies</artifactId>
                <version>${spring-cloud-alibaba.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.14.0</version>
                <configuration>
                    <parameters>true</parameters>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project>
```

è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªé‡è¦çš„é…ç½®ï¼šå¿…é¡»é…ç½® Maven ç¼–è¯‘æ’ä»¶ï¼Œå¹¶ä¸”è®¾ç½®ç¼–è¯‘æ—¶ä¿ç•™å‚æ•°åä¿¡æ¯ï¼ˆ`-parameters` æ ‡å¿—ï¼‰ï¼Œå¦åˆ™ Spring æ— æ³•é€šè¿‡åå°„è·å–è¯·æ±‚å‚æ•°åï¼Œä¼šå¯¼è‡´æœ‰äº› GET è¯·æ±‚å‚æ•°å¤±æ•ˆã€‚cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

æ¯”å¦‚è¿™ä¸ªæ¥å£ï¼š

```java
@GetMapping("/get")
@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)
public BaseResponse<User> getUserById(long id) {
    ThrowUtils.throwIf(id <= 0, ErrorCode.PARAMS_ERROR);
    User user = userService.getById(id);
    ThrowUtils.throwIf(user == null, ErrorCode.NOT_FOUND_ERROR);
    return ResultUtils.success(user);
}
```

å¦‚æœæ²¡æœ‰æ­£ç¡®é…ç½®ç¼–è¯‘æ’ä»¶ï¼Œæ¥â å£æ–‡æ¡£å°±æ— æ³•è¯†åˆ«å‚â æ•°åç§°ï¼Œå½±å“å¼€å‘è°ƒè¯•ã€‚cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/yVLiAVw4QgPFCJid.webp)

### é€šç”¨æ¨¡å—æ„å»º

#### yu-ai-code-common å…¬å…±æ¨¡å—

å…¬å…±æ¨¡å—åŒ…å«æ‰€æœ‰æ¨¡å—å…¬ç”¨çš„ä»£â ç ï¼Œä¸€èˆ¬ä¸åŒ…å«ä¸šåŠ¡â é€»è¾‘ã€ä¸ä½¿ç”¨å¤æ‚çš„ä¾èµ–ã€‚

è¿™ä¸ªæ¨¡å—çš„ä¾èµ–é…ç½®å¦‚ä¸‹ï¼š

```xml
<dependencies>
    <!-- è…¾è®¯äº‘ COS å¯¹è±¡å­˜å‚¨ -->
    <dependency>
        <groupId>com.qcloud</groupId>
        <artifactId>cos_api</artifactId>
        <version>5.6.227</version>
    </dependency>
    <!-- MyBatis Flex ä»£ç ç”Ÿæˆ -->
    <dependency>
        <groupId>com.mybatis-flex</groupId>
        <artifactId>mybatis-flex-codegen</artifactId>
        <version>1.11.0</version>
    </dependency>
    <dependency>
        <groupId>com.zaxxer</groupId>
        <artifactId>HikariCP</artifactId>
    </dependency>
</dependencies>
```

æ¥ä¸‹æ¥è¿›è¡Œä»£ç è¿ç§»ï¼Œä¹Ÿå°±æ˜¯æŠŠä»£ç ä»åŸå•ä½“é¡¹ç›®å¤åˆ¶åˆ°æ–°å¾®æœåŠ¡é¡¹ç›®çš„å¯¹åº”ä½ç½®ã€‚**è¿™é‡Œæˆ‘ä»¬è¦ç¡®ä¿è¿ç§»çš„åŒ…è·¯å¾„å’Œä¹‹å‰å®Œå…¨ä¸€è‡´ï¼Œå‡å°‘ä»£ç ä¿®æ”¹é‡ã€‚**

è¿ç§»å†…å®¹ï¼š

-   common/ å…¬å…±è¯·æ±‚å“åº”ç±»ï¼ˆBaseResponseã€ResultUtilsç­‰ï¼‰
-   constant/ å¸¸é‡
-   exception/ å¼‚å¸¸å¤„ç†
-   generator/ ä»£ç ç”Ÿæˆå™¨
-   utils/ å·¥å…·ç±»ï¼ˆé™¤ WebScreenshotUtils å¤–ï¼‰
-   config/ é…ç½®ç±»ï¼ˆJsonConfigã€CorsConfigã€CosClientConfigï¼‰
-   manager/ é€šç”¨èƒ½åŠ›ï¼ˆCosManagerï¼‰
-   annotation/ æ³¨è§£ï¼ˆAuthCheckï¼‰

æ³¨æ„äº‹é¡¹ï¼š

-   ratelimit/ é™æµæ¨¡å—æ¶‰åŠåˆ°å¼•ç”¨ UserServiceï¼Œæœ‰ä¸€å®šçš„ä¸šåŠ¡ç‰¹æ€§ï¼Œå› æ­¤ä¸æ”¾åˆ° common ä¸­ï¼ˆå¯ä»¥å•ç‹¬å®šä¹‰æˆæ¨¡å—ï¼‰
-   constant/ å¸¸é‡ä¹Ÿå¯ä»¥é€‰æ‹©æ‹†åˆ†åˆ°å¯¹åº”çš„ä¸šåŠ¡æ¨¡å—ä¸­ï¼Œæ¯”å¦‚ UserConstant æ”¾åˆ°ç”¨æˆ·æ¨¡å—ã€AppConstant æ”¾åˆ°åº”ç”¨æ¨¡å—

è¿˜æœ‰éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼•å…¥ CosManager åâ ï¼Œå¿…é¡»è¦å¡«å†™ COS é…ç½®æ‰èƒ½å¯â åŠ¨é¡¹ç›®ï¼Œä½†æœ‰äº›æ¨¡å—æ˜¯ä¸éœ€è¦ CosManager çš„ã€‚å› æ­¤æˆ‘ä»¬æ·»åŠ æ¡ä»¶æ³¨è§£ï¼Œæ²¡é…ç½®å°±ä¸åŠ è½½ï¼šnShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=

```java
@Configuration
@ConfigurationProperties(prefix = "cos.client")
@ConditionalOnProperty(
        prefix = "cos.client",
        name = {"host", "secretId", "secretKey", "region", "bucket"}
)
@Data
public class CosClientConfig {
}
```

```java
@Component
@ConditionalOnBean(COSClient.class)
@Slf4j
public class CosManager {
}
```

è¿™æ ·ç¡®ä¿äº†åªæœ‰åœ¨é…ç½®äº† COâ S ç›¸å…³å‚æ•°æ—¶æ‰ä¼šâ åŠ è½½ç›¸å…³çš„ Beanï¼Œé¿å…äº†å¯åŠ¨æ—¶çš„é…ç½®é”™è¯¯ã€‚cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

#### yu-ai-code-model å®ä½“æ¨¡å‹æ¨¡å—

å®ä½“æ¨¡å‹æ¨¡å—çš„ä¾èµ–é…ç½®å¾ˆç®€å•ï¼Œåªéœ€è¦ä¾èµ–å…¬å…±æ¨¡å—ï¼š

```xml
<dependencies>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-common</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>
```

ç„¶åè¿ç§»æ•´ä¸ª model åŒ…ï¼š

-   model/entity/ å®ä½“ç±»ï¼ˆUserã€Appã€ChatHistoryï¼‰
-   model/dto/ æ•°æ®ä¼ è¾“å¯¹è±¡
-   model/vo/ è§†å›¾å¯¹è±¡
-   model/enums/ æšä¸¾ç±»

ç”±äºè¿™ä¸ªæ¨¡å—ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œéœ€â è¦é€šè¿‡çˆ¶é¡¹ç›®è¿›è¡Œç»Ÿâ ä¸€æ„å»ºï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ä¾èµ–å…³ç³»æ­£ç¡®ã€ç‰ˆæœ¬ä¸€è‡´ã€æ„å»ºé¡ºåºåˆç†ã€‚F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/cnIYa7ZH0R22xINF.webp)

#### yu-ai-code-client æœåŠ¡æ¥å£æ¨¡å—

è¿™ä¸ªæ¨¡å—å®šä¹‰äº†éœ€è¦è¢«å…¶ä»–æœåŠ¡å†…éƒ¨è°ƒç”¨çš„æ¥å£ã€‚WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

è¿™é‡Œé±¼çš®æ²¿ç”¨äº†åŸºäº Feign å®â ç°çš„å‘½åï¼Œclientâ  çš„å«ä¹‰æ˜¯å¯ä»¥å’Œå®é™…æœåŠ¡äº¤äº’çš„å®¢æˆ·ç«¯ï¼Œä½ ä¹Ÿå¯ä»¥é‡å‘½åä¸º api æ¨¡å—ã€‚

ä¾èµ–é…ç½®å¦‚ä¸‹ï¼š

```xml
<dependencies>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-common</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-model</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>
```

ä¸ºäº†å’Œå¯¹å¤–æä¾›çš„æ¥å£åŒºåˆ†ï¼Œè¿™ä¸ªæ¨¡å—å†…çš„æ¥å£ç»Ÿä¸€å–åä¸º innerServiceï¼Œæ”¾åˆ° `innerservice` åŒ…ä¸‹ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/SEu0s2oDOWa4cBv1.webp)

InnerUserServiâ ce å®šä¹‰äº†ç”¨æˆ·ç›¸â å…³çš„å†…éƒ¨æ¥å£ï¼šWBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

```java
User getLoginUser(HttpServletRequest request);

List<User> listByIds(Collection<? extends Serializable> ids);

User getById(Serializable id);

UserVO getUserVO(User user);
```

InnerScreenshoâ tService â å®šä¹‰äº†æˆªå›¾ç›¸å…³çš„å†…éƒ¨æ¥å£ï¼š

```java
String generateAndUploadScreenshot(String webUrl);
```

å…¶ä¸­ï¼Œç”¨æˆ·æœåŠ¡çš„ `getLoginUser` æ–¹æ³•æ¯”è¾ƒç‰¹æ®Šï¼Œç”±äº HttpServletRequest å¯¹è±¡ä¸å¥½åœ¨ç½‘ç»œä¸­ä¼ é€’ï¼Œå› æ­¤é‡‡ç”¨é™æ€æ–¹æ³•ï¼Œé¿å…è·¨æœåŠ¡è°ƒç”¨ï¼š

```java
public interface InnerUserService {

    List<User> listByIds(Collection<? extends Serializable> ids);

    User getById(Serializable id);

    UserVO getUserVO(User user);

    // é™æ€æ–¹æ³•ï¼Œé¿å…è·¨æœåŠ¡è°ƒç”¨
    static User getLoginUser(HttpServletRequest request) {
        Object userObj = request.getSession().getAttribute(USER_LOGIN_STATE);
        User currentUser = (User) userObj;
        if (currentUser == null || currentUser.getId() == null) {
            throw new BusinessException(ErrorCode.NOT_LOGIN_ERROR);
        }
        return currentUser;
    }
}
```

æ³¨æ„ï¼Œä¸èƒ½ä½¿ç”¨é»˜è®¤æ–¹æ³•ï¼Œå¦åˆ™â  Dubbo ä¼šå°â è¯•åºåˆ—åŒ–ï¼Œå¯¼è‡´æŠ¥é”™ï¼šp+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/JnA3f3J02GhJ1iRB.webp)

### ä¸šåŠ¡æœåŠ¡æ„å»º

#### yu-ai-code-user ç”¨æˆ·æœåŠ¡

ä¿®æ”¹ç”¨æˆ·æœåŠ¡çš„ä¾èµ–é…ç½®ï¼ŒåŒ…æ‹¬â  Session â ç®¡ç†ã€æ•°æ®è®¿é—®ç­‰åŠŸèƒ½ï¼š

```xml
<dependencies>
    <!-- Spring Session + Redis -->
    <dependency>
        <groupId>org.springframework.session</groupId>
        <artifactId>spring-session-data-redis</artifactId>
    </dependency>
    <!-- å¿…é¡»å¼•å…¥ï¼Œæ‰èƒ½å…±äº« Session -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-redis</artifactId>
      <exclusions>
        <exclusion>
          <artifactId>lettuce-core</artifactId>
          <groupId>io.lettuce</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>redis.clients</groupId>
      <artifactId>jedis</artifactId>
    </dependency>
    <!-- æ•°æ®è®¿é—® -->
    <dependency>
        <groupId>com.mybatis-flex</groupId>
        <artifactId>mybatis-flex-spring-boot3-starter</artifactId>
        <version>1.11.0</version>
    </dependency>
    <dependency>
        <groupId>com.mysql</groupId>
        <artifactId>mysql-connector-j</artifactId>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-common</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-model</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>
```

ğŸ’¡ æ³¨æ„ï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥ `spring-boot-starter-data-redis` ä¾èµ–ï¼Œæ‰èƒ½åœ¨å¾®æœåŠ¡ç¯å¢ƒä¸­å…±äº« Sessionï¼Œå¹¶ä¸”è¿™é‡Œé±¼çš®é‡‡ç”¨äº† jedis è¿æ¥æ± æ›¿ä»£é»˜è®¤çš„ lettuce è¿æ¥æ± ï¼Œè®©è¿æ¥æ± ç®¡ç†æ›´ç¨³å®šã€‚dWCTYpHEFA/xV8BrvOpKRqkO1d88b9Ip8VkvBeLuZho=

ç¼–å†™é…ç½®æ–‡ä»¶ `application.yml`ï¼ŒåŒ…å«äº†åº”ç”¨åŸºæœ¬ä¿¡æ¯ã€Session é…ç½®ã€æ•°æ®åº“é…ç½®ã€Redis é…ç½®ç­‰ï¼š

```yaml
spring:
  application:
    name: yu-ai-code-user
  # session
  session:
    store-type: redis
    # 30 days expire
    timeout: 2592000
  # mysql
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/yu_ai_code_mother
    username: root
    password: 123456
  # redis
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
      password:
  profiles:
    active: local
server:
  port: 8124
  servlet:
    context-path: /api
    # 30 days expire
    session:
      cookie:
        max-age: 2592000
# springdoc-openapi
springdoc:
  group-configs:
    - group: 'default'
      packages-to-scan: com.yupi.yuaicodemother.controller
# knife4j
knife4j:
  enable: true
  setting:
    language: zh_cn
```

æ¥ä¸‹æ¥è¿ç§»ä»£ç ï¼ŒåŒ…æ‹¬ï¼šUzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

-   aop/AuthInterceptor.java æƒé™æ‹¦æˆªå™¨
-   controller/UserController.java ç”¨æˆ·æ§åˆ¶å™¨
-   service/UserService.java å’Œ service/impl/UserServiceImpl.java ç”¨æˆ·æœåŠ¡åŠå®ç°ç±»
-   mapper/UserMapper.java å’Œå¯¹åº”çš„ XML æ–‡ä»¶ï¼ˆæ³¨æ„ XML æ–‡ä»¶ä¸­å¼•å…¥çš„ Mapper è·¯å¾„ï¼‰

åˆ›å»ºä¸»å¯åŠ¨ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@SpringBootApplication
@MapperScan("com.yupi.yuaicodeuser.mapper")
@ComponentScan("com.yupi")
@EnableDubbo
public class YuAiCodeUserApplication {
    public static void main(String[] args) {
        SpringApplication.run(YuAiCodeUserApplication.class, args);
    }
}
```

#### yu-ai-code-ai AI ä»£ç ç”ŸæˆæœåŠ¡ï¼ˆæ¨¡å—ï¼‰

æ–¹æ¡ˆè®¾è®¡é˜¶æ®µæåˆ°è¿‡ï¼Œç»¼åˆè€ƒè™‘å¼€å‘å¤æ‚åº¦ã€ä»¥åŠ â Dubbo çš„åºåˆ—åŒ–æœºåˆ¶ä¸æ”¯æŒâ  Reactor çš„ Flux ç±»å‹ï¼ŒAI æ¨¡å—ä¸èƒ½å•ç‹¬ä½œä¸ºæœåŠ¡è°ƒç”¨ï¼Œè€Œæ˜¯ä»¥ä¾èµ–çš„æ–¹å¼å¼•å…¥ã€‚

ç¼–å†™ä¾èµ–é…ç½®ï¼ŒåŒ…æ‹¬ LangChain4j ç›¸å…³çš„ä¾èµ–ï¼šEVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

```xml
<dependencies>
    <!-- LangChain4j -->
    <dependency>
        <groupId>dev.langchain4j</groupId>
        <artifactId>langchain4j-open-ai-spring-boot-starter</artifactId>
        <version>1.1.0-beta7</version>
    </dependency>
    <dependency>
        <groupId>dev.langchain4j</groupId>
        <artifactId>langchain4j-reactor</artifactId>
        <version>1.1.0-beta7</version>
    </dependency>
    <dependency>
        <groupId>dev.langchain4j</groupId>
        <artifactId>langchain4j-community-redis-spring-boot-starter</artifactId>
        <version>1.1.0-beta7</version>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-model</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-common</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>
```

ç„¶åè¿ç§»ä»£ç ï¼Œå†…å®¹åŒ…æ‹¬ï¼š

-   dev.langchain4j/ LangChain4j æºç ä¿®æ”¹
-   ai/guardrail/ AI æŠ¤è½¨ç›¸å…³ä»£ç 
-   ai/model/ AI æ¨¡å‹ç›¸å…³ä»£ç 
-   ai/tools/ AI å·¥å…·ç›¸å…³ä»£ç 
-   ai/ æ‰€æœ‰ AI Serviceï¼ˆä¸è¿ç§»å·¥å‚ç±»ï¼‰
-   config/ å’Œ AI æ¨¡å‹ç›¸å…³çš„é…ç½®
-   resources/prompt/ æç¤ºè¯æ–‡ä»¶

è€ƒè™‘åˆ°å¯è§‚æµ‹æ€§æ˜¯ç‹¬ç«‹å­¦ä¹ çš„ç« èŠ‚ï¼Œä¸è¿ç§»å¯è§‚æµ‹æ€§çš„ monitorâ  åŒ…ï¼Œå› æ­¤è¦ä¿®æ”¹ StreamingChaâ tModelConfig å’Œ ReasoningStreamingChatModelConfig ç±»ï¼Œç§»é™¤ç›‘å¬å™¨ã€‚

#### yu-ai-code-app åº”ç”¨æœåŠ¡

åº”ç”¨æœåŠ¡æ˜¯æœ€å¤æ‚çš„æœåŠ¡ï¼Œå®ƒçš„â ä¾èµ–é…ç½®åŒ…æ‹¬åˆ†å¸ƒå¼â é™æµã€ç¼“å­˜ã€Sessionã€æ•°æ®è®¿é—®ç­‰ï¼šcZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

```xml
<dependencies>
    <!-- Redisson for distributed rate limiting -->
    <dependency>
        <groupId>org.redisson</groupId>
        <artifactId>redisson</artifactId>
        <version>3.50.0</version>
    </dependency>
    <dependency>
        <groupId>com.github.ben-manes.caffeine</groupId>
        <artifactId>caffeine</artifactId>
    </dependency>
    <!-- Spring Session + Redis -->
    <dependency>
        <groupId>org.springframework.session</groupId>
        <artifactId>spring-session-data-redis</artifactId>
    </dependency>
    <!-- å¿…é¡»å¼•å…¥ï¼Œæ‰èƒ½å…±äº« Session -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-data-redis</artifactId>
      <exclusions>
        <exclusion>
          <artifactId>lettuce-core</artifactId>
          <groupId>io.lettuce</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>redis.clients</groupId>
      <artifactId>jedis</artifactId>
    </dependency>
    <!-- æ•°æ®è®¿é—® -->
    <dependency>
        <groupId>com.mybatis-flex</groupId>
        <artifactId>mybatis-flex-spring-boot3-starter</artifactId>
        <version>1.11.0</version>
    </dependency>
    <dependency>
        <groupId>com.mysql</groupId>
        <artifactId>mysql-connector-j</artifactId>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-common</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-model</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-client</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-ai</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>
```

ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«åº”ç”¨ä¿¡æ¯ã€â Session é…â ç½®ã€æ•°æ®åº“é…ç½®ã€Redis é…ç½®ã€AI æ¨¡å‹é…ç½®ç­‰ï¼š

```yaml
spring:
  application:
    name: yu-ai-code-app
  # session
  session:
    store-type: redis
    # 30 days expire
    timeout: 2592000
  # mysql
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/yu_ai_code_mother
    username: root
    password: 123456
  # redis
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
      password:
      ttl: 3600
server:
  port: 8125
  servlet:
    context-path: /api
    # 30 days expire
    session:
      cookie:
        max-age: 2592000
# AI
langchain4j:
  open-ai:
    chat-model:
      base-url: https://api.deepseek.com
      api-key: <Your API Key>
      model-name: deepseek-chat
      max-tokens: 8192
      log-requests: true
      log-responses: true
    streaming-chat-model:
      base-url: https://api.deepseek.com
      api-key: <Your API Key>
      model-name: deepseek-chat
      max-tokens: 8192
      log-requests: true
      log-responses: true
    # æ¨ç† AI æ¨¡å‹é…ç½®ï¼ˆç”¨äºå¤æ‚çš„æ¨ç†ä»»åŠ¡ï¼‰
    reasoning-streaming-chat-model:
      base-url: https://api.deepseek.com
      api-key: <Your API Key>
      model-name: deepseek-reasoner
      max-tokens: 32768
      temperature: 0.1
      log-requests: true
      log-responses: true
    # æ™ºèƒ½è·¯ç”± AI æ¨¡å‹é…ç½®
    routing-chat-model:
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      api-key: <Your API Key>
      model-name: qwen-turbo
      max-tokens: 100
      log-requests: true
      log-responses: true
# springdoc-openapi
springdoc:
  group-configs:
    - group: 'default'
      packages-to-scan: com.yupi.yuaicodemother.controller
# knife4j
knife4j:
  enable: true
  setting:
    language: zh_cn
```

æ¥ä¸‹æ¥è¿ç§»ä»£ç ï¼š

-   ai/ AI æœåŠ¡å·¥å‚ç±»ï¼ˆAiCodeGeneratorServiceFactory.javaã€AiCodeGenTypeRoutingServiceFactory.javaï¼‰
    
-   config/ ç¼“å­˜é…ç½®ï¼ˆRedisCacheManagerConfig.javaï¼‰
    
-   controller/ æ§åˆ¶å™¨å±‚ï¼ˆAppController.javaã€ChatHistoryController.javaã€StaticResourceController.javaï¼‰
    
-   core/ ä»£ç ç”Ÿæˆæ ¸å¿ƒä»£ç 
    
-   mapper/ æ•°æ®è®¿é—®å±‚ï¼ˆAppMapper.javaã€ChatHistoryMapper.javaï¼‰
    
-   ratelimit/ é™æµæ¨¡å—
    
-   service/ ä¸šåŠ¡æœåŠ¡å±‚ï¼ˆAppService.javaã€ChatHistoryService.javaã€ProjectDownloadService.java åŠå…¶å®ç°ç±»ï¼‰
    
-   resources/mapper/ MyBatis æ˜ å°„æ–‡ä»¶
    

æ–°å»ºä¸»å¯åŠ¨ç±»ï¼šUzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

```java
@SpringBootApplication(exclude = {RedisEmbeddingStoreAutoConfiguration.class})
@MapperScan("com.yupi.yuaicodemother.mapper")
@EnableCaching
public class YuAiCodeAppApplication {
    public static void main(String[] args) {
        SpringApplication.run(YuAiCodeAppApplication.class, args);
    }
}
```

ä¿®æ”¹ AppServiceIâ mpl çš„ä»£ç ï¼Œç§»â é™¤å¯è§‚æµ‹æ€§é…ç½®ï¼š

```java
// 5. é€šè¿‡æ ¡éªŒåï¼Œæ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°å¯¹è¯å†å²
chatHistoryService.addChatMessage(appId, message, ChatHistoryMessageTypeEnum.USER.getValue(), loginUser.getId());
// 6. è°ƒç”¨ AI ç”Ÿæˆä»£ç ï¼ˆæµå¼ï¼‰
Flux<String> codeStream = aiCodeGeneratorFacade.generateAndSaveCodeStream(message, codeGenTypeEnum, appId);
// 7. æ”¶é›† AI å“åº”å†…å®¹å¹¶åœ¨å®Œæˆåè®°å½•åˆ°å¯¹è¯å†å²
return streamHandlerExecutor.doExecute(codeStream, chatHistoryService, appId, loginUser, codeGenTypeEnum);
```

é‡ç‚¹æ¥äº†ï¼Œåœ¨ä»£ç è¿ç§»è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä¿®æ”¹è°ƒç”¨äº†å…¶ä»–æœåŠ¡çš„ä»£ç ï¼ˆæ¯”å¦‚æˆªå›¾æœåŠ¡ï¼‰ã€‚å¯ä»¥å…ˆä½¿ç”¨ `@Lazy` æ³¨è§£ä»£æ›¿å®é™…å¼•å…¥ï¼Œåç»­ä¼šé€šè¿‡ Dubbo è¿›è¡ŒæœåŠ¡è°ƒç”¨ï¼š

```java
@Resource
@Lazy
private InnerScreenshotService screenshotService;
```

ç±»ä¼¼çš„ï¼Œä¿®æ”¹æ‰€æœ‰è°ƒç”¨äº† UserSâ ervice çš„ä»£ç ï¼Œâ æ›¿æ¢ä¸ºè°ƒç”¨ InnerUserService çš„å®ä¾‹æ–¹æ³•æˆ–é™æ€æ–¹æ³•ï¼šdWCTYpHEFA/xV8BrvOpKRqkO1d88b9Ip8VkvBeLuZho=

```java
@Resource
@Lazy
private InnerUserService userService;

// è°ƒç”¨å®ä¾‹æ–¹æ³•
User user = userService.getById(userId);
UserVO userVO = userService.getUserVO(user);

// è°ƒç”¨é™æ€æ–¹æ³•
User loginUser = InnerUserService.getLoginUser(request);
```

#### yu-ai-code-screenshot ç½‘é¡µæˆªå›¾æœåŠ¡

ç½‘é¡µæˆªå›¾æœåŠ¡çš„ä¾èµ–é…ç½®ç›¸å¯¹ç®€å•ï¼šF+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=

```xml
<dependencies>
    <!-- Selenium ç½‘é¡µæˆªå›¾ä¾èµ– -->
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>4.33.0</version>
    </dependency>
    <dependency>
        <groupId>io.github.bonigarcia</groupId>
        <artifactId>webdrivermanager</artifactId>
        <version>6.1.0</version>
    </dependency>
    <dependency>
        <groupId>com.yupi</groupId>
        <artifactId>yu-ai-code-common</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>
```

ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬åº”ç”¨ä¿¡æ¯å’Œ COS å¯¹è±¡å­˜å‚¨é…ç½®ï¼š

```yaml
spring:
  application:
    name: yu-ai-code-screenshot
server:
  port: 8127
  servlet:
    context-path: /api
# æ·»åŠ  COS å¯¹è±¡å­˜å‚¨é…ç½®ï¼ˆéœ€è¦ä»è…¾è®¯äº‘è·å–ï¼‰
cos:
  client:
    host: your-custom-domain.com
    secretId: your-secret-id
    secretKey: your-secret-key
    region: your-region
    bucket: your-bucket-name
```

æ¥ä¸‹æ¥è¿ç§»ä»£ç ï¼š

-   utils/WebScreenshotUtils.java ç½‘é¡µæˆªå›¾å·¥å…·ç±»
-   service/ScreenshotService.java æˆªå›¾æœåŠ¡å’Œå®ç°ç±»

æ–°å¢ä¸»å¯åŠ¨ç±»ï¼š1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

```java
@SpringBootApplication
public class YuAiCodeScreenshotApplication {
    public static void main(String[] args) {
        SpringApplication.run(YuAiCodeScreenshotApplication.class, args);
    }
}
```

å®Œæˆæ‰€æœ‰æ¨¡å—çš„æ„å»ºåï¼Œå¯ä»¥ç”¨â  Maven æ‰§è¡Œâ çˆ¶é¡¹ç›®çš„æ•´ä½“æ‰“åŒ…ï¼Œç¡®ä¿æ‰€æœ‰æ¨¡å—éƒ½èƒ½æˆåŠŸç¼–è¯‘ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/MssDcHd2Y13J1NDu.webp)UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

## å››ã€Nacos + Dubbo æœåŠ¡é—´è°ƒç”¨

å‰é¢æˆ‘ä»¬å·²ç»ä»‹ç»äº†æ³¨å†Œä¸­å¿ƒå’Œæœâ åŠ¡è°ƒç”¨çš„åŸºæœ¬æ¦‚å¿µï¼Œæ¥â ä¸‹æ¥æˆ‘ä»¬åˆ©ç”¨ Nacos å’Œ Dubbo æ¥å®ç°å¾®æœåŠ¡é—´çš„é€šä¿¡ã€‚

### Nacos å®‰è£…

[Nacos](https://nacos.io/docs/v2.3/what-is-nacos) æ˜¯æˆ‘ä»¬é€‰æ‹©çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰å¾®æœåŠ¡çš„æ³¨å†Œå‘ç°å’Œé…ç½®ä¿¡æ¯ã€‚

æ ¹æ® [ç‰ˆæœ¬å…¼å®¹æ€§è¦æ±‚](https://sca.aliyun.com/docs/2023/overview/version-explain)ï¼Œæˆ‘ä»¬å¿…é¡»é€‰æ‹© Nacos `v2.3.2` ç‰ˆæœ¬ã€‚å¯ä»¥ä» [Nacos å®˜æ–¹ç½‘ç«™ä¸‹è½½](https://nacos.io/download/release-history) å¯¹åº”ç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

è§£å‹åï¼Œè¿›å…¥ bin ç›®å½•è¿â è¡Œä»¥ä¸‹å‘½ä»¤ï¼šâ€‚â€‚â€‚â â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€‰â€‰â€‰â€‚â€‰â€‰â€‰â€‰â€‚â€‚â€‚â€‰â€‚â€‚cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

```bash
# Windows
startup.cmd -m standalone

# Linux / Mac
sh startup.sh -m standalone
```

çœ‹åˆ°è¾“å‡ºä¿¡æ¯ï¼Œè¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/y45ZJBAtfHH35lKr.webp)cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥è®¿é—® [http://localhost:8848/nacos](http://localhost:8848/nacos) è¿›å…¥ Nacos æ§åˆ¶å°ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/mrhDAXcFOel1RxzC.webp)

å¦‚æœéœ€è¦è´¦å·å¯†ç çš„è¯ï¼Œé»˜è®¤éƒ½æ˜¯ nacosã€‚EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

### æœåŠ¡è°ƒç”¨å…³ç³»åˆ†æ

åœ¨æˆ‘ä»¬çš„å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡é—´â çš„è°ƒç”¨å…³ç³»å¹¶ä¸å¤æ‚â ï¼Œä¸»è¦æ˜¯ 2 ç±»ï¼š

1ï¼‰ç”¨æˆ·æœåŠ¡è¢«è°ƒç”¨çš„æ¥å£ï¼ˆä¸»è¦æ˜¯åº”ç”¨æœåŠ¡è°ƒç”¨ï¼‰WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

åŒ…æ‹¬è·å–ç”¨æˆ·ä¿¡æ¯ã€æ‰¹é‡è·å–ç”¨â æˆ·ä¿¡æ¯ã€è·å–ç”¨æˆ· â VOã€è·å–å½“å‰ç™»å½•ç”¨æˆ·ï¼ˆæ”¹ä¸ºé™æ€æ–¹æ³•ï¼‰ç­‰ã€‚

2ï¼‰åº”ç”¨æœåŠ¡è°ƒç”¨å…¶ä»–æœåŠ¡

è°ƒç”¨ç”¨æˆ·æœåŠ¡è¿›è¡Œç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢â å’Œæƒé™éªŒè¯ï¼Œè°ƒç”¨æˆªâ å›¾æœåŠ¡ç”Ÿæˆåº”ç”¨å°é¢å›¾ã€‚EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

### å¼•å…¥ Dubbo

[Dubbo](https://cn.dubbo.apache.org/zh-cn/) æ˜¯é˜¿é‡Œå¼€æºçš„é«˜æ€§èƒ½ RPC æ¡†æ¶ï¼Œå®ƒæä¾›äº†é¢å‘æ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ã€å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ç­‰åŠŸèƒ½ã€‚

æ³¨æ„ï¼Œå®ƒçš„ä½œç”¨å’Œ Spring Cloud æ˜¯ç±»ä¼¼çš„ï¼Œéƒ½èƒ½å®â ç°æœåŠ¡å‘ç°å’Œæ²»ç†ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨ä¸€ä¸ªå°±å¯â ä»¥äº†ã€‚å’Œ Spring Cloud çš„ HTTP è°ƒç”¨ç›¸æ¯”ï¼ŒDubbo åŸºäº TCP ç­‰åè®®ï¼Œå…·æœ‰æ›´é«˜çš„æ€§èƒ½å’Œæ›´ä½çš„å»¶è¿Ÿã€‚WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/GHBXutvTD2UuQLFq.webp)

é¦–å…ˆåœ¨çˆ¶é¡¹ç›®ä¸­å®šä¹‰ Dubbo çš„ä¾èµ–ç‰ˆæœ¬ï¼š

```xml
<properties>
    <dubbo.version>3.3.0</dubbo.version>
</properties

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.apache.dubbo</groupId>
            <artifactId>dubbo-bom</artifactId>
            <version>${dubbo.version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

ä¹‹åè¦åœ¨æ¯ä¸ªéœ€è¦æœåŠ¡é—´è°ƒç”¨çš„â å¾®æœåŠ¡ä¸­æ·»åŠ  Duâ bbo ä¾èµ–ï¼ŒåŒ…æ‹¬ç”¨æˆ·æœåŠ¡ã€åº”ç”¨æœåŠ¡ã€æˆªå›¾æœåŠ¡ï¼š

```xml
<!-- Dubbo -->
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-nacos-spring-boot-starter</artifactId>
</dependency>
```

### ç”¨æˆ·æœåŠ¡

åœ¨ç”¨æˆ·æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æä¾›æœâ åŠ¡ç»™å…¶ä»–å¾®æœåŠ¡â è°ƒç”¨ã€‚é¦–å…ˆå¼•å…¥ä¾èµ–ï¼š

```xml
<!-- Dubbo -->
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-nacos-spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>com.yupi</groupId>
    <artifactId>yu-ai-code-client</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency>
```

åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  Dubbo é…ç½®ï¼šF+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=

```yaml
# Dubbo
dubbo:
  registry:
    address: nacos://127.0.0.1:8848?username=nacos&password=nacos
    register-mode: instance
  protocol:
    name: tri
    port: 50051
  consumer:
    timeout: 60000
  provider:
    timeout: 60000
```

ç¼–å†™æœåŠ¡å®ç°ç±»ï¼Œä½¿ç”¨ `@DubboService` æ³¨è§£æ ‡è®°ï¼Œä½œä¸ºä¸€ä¸ªå¯è¢«å‘ç°çš„æœåŠ¡ï¼š

```java
@DubboService
public class InnerUserServiceImpl implements InnerUserService {

    @Resource
    private UserService userService;

    @Override
    public List<User> listByIds(Collection<? extends Serializable> ids) {
        return userService.listByIds(ids);
    }

    @Override
    public User getById(Serializable id) {
        return userService.getById(id);
    }

    @Override
    public UserVO getUserVO(User user) {
        return userService.getUserVO(user);
    }
}
```

åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ  @EnableDubbo æ³¨è§£ï¼š

```java
@SpringBootApplication
@EnableDubbo
@MapperScan("com.yupi.yuaicodemother.mapper")
public class YuAiCodeUserApplication {
    public static void main(String[] args) {
        SpringApplication.run(YuAiCodeUserApplication.class, args);
    }
}
```

å¯åŠ¨ç”¨æˆ·æœåŠ¡åï¼Œå¯ä»¥åœ¨ Nacâ os ä¸­çœ‹åˆ°æœåŠ¡ä¿¡æ¯â ï¼šâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€‰â€‰â€‰â€‚â€‰â€‰â€‰â€‰â€‚â€‚â€‚â€‰â€‚â€‚cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/2THPMLEYZB8EuOrO.webp)

![](https://pic.code-nav.cn/course_picture/1608440217629360130/EkVoEGf3ivCM12jp.webp)

### æˆªå›¾æœåŠ¡

å…ˆå¼•å…¥ä¾èµ–ï¼š

```xml
<!-- Dubbo -->
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-nacos-spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>com.yupi</groupId>
    <artifactId>yu-ai-code-client</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency>
```

ç„¶åä¿®æ”¹é…ç½®ï¼Œä¸ç”¨æˆ·æœåŠ¡çš„é…â ç½®ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ç«¯å£â ä¸åŒï¼Œè€Œä¸”ç”±äºæˆªå›¾æ“ä½œæ¯”è¾ƒè€—æ—¶ï¼Œå°†è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º 120 ç§’ï¼šF+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=

```yaml
# Dubbo
dubbo:
  registry:
    address: nacos://127.0.0.1:8848?username=nacos&password=nacos
    register-mode: instance
  protocol:
    name: tri
    port: 50052
  consumer:
    timeout: 120000
  provider:
    timeout: 120000
```

ç¼–å†™æœåŠ¡å®ç°ç±»ï¼š

```java
@DubboService
@Slf4j
public class InnerScreenshotServiceImpl implements InnerScreenshotService {

    @Resource
    private ScreenshotService screenshotService;

    @Override
    public String generateAndUploadScreenshot(String webUrl) {
        return screenshotService.generateAndUploadScreenshot(webUrl);
    }
}
```

å¯åŠ¨ç±»å¢åŠ  Dubbo æ³¨è§£ï¼š

```java
@SpringBootApplication
@EnableDubbo
public class YuAiCodeScreenshotApplication {
    public static void main(String[] args) {
        SpringApplication.run(YuAiCodeScreenshotApplication.class, args);
    }
}
```

å¯åŠ¨æœåŠ¡ï¼Œåœ¨ Nacos ä¸­çœ‹åˆ°æœåŠ¡æ³¨å†ŒæˆåŠŸï¼š1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/c7gce5sVnzQT8a07.webp)

### åº”ç”¨æœåŠ¡

å…ˆå¼•å…¥ä¾èµ–ï¼šdWCTYpHEFA/xV8BrvOpKRqkO1d88b9Ip8VkvBeLuZho=

```xml
<!-- Dubbo -->
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-nacos-spring-boot-starter</artifactId>
</dependency>
```

åº”ç”¨æœåŠ¡ä½œä¸ºæœåŠ¡æ¶ˆè´¹è€…ï¼Œéœ€è¦â è°ƒç”¨å…¶ä»–æœåŠ¡ï¼Œä¹Ÿéœ€â è¦æ·»åŠ  Dubbo é…ç½®ï¼š

```yaml
# Dubbo
dubbo:
  registry:
    address: nacos://127.0.0.1:8848?username=nacos&password=nacos
    register-mode: instance
  protocol:
    name: tri
    port: 50053
  consumer:
    timeout: 120000
  provider:
    timeout: 120000
```

ä¿®æ”¹æ‰€æœ‰ InnerService çš„å¼•ç”¨ï¼Œä½¿ç”¨ `@DubboReference` æ³¨è§£æ³¨å…¥è¿œç¨‹æœåŠ¡ï¼š

```java
@DubboReference
private InnerUserService userService;

@DubboReference
private InnerScreenshotService screenshotService;
```

`@DubboReference` æ˜¯ Dubbo æ¡†æ¶æä¾›çš„æœåŠ¡æ¶ˆè´¹è€…æ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨æ³¨å…¥è¿œç¨‹æœåŠ¡çš„ä»£ç†å¯¹è±¡ã€‚å½“ Spring å®¹å™¨å¯åŠ¨æ—¶ï¼ŒDubbo ä¼šæ ¹æ®æ³¨è§£ä¿¡æ¯ä» Nacos æ³¨å†Œä¸­å¿ƒæŸ¥æ‰¾å¯¹åº”çš„æœåŠ¡æä¾›è€…åœ°å€ï¼Œç„¶ååˆ›å»ºä»£ç†å¯¹è±¡æ³¨å…¥åˆ°å½“å‰æœåŠ¡ä¸­ã€‚é€šè¿‡è¿™ä¸ªä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼ŒDubbo ä¼šè‡ªåŠ¨å°†è°ƒç”¨è¯·æ±‚é€šè¿‡ç½‘ç»œå‘é€åˆ°è¿œç¨‹æœåŠ¡ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™è°ƒç”¨æ–¹ï¼Œæ•´ä¸ªè¿‡ç¨‹å¯¹å¼€å‘è€…æ¥è¯´ **å°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•**ã€‚1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

å¯åŠ¨ç±»å¢åŠ  Dubbo æ³¨è§£ï¼š

```java
@SpringBootApplication(exclude = {RedisEmbeddingStoreAutoConfiguration.class})
@MapperScan("com.yupi.yuaicodemother.mapper")
@EnableDubbo
@EnableCaching
public class YuAiCodeAppApplication {
    public static void main(String[] args) {
        SpringApplication.run(YuAiCodeAppApplication.class, args);
    }
}
```

å¯åŠ¨åº”ç”¨æœåŠ¡æˆåŠŸï¼šUzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/MPr3W1L1YdDwTHc6.webp)

é€šè¿‡æ¥å£æ–‡æ¡£æµ‹è¯•åˆ›å»ºåº”ç”¨æ¥å£â å’Œè·å–ç²¾é€‰åº”ç”¨åˆ—è¡¨â æ¥å£ï¼Œå¯ä»¥éªŒè¯æœåŠ¡é—´è°ƒç”¨æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

å‘ç°æˆåŠŸè°ƒç”¨åˆ°äº†å†…éƒ¨æœåŠ¡ï¼šâ€‚â â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€‰â€‰â€‰â€‚â€‰â€‰â€‰â€‰â€‚â€‚â€‚â€‰â€‚â€‚WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/5ZGHpnVschbJZX5C.webp)

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¾®æœåŠ¡æ‹†åˆ†åâ ï¼ŒSpring Câ ache çš„æ¡ä»¶åˆ¤æ–­å¯èƒ½ä¼šå¤±æ•ˆï¼Œæ¯”å¦‚ï¼š

```java
@Cacheable(
        value = "good_app_page",
        key = "T(com.yupi.yuaicodemother.utils.CacheKeyUtils).generateKey(#appQueryRequest)",
        condition = "#appQueryRequest.pageNum <= 10"
)
```

è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„ Spring Cache + å¾®æœåŠ¡çš„é—®é¢˜ã€‚å¾®æœâ åŠ¡æ‹†åˆ†åï¼ŒAOP æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå¯èƒ½å‘ç”Ÿâ å˜åŒ–ï¼ŒCache æ‹¦æˆªå™¨å¯èƒ½æ¯” RequestBody è§£ææ›´æ—©æ‰§è¡Œï¼Œå› æ­¤ SpEL è¡¨è¾¾å¼æ— æ³•æ­£ç¡®è§£æè¯·æ±‚å‚æ•°ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æ³¨é‡Šæ‰ conditionâ  æˆ–è€…ä½¿ç”¨ unless æ›¿ä»£â  conditionï¼Œå› ä¸º unless æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œååˆ¤æ–­ï¼ˆè¿™æ—¶å‚æ•°å·²è§£æå®Œæˆï¼‰ã€‚

___

ç›®å‰å„ä¸ªæœåŠ¡å·²ç»å¼€å‘å®Œæˆï¼Œä½†æ˜¯ç°åœ¨çš„é—®é¢˜æ˜¯ï¼š

1.  å‰ç«¯ä¸æ–¹ä¾¿è°ƒç”¨
2.  æ— æ³•è¿›è¡Œç”¨æˆ·æƒé™æ ¡éªŒ
3.  åªèƒ½å•ç‹¬æŸ¥çœ‹æŸä¸ªæœåŠ¡çš„æ¥å£æ–‡æ¡£

ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«å°è¯•è§£å†³è¿™äº›é—®é¢˜ã€‚UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

## äº”ã€Higress å¾®æœåŠ¡ç½‘å…³

å‰é¢æˆ‘ä»¬å·²ç»ä»‹ç»äº†å¾®æœåŠ¡ç½‘å…³çš„åŸºæœ¬æ¦‚å¿µï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹ä»‹ç»å¦‚ä½•ä½¿ç”¨ [Higress](https://higress.cn/) æ¥æ„å»ºé«˜æ€§èƒ½çš„ [AI åŸç”Ÿ API ç½‘å…³](https://higress.cn/docs/latest/overview/what-is-higress/)ã€‚

ä½œä¸ºç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼ŒHigrâ ess ç½‘å…³ä¸ºæˆ‘ä»¬â æä¾›äº†ä»¥ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼šUzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

-   ç»Ÿä¸€å…¥å£ï¼šä¸ºæ‰€æœ‰å¾®æœåŠ¡æä¾›ç»Ÿä¸€çš„è®¿é—®å…¥å£ï¼Œç®€åŒ–å®¢æˆ·ç«¯çš„è°ƒç”¨å¤æ‚åº¦ã€‚
-   è¯·æ±‚è·¯ç”±ï¼šæ ¹æ®è¯·æ±‚çš„è·¯å¾„ã€å‚æ•°ç­‰ä¿¡æ¯ï¼Œå°†è¯·æ±‚è·¯ç”±åˆ°æ­£ç¡®çš„å¾®æœåŠ¡å®ä¾‹ã€‚
-   è´Ÿè½½å‡è¡¡ï¼šåœ¨å¤šä¸ªæœåŠ¡å®ä¾‹ä¹‹é—´åˆ†å‘è¯·æ±‚ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚
-   å®‰å…¨è®¤è¯ï¼šç»Ÿä¸€å¤„ç†èº«ä»½éªŒè¯ã€æƒé™æ§åˆ¶ç­‰å®‰å…¨ç›¸å…³åŠŸèƒ½ã€‚
-   é™æµç†”æ–­ï¼šå®ç°è¯·æ±‚é™æµã€æœåŠ¡ç†”æ–­ç­‰ä¿æŠ¤æœºåˆ¶ï¼Œé˜²æ­¢ç³»ç»Ÿè¿‡è½½ã€‚
-   ç›‘æ§æ—¥å¿—ï¼šæ”¶é›†è¯·æ±‚æ—¥å¿—ã€ç›‘æ§æŒ‡æ ‡ç­‰ä¿¡æ¯ï¼Œä¾¿äºç³»ç»Ÿè¿ç»´å’Œé—®é¢˜æ’æŸ¥

![](https://pic.code-nav.cn/course_picture/1608440217629360130/o1I5urVvDBRXdvEY.webp)

### Higress å®‰è£…

Higress çš„å®‰è£…éœ€è¦ â Docker ç¯å¢ƒâ æ”¯æŒï¼Œå¦‚æœæ²¡æœ‰å®‰è£… Docker çš„è¯ï¼Œå¿…é¡»å…ˆå®‰è£…ï¼

æ¨èç›´æ¥ [å®‰è£… Docker Desktop](https://www.docker.com/products/docker-desktop/)ï¼Œä¼šè‡ªåŠ¨å®‰è£… Docker ä»¥åŠå¯è§†åŒ–ç®¡ç†è½¯ä»¶ã€‚

ä½†æ˜¯è¦æ³¨æ„ï¼ŒWindows ä¸Šæƒ³è¿è¡Œ Docker çš„è¯ï¼Œå¿…é¡»è¦å®‰è£… WSLï¼ˆLinux å­ç³»ç»Ÿï¼‰ï¼Œ[å‚è€ƒå®‰è£…æ–‡æ¡£](https://learn.microsoft.com/zh-cn/windows/wsl/install)ã€‚cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/npMgMqBwDTBuxKOY.webp)

ä¸è¿‡ç”±äºå®‰è£…æ—¶å¯èƒ½ä¼šå‡ºç°â€œä¸æœåŠ¡å™¨çš„è¿æ¥è¢«é‡ç½®â€ï¼Œé±¼çš®å»ºè®®å¤§å®¶ç›´æ¥åˆ° [GitHub ä¸‹è½½ WSL å®‰è£…åŒ…](https://github.com/microsoft/WSL/releases)ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/RZXydERc6VyR18uy.webp)EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

æ³¨æ„ï¼Œå¦‚æœå®åœ¨æ— æ³•å®‰è£… WSLï¼Œä¹Ÿå¯ä»¥ç”¨è™šæ‹Ÿæœºè½¯ä»¶ï¼Œå‚è€ƒ [ç¼–ç¨‹å¯¼èˆª OJ åœ¨çº¿åˆ¤é¢˜é¡¹ç›®](https://www.codefather.cn/course/1790980707917017089)ã€‚

å®‰è£…å¥½ Docker åï¼Œå¯â ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨æœ¬â åœ°å¯åŠ¨ Higressï¼š

```shell
docker run -d --rm --name higress-ai -v ${PWD}:/data -e O11Y=on \
        -p 8001:8001 -p 8080:8080 -p 8443:8443  \
        higress-registry.cn-hangzhou.cr.aliyuncs.com/higress/all-in-one:latest
```

ç›‘å¬ç«¯å£è¯´æ˜ï¼š

-   8001 ç«¯å£ï¼šHigress UI æ§åˆ¶å°å…¥å£
-   8080 ç«¯å£ï¼šç½‘å…³ HTTP åè®®å…¥å£
-   8443 ç«¯å£ï¼šç½‘å…³ HTTPS åè®®å…¥å£

å¯ä»¥ç”¨ `docker ps` å‘½ä»¤æŸ¥çœ‹å¯åŠ¨çŠ¶æ€ï¼šqo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/Hek50P3vxnIphB66.webp)

Docker Desktop ä¸­èƒ½çœ‹åˆ°è¿è¡Œçš„å®¹å™¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/mQkoNMFdSZ5f8W9Q.webp)WBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡ 800â 1 ç«¯å£è®¿é—® Hiâ gress æ§åˆ¶å°ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/QhirbmThoW0Dn14j.webp)

### æœåŠ¡æ¥æºé…ç½®

åœ¨ Higress æ§åˆ¶å°ä¸­â é…ç½®æœåŠ¡æ¥æºï¼Œå¯ä»¥â ä» Nacos ä¸­è·å–æœåŠ¡æ¥æºï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/V78os1nWqpJdGuma.webp "null")

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ³¨å†Œä¸­å¿ƒåœ°å€ä¸â æ”¯æŒ 127.0.â 0.1 æˆ– localhostï¼Œéœ€è¦ä½¿ç”¨æœ¬æœºçš„å†…ç½‘åœ°å€ã€‚qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

Windows ç³»ç»Ÿé€šè¿‡ `ipconfig` å‘½ä»¤æŸ¥çœ‹ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/TpuQH6dKZVLF4y49.webp)

Mac ç³»ç»Ÿå¯ä»¥ç›´æ¥åœ¨ç½‘ç»œè®¾ç½®ä¸­æŸ¥çœ‹ï¼šdWCTYpHEFA/xV8BrvOpKRqkO1d88b9Ip8VkvBeLuZho=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/coGMn7P7UAnJgNdi.webp)

é…ç½®å®Œæˆåï¼ŒHigress â ä¼šè‡ªåŠ¨å‘ç°åœ¨ Naâ cos ä¸­æ³¨å†Œçš„æ‰€æœ‰å¾®æœåŠ¡ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/CbXU0Mifj5GFDfFF.webp)p+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=

ä½†æ˜¯ Dubbo + Nacos é»˜è®¤åªæ³¨å†Œ Dubbo æœåŠ¡ï¼ˆRPCæ¥å£ï¼‰ï¼Œè€Œä¸æ³¨å†Œ HTTP æ¥å£ã€‚æˆ‘ä»¬å¯¹å¤–æä¾›çš„æœåŠ¡éƒ½æ²¡æœ‰è¢«å‘ç°ï¼Œéœ€è¦æ‰‹åŠ¨æ³¨å†Œï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/mmNP32Q8zg2ubgz4.webp)

æ‰€æœ‰æœåŠ¡æ³¨å†Œå®Œæˆï¼šnShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/7wyta6AolF2Qf4Wl.webp)

### è·¯ç”±é…ç½®

æ‰‹åŠ¨é…ç½®è·¯ç”±è§„åˆ™ï¼Œä¸ºæ¯ä¸ªæœåŠ¡åˆ›å»ºå¯¹åº”çš„è·¯ç”±ï¼šWBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/aZQyG7KlYZWMgDG6.webp)

é€‰æ‹©å¯¹åº”çš„æœåŠ¡å¹¶é…ç½®è·¯ç”±è§„åˆ™ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/H6lQbSPDGS0gTURY.png)UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

è¿™æ ·ä¸€æ¥ï¼Œå‰ç«¯åªéœ€è¦è®¿é—®ç½‘å…³çš„åœ°å€ `localhost:8080/api/user/xxx`ï¼Œå°±ä¼šè‡ªåŠ¨è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡ `localhost:8124/api/user/xxx`ã€‚

è·¯ç”±é…ç½®å®Œæˆï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/9z3iPkV4XKnkNuSk.webp)F+kzRHG1248BgN91hBPqtNxbML3nLzvb0nw4jU7NTyI=

å®Œæˆè·¯ç”±é…ç½®åï¼Œéœ€è¦ä¿®æ”¹å‰ç«¯ vite â è¯·æ±‚ä»£ç†åœ°å€ä¸º 8080 â ç«¯å£ï¼Œç„¶åå°±å¯ä»¥åˆ©ç”¨å‰ç«¯æ¥æµ‹è¯•å®Œæ•´ä¸šåŠ¡æµç¨‹äº†ï¼Œèƒ½æ­£å¸¸ç™»å½•å’Œç”Ÿæˆç½‘ç«™å°±è¯´æ˜é…ç½®æˆåŠŸã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/OhqGMxgPqvsPllse.webp)

ğŸ’¡ å¦‚æœä½ ä½¿ç”¨äº† Spring Cloud ä½œä¸ºæœåŠ¡å‘ç°ï¼ˆè€Œä¸æ˜¯ Dubboï¼‰ï¼Œå¯ä»¥ [æ•´åˆ Nacos å¿«é€Ÿå‘ç°æœåŠ¡](https://nacos.io/docs/latest/ecology/use-nacos-with-spring-cloud)ã€‚1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

### æ’ä»¶é…ç½®

Higress æä¾›äº†ä¸°å¯Œçš„â æ’ä»¶åŠŸèƒ½ï¼Œå¯ä»¥æ»¡è¶³â ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚ç»™å¤§å®¶åˆ†äº«ä¸€äº›å…¸å‹çš„åœºæ™¯ï¼š

#### CORS è·¨åŸŸé…ç½®

å¯ä»¥å…¨å±€é…ç½® CORS è·¨åŸŸæ”¯æŒï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/EYkuOBJB70ldJhKf.webp)

æ”¯æŒè¡¨å•å¡«å†™æˆ–è€… YAML é…ç½®æ–‡ä»¶ï¼šUzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/93bfEyc8AwtHBJ65.webp)

ä¹Ÿå¯ä»¥å•ç‹¬é’ˆå¯¹æŸä¸ªè·¯ç”±é…ç½®è·¨åŸŸæ’ä»¶ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/hwtRrnIwAPCTAkjm.webp)1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

å¦‚å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/byueUir8Ak0kQn99.webp)

![](https://pic.code-nav.cn/course_picture/1608440217629360130/4o0SLh1i9UotZYR7.webp)p+CfRPZxNEuU7hG8dzfPcN4R10eC9eypGHmTaRf/x7c=

#### æƒé™è®¤è¯æ’ä»¶

Higress æä¾›äº†å¤šç§æƒé™è®¤è¯æ’ä»¶ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/w5hu2NPuxwlIzyNS.webp)1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

æ¯”å¦‚ Key è®¤è¯æ˜¯ä¸€ä¸ªå…¸å‹â çš„ API è®¤è¯åœºâ æ™¯ï¼ˆæƒ³æƒ³è°ƒç”¨ AI æ—¶è¾“å…¥çš„ API Keyï¼‰ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/uPZQfuJcoDE9aEDu.webp)

#### å®‰å…¨æ€§æ’ä»¶

å¯ä»¥é…ç½® IP é™åˆ¶ã€è¯·æ±‚å±è”½ç­‰å®‰å…¨æ’ä»¶ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/G04GnWouM2Ntfh9q.webp)

æ¯”å¦‚é™åˆ¶ç¦æ­¢æŸä¸ª IP è®¿é—®ï¼šWBpr9WI72APgOj+DCCZKObs+ofP0VhBHSvqSELGriv0=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/1IGJUG5rIAjdwmtT.webp)

è¿˜å¯ä»¥åˆ©ç”¨è¯·æ±‚å±è”½æ’ä»¶æé«˜å®‰å…¨æ€§ã€‚æµ‹è¯•ä¸€ä¸‹ï¼Œç¦æ­¢è®¿é—® `/api/user/get/login` æ¥å£ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/EuhqM5gExjIdCvh8.webp)qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

é…ç½®åè¯¥æ¥å£ä¼šè¿”å› 404ï¼Œâ å› ä¸ºè¢«ç½‘å…³æ‹¦æˆªäº†ï¼Œâ éƒ½åˆ°ä¸äº†ç”¨æˆ·æœåŠ¡ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/9PDeph8E6cgF6gow.webp)

#### é™æµæ’ä»¶

è¿˜å¯ä»¥é…ç½®é™æµæ’ä»¶ï¼Œåœ¨ç½‘å…³å±‚é¢æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/xNlDg7znBYmXFH0X.webp)

æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯åŸºäº Key è¿›è¡Œé™æµâ ï¼ŒKey å¯ä»¥ä»è¯·æ±‚å¤´â æˆ– URL å‚æ•°ä¸­è·å–ï¼Œæ¯”å¦‚æ ¹æ®è¯·æ±‚å‚æ•°ä¸­çš„ appId é™æµã€‚EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/DnG0pmbonyZE6BhY.webp)

## å…­ã€æ›´å¤šæ“ä½œ

### æƒé™è®¤è¯é—®é¢˜è§£å†³

åœ¨å¾®æœåŠ¡æ”¹é€ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°â ä¹‹å‰çš„ AOP é‰´â æƒæ²¡æœ‰ç”Ÿæ•ˆï¼Œå› ä¸ºåªæœ‰ç”¨æˆ·æ¨¡å—æœ‰ AOP é‰´æƒç±»ã€‚

æ¯”å¦‚æœªç™»å½•æ—¶è°ƒç”¨ç®¡ç†å‘˜æŸ¥è¯¢å¯¹è¯å†å²æ¥å£ï¼Œå‘ç°ä¹Ÿèƒ½è°ƒç”¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/dNdasGhTfFBlttQh.webp)cZq9/nGwbRXl38gxWuOGAJfnulyo9Sx2vt9GhAJuMwQ=

å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Spring Cloud Gâ atewayï¼Œå¯ä»¥åœ¨é¡¹ç›®å…¥å£å¤„â è‡ªå®šä¹‰é‰´æƒé€»è¾‘ã€‚ä½†ç°åœ¨ Higress æ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¾ˆéš¾ç¼–å†™å’Œå·²æœ‰é¡¹ç›®é›†æˆçš„è‡ªå®šä¹‰é€»è¾‘ã€‚

æ€ä¹ˆåŠå‘¢ï¼Ÿ

`aop/AuthInterceptor` æ˜¯ä¸€ä¸ªæœ‰ç‚¹å„¿ç‰¹æ®Šçš„ç±»ï¼Œç”±äºä¾èµ–äº† UserService å’Œ User å®ä½“ç±»ï¼Œæ— æ³•æ”¾åˆ° common åŒ…ä¸­ã€‚å¦‚æœå•ç‹¬å­˜æ”¾åœ¨ç”¨æˆ·æ¨¡å—ï¼Œå…¶ä»–æœåŠ¡æƒ³è¦ä½¿ç”¨å°±å¾—å¼•å…¥ç”¨æˆ·æ¨¡å—ï¼ˆè¿èƒŒäº†å¾®æœåŠ¡çš„åŸåˆ™ï¼‰ï¼Œæ‰€ä»¥æ¯”è¾ƒå¿«é€Ÿçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåç»­æ¯ä¸ªéœ€è¦é‰´æƒçš„æœåŠ¡å•ç‹¬å¤åˆ¶è¿™ä¸ªç±»å³å¯ã€‚qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

æ¯”å¦‚åœ¨åº”ç”¨æ¨¡å—ä¸­å¼•å…¥ï¼š

```java
@Aspect
@Component
public class AuthInterceptor {
    
    /**
     * æ‰§è¡Œæ‹¦æˆª
     *
     * @param joinPoint åˆ‡å…¥ç‚¹
     * @param authCheck æƒé™æ ¡éªŒæ³¨è§£
     */
    @Around("@annotation(authCheck)")
    public Object doInterceptor(ProceedingJoinPoint joinPoint, AuthCheck authCheck) throws Throwable {
        String mustRole = authCheck.mustRole();
        RequestAttributes requestAttributes = RequestContextHolder.currentRequestAttributes();
        HttpServletRequest request = ((ServletRequestAttributes) requestAttributes).getRequest();
        // å½“å‰ç™»å½•ç”¨æˆ·
        User loginUser = InnerUserService.getLoginUser(request);
        UserRoleEnum mustRoleEnum = UserRoleEnum.getEnumByValue(mustRole);
        // ä¸éœ€è¦æƒé™ï¼Œæ”¾è¡Œ
        if (mustRoleEnum == null) {
            return joinPoint.proceed();
        }
        // ä»¥ä¸‹ä¸ºï¼šå¿…é¡»æœ‰è¯¥æƒé™æ‰é€šè¿‡
        // è·å–å½“å‰ç”¨æˆ·å…·æœ‰çš„æƒé™
        UserRoleEnum userRoleEnum = UserRoleEnum.getEnumByValue(loginUser.getUserRole());
        // æ²¡æœ‰æƒé™ï¼Œæ‹’ç»
        if (userRoleEnum == null) {
            throw new BusinessException(ErrorCode.NO_AUTH_ERROR);
        }
        // è¦æ±‚å¿…é¡»æœ‰ç®¡ç†å‘˜æƒé™ï¼Œä½†ç”¨æˆ·æ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œæ‹’ç»
        if (UserRoleEnum.ADMIN.equals(mustRoleEnum) && !UserRoleEnum.ADMIN.equals(userRoleEnum)) {
            throw new BusinessException(ErrorCode.NO_AUTH_ERROR);
        }
        // é€šè¿‡æƒé™æ ¡éªŒï¼Œæ”¾è¡Œ
        return joinPoint.proceed();
    }
}
```

å†æ¬¡æµ‹è¯•ï¼Œå‘ç°é‰´æƒæ³¨è§£ç”Ÿæ•ˆäº†ï¼šqo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/OBdRHeD6VcXt2WU5.webp)

ğŸ’¡ å¦‚æœéœ€è¦é‰´æƒçš„æœåŠ¡è¾ƒå¤šï¼Œâ æ›´ä¼˜é›…çš„æ–¹å¼æ˜¯å†™ä¸€ä¸ªâ å•ç‹¬çš„é‰´æƒæœåŠ¡ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥äº†è§£ä¸‹ OAuth2 åè®®ã€‚

åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Higressâ  æ’ä»¶çš„è¯·æ±‚å±è”½å’Œè®¤è¯â æœºåˆ¶ï¼Œç»„åˆä½¿ç”¨ Higress + æœåŠ¡å†…é‰´æƒï¼Œå®ç°å¤šå±‚æ¬¡çš„å®‰å…¨é˜²æŠ¤ã€‚1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

### æ¥å£æ–‡æ¡£èšåˆ

åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰â è‡ªå·±çš„æ¥å£æ–‡æ¡£ï¼Œä¸ºâ äº†æ–¹ä¾¿æŸ¥çœ‹å’Œç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æ¥å£æ–‡æ¡£èšåˆã€‚

Knife4j æä¾›äº† [æ¥å£æ–‡æ¡£èšåˆåŠŸèƒ½](https://doc.xiaominfo.com/docs/middleware-sources/aggregation-cloud)ï¼Œæ”¯æŒ Cloud æ¨¡å¼è‡ªå·±å¡«å†™è¦èšåˆçš„æœåŠ¡åœ°å€é…ç½®ï¼›ä¹Ÿæ”¯æŒè·Ÿ Higress ç½‘å…³ä¸€æ ·ï¼Œé‡‡ç”¨ Nacos æ¨¡å¼è‡ªåŠ¨å‘ç°ã€‚dWCTYpHEFA/xV8BrvOpKRqkO1d88b9Ip8VkvBeLuZho=

ä½†å¾ˆå‘çš„æ˜¯ï¼Œè¿™ç§æ–¹å¼åªæ”¯æŒ â Spring Boâ ot 2ï¼ŒSpring Boot 3 æ ¹æœ¬æ— æ³•å¯åŠ¨ï¼

![](https://pic.code-nav.cn/course_picture/1608440217629360130/i74EWb1OpgFbCJBR.webp)

ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œå¯ä»¥è€ƒè™‘è‡ªå·±å†™â ä¸€ä¸ªå¯¼èˆªç½‘ç«™ï¼ˆç”¨ â AI ç”Ÿæˆå³å¯ï¼‰ï¼Œç‚¹å‡»æŸä¸ªæœåŠ¡åå°±è·³è½¬åˆ°å¯¹åº”çš„æ¥å£æ–‡æ¡£é¡µé¢ã€‚UzapLzatIvJJsWWs1pRz7879eXluI/+jA6d4qBCHuKE=

### é¡¹ç›®éƒ¨ç½²

å¾®æœåŠ¡é¡¹ç›®çš„éƒ¨ç½²ç›¸æ¯”å•ä½“åº”ç”¨â æ›´åŠ å¤æ‚ï¼Œéœ€è¦è€ƒè™‘â å¤šä¸ªæœåŠ¡çš„åè°ƒå¯åŠ¨ã€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†ç­‰é—®é¢˜ã€‚

æ¨èä½¿ç”¨ Docker Compose ç¼–æ’æ‰€æœ‰ä¾èµ–ï¼ˆæ¯”å¦‚ MySQLï¼‰å’Œå¾®æœåŠ¡å®¹å™¨çš„å¯åŠ¨ï¼Œè€Œä¸æ˜¯äººå·¥ä¸€ä¸ªä¸ªå¯åŠ¨æœåŠ¡ï¼Œåœ¨ [ç¼–ç¨‹å¯¼èˆªçš„ OJ åˆ¤é¢˜é¡¹ç›®](https://www.codefather.cn/course/1790980707917017089) ä¸­å¸¦å¤§å®¶å®æˆ˜è¿‡è¿™ç§æ–¹å¼çš„éƒ¨ç½²ï¼Œå»ºè®®å­¦ä¹ ã€‚1vM0bC71h2RCfUkazMGszlP9tIpAZTvdkFrdc8O6/+w=

![](https://pic.code-nav.cn/course_picture/1608440217629360130/cYh0NUh0yKllzPpA.webp)

## ä¸ƒã€æ‰©å±•æ€è·¯

æ³¨æ„ï¼Œä¸‹é¢è¿™äº›åªæ˜¯ç»™å¤§å®¶åˆ†äº«â ä¸€äº›å¾®æœåŠ¡é¡¹ç›®çš„æ‰©â å±•æ€è·¯ï¼Œç›®å‰æ²¡å¿…è¦åˆ»æ„å®ç°ï¼Œç­‰æœ‰å®é™…éœ€è¦äº†å†æ“ä½œå°±å¥½ã€‚nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=

1ï¼‰æœåŠ¡æ²»ç†ä¼˜åŒ–ï¼šå®ç°æœåŠ¡é™æµã€æ·»åŠ æœåŠ¡ç†”æ–­ã€é…ç½®æœâ åŠ¡é™çº§ã€å®ç°ç°åº¦å‘å¸ƒç­‰åŠŸèƒ½ã€‚å¯ä»¥åŸºâ äº Sentinel æˆ– Hystrix å®ç°ç†”æ–­é™çº§ï¼Œä½¿ç”¨ Dubbo çš„è·¯ç”±è§„åˆ™å®ç°ç°åº¦å‘å¸ƒã€‚

2ï¼‰é“¾è·¯è¿½è¸ªç³»ç»Ÿï¼šé›†æˆ SkyWalking æˆ– Zâ ipkin å®ç°åˆ†å¸ƒå¼è¿½è¸ªï¼Œå¯è§†åŒ–â æœåŠ¡è°ƒç”¨é“¾è·¯ï¼Œå¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆå’Œå¼‚å¸¸é—®é¢˜ã€‚ç¼–ç¨‹å¯¼èˆªçš„æ‰‹å†™ RPC æ¡†æ¶é¡¹ç›®ä¸­æœ‰è¯¦ç»†çš„é“¾è·¯è¿½è¸ªå®ç°ã€‚

3ï¼‰é…ç½®ä¸­å¿ƒæ”¹é€ ï¼šä½¿ç”¨ Nacos â Config ç»Ÿä¸€ç®¡ç†æ‰€â æœ‰æœåŠ¡é…ç½®ï¼Œå®ç°é…ç½®çƒ­æ›´æ–°ï¼Œé¿å…é‡å¯æœåŠ¡ã€‚å¯ä»¥æŒ‰ç¯å¢ƒã€æŒ‰æœåŠ¡è¿›è¡Œé…ç½®éš”ç¦»ã€‚EVevk6+j/BC/ssKO5aUZF8Rusnkp1o/HghJkPkRChGQ=

4ï¼‰ç›‘æ§å‘Šè­¦ä½“ç³»ï¼šå»ºç«‹å®Œå–„çš„ Prometheus + Grafana + AlertManager ç›‘æ§å‘Šè­¦ä½“ç³»ï¼Œç›‘æ§ JVM æŒ‡æ ‡ã€ä¸šåŠ¡æŒ‡æ ‡ã€æ¥å£å“åº”æ—¶é—´ç­‰ï¼ŒåŠæ—¶å‘ç°å’Œå¤„ç†é—®é¢˜ã€‚

5ï¼‰æ•°æ®åº“æ‹†åˆ†ï¼šéšç€ä¸šåŠ¡å‘å±•ï¼Œå¯ä»¥â å°†ç”¨æˆ·æœåŠ¡å’Œåº”ç”¨æœåŠ¡çš„â æ•°æ®åº“è¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸ªæœåŠ¡ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“ï¼Œæé«˜æ•°æ®éš”ç¦»æ€§å’Œæ‰©å±•èƒ½åŠ›ã€‚

6ï¼‰æ¶ˆæ¯é˜Ÿåˆ—å¼•å…¥ï¼šå¯¹äºä¸€äº›å¼‚æ­¥å¤„ç†åœºæ™¯ï¼Œâ å¦‚ä»£ç ç”Ÿæˆå®Œæˆåçš„é€šçŸ¥ã€åº”â ç”¨ç»Ÿè®¡æ•°æ®æ›´æ–°ç­‰ï¼Œå¯ä»¥å¼•å…¥ RocketMQ æˆ– Kafka å®ç°å¼‚æ­¥è§£è€¦ã€‚nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=

## æ€»ç»“

é€šè¿‡æœ¬èŠ‚çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æˆåŠŸå°† AI é›¶ä»£ç åº”ç”¨ç”Ÿæˆå¹³å°ä»å•ä½“æ¶æ„æ”¹é€ ä¸ºå¾®æœåŠ¡æ¶æ„ã€‚ä»æœåŠ¡æ‹†åˆ†è®¾è®¡åˆ°å®é™…ç¼–ç å®ç°ï¼Œä» Nacos + Dubbo æœåŠ¡è°ƒç”¨åˆ° Higress ç½‘å…³é…ç½®ï¼Œå®Œæ•´ä½“éªŒäº†å¾®æœåŠ¡æ¶æ„çš„æ„å»ºè¿‡ç¨‹ã€‚

å¸Œæœ›å¤§å®¶æŒæ¡è¿™äº›å¾®æœåŠ¡æ”¹é€ çš„å¥—è·¯å’ŒæŠ€å·§ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚åˆç†æ‹†åˆ†æœåŠ¡ï¼Œæ„å»ºé«˜å¯ç”¨ã€å¯æ‰©å±•çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚è®°ä½æœ€é‡è¦çš„åŸåˆ™ï¼š**ä¸èƒ½æ‹†çš„ä¸è¦ç¡¬æ‹†ï¼Œè¦æ ¹æ®ä¸šåŠ¡å¤æ‚åº¦å’Œå›¢é˜Ÿèƒ½åŠ›å¾ªåºæ¸è¿›åœ°æ¼”è¿›æ¶æ„ã€‚**qo3wYiJtEuojZDmpW2HRDEwGWUH1DzVFQ47Zs4YmYuk=

è‡³æ­¤ï¼Œæœ¬é¡¹ç›®ç»“æŸï¼Œé±¼çš®æ¡èµ·äº†åœ°ä¸Šæˆå †çš„å¤´å‘â ï¼Œå¹äº†å£æ°”ï¼Œæ®è¯´æ”¶åˆ°å¤§å®¶é è¿™â ä¸ªé¡¹ç›®æ‹¿åˆ°çš„ Offer æŠ¥å–œåï¼Œé±¼çš®çš„å¤´å‘å°±ä¼šé•¿å›æ¥ã€‚å¤§å®¶åŠ æ²¹ï¼Œæˆ‘æœŸå¾…ç€é‚£ä¸€å¤©ï¼

nShO7+0zZStNyiJdnnoFDwT4JyyptzNsRjyXLsolAAU=
