---
created: 2025-12-29T15:55:13 (UTC +08:00)
tags: [,Java,Python,JavaScript,å‰ç«¯,Cè¯­è¨€,C++,Goè¯­è¨€,ç¨‹åºå‘˜,ç¼–ç¨‹å­¦ä¹ ,ITæ•™ç¨‹,è‡ªå­¦ç¼–ç¨‹,è½¯ä»¶å¼€å‘,é¡¹ç›®å®æˆ˜,ç¼–ç¨‹å¯¼èˆª,å¼€å‘è€…äº¤æµç¤¾åŒº,ç¼–ç¨‹èµ„æº,è®¡ç®—æœº]
source: https://www.codefather.cn/course/1948291549923344386/section/1955932608684142594
author: 
---

# 12 - éƒ¨ç½²ä¸Šçº¿ - ã€å¤§å‚å¿…å¤‡ã€‘LangChain4j + å·¥ä½œæµ

> ## Excerpt
> æœ¬èŠ‚é‡ç‚¹ æœ¬èŠ‚é‡ç‚¹å†…å®¹æ˜¯é¡¹ç›®éƒ¨ç½²ä¸Šçº¿ï¼Œå¯ä»¥ç‹¬ç«‹å­¦ä¹ ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤ŸæŒæ¡è¿™ç§å¿«é€Ÿä¸Šçº¿é¡¹ç›®çš„æ–¹æ³•ã€‚ åŒ…æ‹¬ï¼š æœåŠ¡å™¨åˆå§‹åŒ– éƒ¨ç½²è§„åˆ’ å®‰è£…ä¾èµ– åç«¯éƒ¨ç½²ã€‚ç¼–ç¨‹å¯¼èˆªæ•™ç¨‹åˆ†äº«ï¼Œåšæ‚¨ç¼–ç¨‹å­¦ä¹ è·¯ä¸Šçš„å¯¼èˆªå‘˜ã€‚

---
## æœ¬èŠ‚é‡ç‚¹

æœ¬èŠ‚é‡ç‚¹å†…å®¹æ˜¯é¡¹ç›®éƒ¨ç½²ä¸Šçº¿ï¼Œâ å¯ä»¥ç‹¬ç«‹å­¦ä¹ ï¼Œå¸Œæœ›â å¤§å®¶èƒ½å¤ŸæŒæ¡è¿™ç§å¿«é€Ÿä¸Šçº¿é¡¹ç›®çš„æ–¹æ³•ã€‚

åŒ…æ‹¬ï¼š

1.  æœåŠ¡å™¨åˆå§‹åŒ–
2.  éƒ¨ç½²è§„åˆ’
3.  å®‰è£…ä¾èµ–
4.  åç«¯éƒ¨ç½²
5.  å‰ç«¯éƒ¨ç½²
6.  åº”ç”¨éƒ¨ç½²
7.  æµ‹è¯•éªŒè¯
8.  æ‰©å±•çŸ¥è¯†

æœ¬æœŸè§†é¢‘ï¼š[https://www.bilibili.com/video/BV1Kwb6zLEee/](https://www.bilibili.com/video/BV1Kwb6zLEee/)

## ä¸€ã€æœåŠ¡å™¨åˆå§‹åŒ–

é¦–å…ˆè´­ä¹°ä¸€å°æœåŠ¡å™¨ï¼Œå„å¤§äº‘æœåŠ¡å•†çš„æ–°ç”¨æˆ·éƒ½æ¯”è¾ƒä¾¿å®œï¼Œå»ºè®®å…ˆçœ‹ [äº‘äº§å“](https://curl.qcloud.com/ke6zvAHm) é¡µé¢ã€‚

æ¨èé€‰æ‹©è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼Œæä¾›â äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„æ¨¡â æ¿ï¼Œå¸®æˆ‘ä»¬é¢„è£…äº†ç¯å¢ƒå’Œè½¯ä»¶ï¼Œçœæ—¶çœåŠ›ã€‚

é±¼çš®è¿™é‡Œé€‰æ‹©ä¸€å°é¢„è£…äº† `1Panel Linux é¢æ¿` çš„è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼Œé…ç½®ä¸º 2 æ ¸ 2 Gï¼Œéƒ¨ç½²å’±ä»¬çš„é¡¹ç›®è¶³å¤Ÿäº†ã€‚**ä½†æ˜¯ä¸èƒ½ä½äºè¿™ä¸ªé…ç½®ï¼Œå¦åˆ™å¡çˆ†ï¼**

åº”ç”¨æ¨¡æ¿ä¸€èˆ¬é€‰æ‹©æœ€æ–°ç‰ˆæœ¬å°±å¥½äº†ï¼Œå¦‚ä¸‹å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/LTFox8vzWWp8myHW.webp)

[1Panel](https://1panel.cn/) æ˜¯ä¸€ä¸ªç°ä»£åŒ–ã€å¼€æºçš„ Linux æœåŠ¡å™¨è¿ç»´ç®¡ç†é¢æ¿ï¼Œè·Ÿå®å¡” Linux ç±»ä¼¼ã€‚æä¾›å¯è§†åŒ–çš„æœåŠ¡å™¨ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒåº”ç”¨å•†åº—ã€å®¹å™¨ç®¡ç†ã€æ–‡ä»¶ç®¡ç†ã€æ•°æ®åº“ç®¡ç†ç­‰åŠŸèƒ½ï¼Œé€‚åˆä¸­å°å›¢é˜Ÿæˆ–è€…ä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œå‘Šåˆ«ä½¿ç”¨é»‘æ¼†æ¼†çš„å‘½ä»¤è¡Œæ¥æ“ä½œæœåŠ¡å™¨ã€‚

è´­ä¹°å¥½æœåŠ¡å™¨åï¼Œè¿›å…¥æ§åˆ¶å°ï¼Œâ å¯ä»¥çœ‹åˆ°æ–°å¢çš„æœåŠ¡â å™¨ä¿¡æ¯ï¼Œæ³¨æ„ä¸è¦ä¸»åŠ¨å¯¹å¤–æš´éœ²å…¬ç½‘ IPï¼

![](https://pic.code-nav.cn/course_picture/1608440217629360130/rVCSj66x6O8OUuyB.webp)

ç‚¹å‡»æœåŠ¡å™¨è¿›å…¥è¯¦æƒ…é¡µï¼Œåœ¨é˜²ç«å¢™æ ‡ç­¾é¡µâ ä¸­å¯ä»¥çœ‹åˆ°é»˜è®¤å¼€å¯äº† 8â 090 ç«¯å£ï¼Œè¿™æ˜¯ 1Panel é¢æ¿çš„é»˜è®¤ç«¯å£ï¼Œå¦‚æœå…³é—­çš„è¯å°†æ— æ³•è®¿é—®ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/WyHUxnlaichnyqzh.webp)

è¿›å…¥åº”ç”¨ç®¡ç†æ ‡ç­¾é¡µï¼Œç™»å½• 1Panâ el é¢æ¿ã€‚é¦–æ¬¡ç™»å½•æ—¶â ï¼Œéœ€è¦å…ˆç™»å½•æœåŠ¡å™¨ï¼Œé€šè¿‡è¾“å…¥å‘½ä»¤çš„æ–¹å¼è·å–é¢æ¿çš„é»˜è®¤è´¦å·å¯†ç ï¼Œå¦‚å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/tdbyfvspkbCk4Fix.webp)

ç‚¹å‡»ç™»å½•åï¼Œè¿›å…¥åˆ° web â ç»ˆç«¯ï¼Œå¤åˆ¶è„šæœ¬å¹¶æ‰§â è¡Œï¼Œæ ¹æ®æŒ‡ç¤ºæ›´æ–°è‡ªå·±è®¾ç½®çš„å¯†ç ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/zoyUzrO5dwadrym2.webp)

æ ¹æ®ç»ˆç«¯è¾“å‡ºçš„ä¿¡æ¯ï¼Œè®¿é—®é¢æ¿ï¼Œè¾“å…¥åˆå§‹ç”¨æˆ·åå’Œå¯†ç ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/joF1rsUIbKbhV18q.webp)

æˆåŠŸç™»å…¥é¢æ¿ï¼Œè±ç„¶å¼€æœ—ï¼ŒæœåŠ¡å™¨çš„çŠ¶æ€å°½æ”¶çœ¼åº•ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/Ev3XZtHsZ8bm71kT.webp)

å»ºè®®é¦–æ¬¡è¿›å…¥é¢æ¿åï¼Œå…ˆä¿®æ”¹é¢â æ¿çš„é»˜è®¤ç”¨æˆ·åï¼šâ€‚â â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€‰â€‰â€‰â€‚â€‰â€‰â€‰â€‰â€‚â€‚â€‚â€‰â€‚â€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/klEQWLbNJqSqpKEB.webp)

## äºŒã€éƒ¨ç½²è§„åˆ’

åœ¨æ­£å¼æ“ä½œå‰åç«¯éƒ¨ç½²å‰ï¼Œæˆ‘ä»¬â è¦å…ˆè¿›è¡Œä¸€ä¸ªè§„åˆ’ï¼Œâ æ¯”å¦‚è¦éƒ¨ç½²å“ªäº›é¡¹ç›®å’ŒæœåŠ¡ã€éœ€è¦å“ªäº›ä¾èµ–ã€å ç”¨å“ªäº›ç«¯å£ç­‰ã€‚

### 1ã€è·å–æºç 

æœ¬é¡¹ç›®ä»£ç å¼€æºï¼š[https://github.com/liyupi/yu-ai-code-mother](https://github.com/liyupi/yu-ai-code-mother)

åç»­è¿™ä¸ªé¡¹ç›®ä¼šæ”¹é€ ä¸ºå¾®æœåŠ¡ï¼Œâ å»ºè®®æ–°æ‰‹å­¦ä¹ å’Œéƒ¨ç½²â æ ¹ç›®å½•çš„åç«¯é¡¹ç›®ï¼Œä½¿ç”¨ä¼ ç»Ÿçš„åˆ†å±‚æ¶æ„ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/wBAqzOljjkHoZfb9.webp)

### 2ã€éƒ¨ç½²æ–¹æ¡ˆ

ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæœ¬é¡¹ç›®å‰ç«¯å’Œåâ ç«¯å‡ä½¿ç”¨ 1Panâ el é¢æ¿è¿›è¡Œéƒ¨ç½²ã€‚

æ¶‰åŠåˆ°å…·ä½“çš„éƒ¨ç½²æ–¹å¼ï¼š

1ï¼‰å‰ç«¯ï¼šéµå¾ª Vue é¡¹ç›®â çš„éƒ¨ç½²æ¨¡å¼ï¼ŒåŸºäº â Nginx è¿è¡Œ

2ï¼‰åç«¯ï¼šç›´æ¥è¿è¡Œ Jar åŒ…è¿›è¡Œéƒ¨ç½²

\*\*æ³¨æ„ï¼Œå¼ºçƒˆä¸å»ºè®®é€šè¿‡ Docker æ¥éƒ¨ç½²æœ¬é¡¹ç›®çš„åç«¯ï¼\*\*å› ä¸ºæ¶‰åŠåˆ° NPM å‘½ä»¤æ‰§è¡Œã€ä¾èµ–å®‰è£…ã€Selenium è‡ªåŠ¨åŒ–æ“ä½œæµè§ˆå™¨ã€æ–‡ä»¶æŒä¹…åŒ–ç­‰ï¼Œåˆ¶ä½œ Docker çš„æˆæœ¬ä¼šå¾ˆå¤§ï¼Œè€Œä¸”æœ‰å¯èƒ½å‡ºç°å†…å­˜ä¸è¶³ã€‚

æ­¤å¤–ï¼Œè¿™ä¸ªé¡¹ç›®è¿˜æ¶‰åŠåˆ°éƒ¨ç½² â AI ç”Ÿæˆçš„åº”ç”¨ï¼Œâ éœ€è¦åˆ©ç”¨ Nginx é…ç½®è¿›è¡Œä»£ç†ã€‚

___

ğŸ’¡ é±¼çš®åœ¨ [ç¼–ç¨‹å¯¼èˆª](https://codefather.cn/) å¸¦å¤§å®¶åšè¿‡åå‡ å¥—é¡¹ç›®äº†ï¼Œå‡ ä¹æ¯ç§éƒ¨ç½²æ–¹å¼éƒ½ç»™å¤§å®¶è®²è§£è¿‡ï¼š

-   [ä»£ç ç”Ÿæˆå™¨å…±äº«å¹³å°é¡¹ç›®](https://www.codefather.cn/course/1790980795074654209)ï¼šå®å¡”é¢æ¿ + Nginx å‰ç«¯ + Java é¡¹ç›®ç®¡ç†å™¨ï¼ˆjar åŒ…ï¼‰åç«¯éƒ¨ç½²
-   [AI ç­”é¢˜åº”ç”¨å¹³å°é¡¹ç›®](https://www.codefather.cn/course/1790274408835506178)ï¼š Vercel å‰ç«¯ + Docker åç«¯ + äº‘æ‰˜ç®¡å¹³å°éƒ¨ç½²
-   [AI è¶…çº§æ™ºèƒ½ä½“é¡¹ç›®](https://www.codefather.cn/course/1915010091721236482)ï¼šDocker å‰ç«¯ + Docker åç«¯ + äº‘æ‰˜ç®¡å¹³å°éƒ¨ç½²
-   [OJ åœ¨çº¿åˆ¤é¢˜é¡¹ç›®](https://www.codefather.cn/course/1790980707917017089)ï¼šDocker Compose åç«¯å¾®æœåŠ¡éƒ¨ç½²

åŸºæœ¬ä¸Šå­¦ä¼šè¿™å‡ ç§éƒ¨ç½²æ–¹å¼ï¼Œèƒ½å¤Ÿåº”å¯¹ç»å¤§å¤šæ•°éƒ¨ç½²éœ€æ±‚äº†ã€‚

### 3ã€åœ°å€è§„åˆ’

å‰ç«¯ï¼šé€šè¿‡ Nginx æä¾›ç½‘ç«™è®¿é—®æœåŠ¡ï¼Œè®¿é—®åœ°å€ä¸º `http://{åŸŸå}`ã€‚

åç«¯ï¼šé€šè¿‡ Nginx è¿›è¡Œè½¬å‘ï¼Œè®¿é—®åœ°å€ä¸º `http://{åŸŸå}/api`ï¼Œå®é™…è¿è¡Œåœ¨ 8123 ç«¯å£

AI ç”Ÿæˆçš„åº”ç”¨ï¼šé€šè¿‡ Nginx æä¾›ç½‘ç«™è®¿é—®æœåŠ¡ï¼Œæ ¹æ®è¯·æ±‚åœ°å€è½¬å‘åˆ°ä¸åŒçš„åº”ç”¨ï¼Œè®¿é—®åœ°å€ä¸º `http://{åŸŸå}/dist`ï¼ˆå¦‚æœä½ æœ‰å¤šä¸ªåŸŸåçš„è¯ï¼Œé‚£å°±ä¸éœ€è¦å­è·¯å¾„æ¥æ˜ å°„ï¼‰

ğŸ’¡ æ³¨æ„ï¼Œä½¿ç”¨ Nginx è½¬å‘æ˜¯ä¸ºäº†è®©å‰ç«¯å’Œâ åç«¯åŸŸåä¸€è‡´ï¼Œä¿è¯ä¸ä¼šå‡ºç°è·¨åŸŸâ é—®é¢˜ã€‚æ­¤å¤–ï¼Œæœ¬é¡¹ç›®çš„å¯è§†åŒ–ä¿®æ”¹èƒ½åŠ›è¦æ±‚ç”Ÿæˆçš„ç½‘ç«™å’Œå‰ç«¯ç½‘ç«™åŒæºï¼Œä¹Ÿé€šè¿‡ Nginx æ»¡è¶³äº†ã€‚

### 4ã€ç«¯å£è§„åˆ’

ç­‰ä¸‹æˆ‘ä»¬ä¼šä¾æ¬¡å®‰è£…ä¾èµ–ï¼Œç«¯å£å ç”¨æƒ…å†µå¦‚ä¸‹ï¼š



|ç»„ä»¶|ç«¯å£|ä½œç”¨|
|---|---|---|
|Nginx|80|WebæœåŠ¡å™¨ï¼Œå¤„ç† HTTP è¯·æ±‚å’Œåå‘ä»£ç†|
|æ•°æ®åº“|3306|æ•°æ®å­˜å‚¨â ï¼Œç®¡ç†åº”ç”¨çš„æŒä¹…åŒ–æ•°æ®â |
|Redis|6379|ç¼“å­˜æœåŠ¡ï¼Œæä¾›é«˜æ€§èƒ½çš„å†…å­˜æ•°æ®å­˜å‚¨|

éœ€è¦åœ¨æœåŠ¡å™¨æ§åˆ¶å°çš„é˜²ç«å¢™ä¸­â å¼€é€šéœ€è¦å¤–ç½‘è®¿é—®çš„â æœåŠ¡ç«¯å£ï¼Œæ¯”å¦‚ MySQL å’Œ Redisï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/ShGNdqg3o58bdIgV.webp)

## ä¸‰ã€å®‰è£…ä¾èµ–

### 1ã€Nginx

è¿›å…¥ `ç½‘ç«™` æ¿å—ï¼Œé¢æ¿ä¼šæé†’æˆ‘ä»¬å®‰è£… OpenRestyï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/wcqswE2xwgIQw6tf.webp)

OpenResty æ˜¯ä¸€ä¸ªåŸºäº Ngâ inx ä¸ Lua é›†æˆâ çš„é«˜æ€§èƒ½ Web å¹³å°ï¼Œå¯ç”¨äºå¿«é€Ÿå¼€å‘é«˜å¹¶å‘ã€å¯æ‰©å±•çš„ Web åº”ç”¨ã€ç½‘å…³ç­‰ã€‚

ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯å¯¹ Nginxâ  çš„å¢å¼ºï¼Œä¸ºäº†ä¾¿äºâ ç†è§£ï¼Œåé¢æˆ‘ä»¬ç»Ÿä¸€ç§°ä¸º Nginxã€‚

å®‰è£… OpenRestyï¼Œä½¿ç”¨é»˜è®¤é…ç½®å³å¯ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/gXv6TOikAU9YuCWL.webp)

å®‰è£…ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å…¶å®é¢æ¿æ˜¯é€šè¿‡å®¹å™¨æ¥è¿è¡Œåº”ç”¨çš„ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/XV2F19iNaXh5ACLi.webp)

è¿›å…¥åˆ° `ç½‘ç«™` æ¿å—ï¼Œçœ‹åˆ° OpenResty æˆåŠŸè¿è¡Œï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/QJvqVPUetjkkPV1j.webp)

è®¿é—®æœåŠ¡å™¨åœ°å€ï¼Œèƒ½çœ‹åˆ° Nginx å­—æ ·å°±è¡¨ç¤ºå®‰è£…æˆåŠŸï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/PMYrTItvrb92p7FC.webp)

### 2ã€MySQL

è¿›å…¥ `æ•°æ®åº“` æ¿å—å»å®‰è£…ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/UWPUhzjFzdASso8h.webp)

å®‰è£…æ—¶é€‰æ‹© 8.x ç‰ˆæœ¬ã€ä¿®â æ”¹ Root å¯†ç â ã€å¼€å¯ç«¯å£å¤–éƒ¨è®¿é—®ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/ZIC8eXNfi01PVqRX.webp)

å®‰è£…å®Œæˆåï¼Œå¯ä»¥çœ‹åˆ° MySQL å·²å¯åŠ¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/SRE6vUJroGFSfKJa.webp)

å…ˆä¸ºåç«¯é¡¹ç›®åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ã€‚æ•°æ®åº“åç§°å’Œæˆ‘ä»¬é¡¹ç›®éœ€è¦çš„æ•°æ®åº“åç§°ä¿æŒä¸€è‡´ï¼ˆæ­¤å¤„ä¸º `yu_ai_code_mother`ï¼‰ï¼Œæ³¨æ„ç”¨æˆ·åã€å¯†ç å’Œè®¿é—®æƒé™ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/7ROTghl3a7LDPEWj.webp)

åˆ›å»ºæˆåŠŸï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®åº“çš„ä¿¡æ¯ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/S2H3yS3aO8Oim8Vn.webp)

å°è¯•åˆ©ç”¨æ•°æ®åº“ç®¡ç†è½¯ä»¶è¿æ¥æ•°æ®â åº“ã€‚æ¯”å¦‚åœ¨ IDâ EA ä¸­æ‰“å¼€åç«¯é¡¹ç›®ï¼Œé€šè¿‡æ•°æ®åº“é¢æ¿åœ¨æœ¬åœ°æ£€æŸ¥è¿æ¥æ˜¯å¦æ­£å¸¸ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/i4FwYHFT14s490sc.webp)

æ‰§è¡Œé±¼çš®æä¾›çš„ SQL è„šæœ¬ï¼Œåˆå§‹åŒ–åº“è¡¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/hMzR28DhMpjq5JKa.webp)

è®°å¾—éªŒè¯æ•°æ®åº“è¡¨æ˜¯å¦åˆ›å»ºæˆåŠŸï¼Œå¦‚å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/tIBRJXya3hLmkcA7.webp)

### 3ã€Redis

è¿›å…¥ `æ•°æ®åº“` é¢æ¿çš„ Redis æ ‡ç­¾é¡µï¼Œå®‰è£… Redisï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/HlLmbI77Aw9WBzCn.webp)

ç‰ˆæœ¬é€‰æ‹©é»˜è®¤çš„å³å¯ï¼Œéœ€è¦é…ç½®å¯†â ç ã€å¼€å¯è¿œç¨‹è®¿é—®ï¼šâ€‚â â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€‰â€‰â€‰â€‚â€‰â€‰â€‰â€‰â€‚â€‚â€‚â€‰â€‚â€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/0KTp53SYZAgSkxf8.webp)

å®‰è£…å®Œæˆï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/j1xppmZlQ0FbQZZy.webp)

æœ€åï¼Œåœ¨ IDEA æ•°æ®åº“é¢æ¿ä¸­éªŒè¯â æœ¬åœ°èƒ½å¦è¿æ¥è¿œç¨‹ Redâ isï¼šâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‰â€‰â€‰â€‰â€‚â€‰â€‰â€‰â€‰â€‚â€‚â€‚â€‰â€‚â€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/UtNxhgsPUuNNVol2.webp)

æ³¨æ„ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰è®¾ç½® Redis çš„ç”¨æˆ·åï¼Œä½†æ˜¯åˆè®¾ç½®äº† Redis çš„å¯†ç ï¼Œæ‰€ä»¥è¦ä¿®æ”¹åç«¯ä»£ç ä¸­ Redis å¯¹è¯è®°å¿†å­˜å‚¨çš„é…ç½® `RedisChatMemoryStoreConfig`ï¼ŒæŒ‡å®šé»˜è®¤ç”¨æˆ·åï¼š

```java
@Bean
public RedisChatMemoryStore redisChatMemoryStore() {
    RedisChatMemoryStore.Builder builder = RedisChatMemoryStore.builder()
            .host(host)
            .port(port)
            .password(password)
            .ttl(ttl);
    if (StrUtil.isNotBlank(password)) {
        builder.user("default");
    }
    return builder.build();
}
```

### 4ã€Java ç¯å¢ƒ

JDK æ˜¯è¿è¡Œåç«¯é¡¹ç›®çš„åŸºç¡€ã€‚

è™½ç„¶ 1Panel ä¹Ÿæä¾›äº†å¯è§†åŒ–é…ç½® Java è¿â è¡Œç¯å¢ƒçš„æ–¹å¼ï¼Œä½†æ˜¯è·Ÿåº”ç”¨æ˜¯å¼ºç»‘å®šçš„â ï¼Œå°è£…åœ¨å®¹å™¨å†…ï¼Œè€Œæˆ‘ä»¬éœ€è¦åç«¯é¡¹ç›®èƒ½è°ƒç”¨ç»ˆç«¯æ‰§è¡Œ NPM å‘½ä»¤å’Œåº”ç”¨æˆªå›¾ç­‰æ“ä½œï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/iPJ9cpjxgl1MWOe9.webp)

å¯ä»¥åˆ©ç”¨ [SDKMAN](https://sdkman.io/) å¿«é€Ÿå®‰è£…å’Œç®¡ç† JDK ç­‰ä¾èµ–ã€‚

SDKMAN éœ€è¦ç”¨åˆ°å‹ç¼©å’Œâ è§£å‹ç¼©å‘½ä»¤ï¼Œå› æ­¤éœ€â è¦å…ˆè¿›å…¥ç»ˆç«¯å®‰è£…è¿™äº›å‘½ä»¤ï¼š

```shell
sudo apt install zip unzip -y
```

![](https://pic.code-nav.cn/course_picture/1608440217629360130/zuwzcSwFe3bEuVT8.webp)

ç„¶åæ‰§è¡Œå‘½ä»¤æ¥å®‰è£… SDKMANï¼š

```shell
curl -s "https://get.sdkman.io" | bash
```

å®‰è£…åï¼ŒæŸ¥çœ‹å¯ç”¨çš„ Java ç‰ˆæœ¬ï¼š

```shell
sdk list java
```

å¦‚å›¾ï¼Œä¸€å®šè¦é€‰æ‹© JDK 21ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/hf8hEnOMS4BaziFQ.webp)

æ¥ä¸‹æ¥å®‰è£… JDK 21 å¹¶è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬ï¼š

```shell
# å®‰è£…
sdk install java 21.0.8-amzn
# è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬
sdk default java 21.0.8-amzn
```

å®‰è£…æˆåŠŸï¼Œå¯ä»¥è¾“å…¥ `java -version` å‘½ä»¤éªŒè¯ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/PCxYqWlO9S0Zva7o.webp)

ã€å¯é€‰ã€‘å¦‚æœä½ å¸Œæœ›åœ¨æœåŠ¡å™¨ä¸Šâ æ‹‰å–åç«¯æºç å¹¶æ‰“åŒ…â ï¼Œè¿˜éœ€è¦å®‰è£… Maven ä¾èµ–ç®¡ç†å·¥å…·ï¼š

```shell
# åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ Maven ç‰ˆæœ¬
sdk list maven

# å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Maven
sdk install maven

# å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Maven
sdk install maven 3.9.10

# è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬
sdk default maven 3.9.10
```

### 5ã€Node.js ç¯å¢ƒ

æœ¬é¡¹ç›®çš„ä¸šåŠ¡ä¸­ï¼Œç”Ÿæˆ Vue å·¥ç¨‹é¡¹ç›®æ—¶éœ€è¦æ‰“åŒ…æ„å»ºã€AI å·¥ä½œæµç”Ÿæˆæ¶æ„å›¾æ—¶ä¹Ÿéœ€è¦ç”¨åˆ° Mermaid CLI ç­‰ï¼Œè¿™äº›éƒ½ä¾èµ– Node.js ç¯å¢ƒå’Œ NPM åŒ…ç®¡ç†å·¥å…·ã€‚

è™½ç„¶é¢æ¿æä¾›äº† Node.js è¿è¡Œç¯å¢ƒï¼Œä½†æ˜¯è·Ÿé¢æ¿ä¸Šçš„åº”ç”¨æ˜¯å¼ºç»‘å®šçš„ï¼Œå°è£…åœ¨å®¹å™¨å†…ï¼Œè€Œæˆ‘ä»¬éœ€è¦åç«¯é¡¹ç›®èƒ½è°ƒç”¨ç»ˆç«¯æ‰§è¡Œ NPM å‘½ä»¤ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/70qkCvb5WQJTEex4.webp)

ç›´æ¥å» [Node.js å®˜ç½‘](https://nodejs.org/zh-cn/download) å®‰è£…ï¼Œé€‰æ‹© Linux ç³»ç»Ÿï¼Œä¼šçœ‹åˆ°ä¸€å †å‘½ä»¤ï¼Œä½œç”¨æ˜¯å®‰è£… nvm è¿™æ ·ä¸€ä¸ª Node.js ç®¡ç†å™¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/ocRQW2L1c6dhJpB2.webp)

å¤åˆ¶å‘½ä»¤åˆ°ç»ˆç«¯æ‰§è¡Œï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/SBDLOK15Gb4q4m2U.webp)

æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/LFKBlLDR15uj4Mj4.webp)

ã€å¯é€‰ã€‘ä¸ºäº†æ›´å¿«ä¸‹è½½ NPM ä¾èµ–ï¼Œå¯ä»¥è®¾ç½®åŠ é€Ÿé•œåƒæºï¼š

```shell
# æŸ¥çœ‹å½“å‰é•œåƒæº
npm config get registry
# è®¾ç½®åŠ é€Ÿé•œåƒæº
npm config set registry https://registry.npmmirror.com
```

ã€å¯é€‰ã€‘å¦‚æœä½ éœ€è¦å°†æ•™ç¨‹ä¸­çš„â  AI æ™ºèƒ½ä½“å·¥ä½œâ æµæ•´åˆåˆ°ä¸šåŠ¡ä¸­ï¼Œè¿˜éœ€è¦å…¨å±€å®‰è£… Mermaid å›¾ç‰‡ç”Ÿæˆå·¥å…·ï¼š

```shell
npm install -g @mermaid-js/mermaid-cli
```

### 6ã€Chrome æµè§ˆå™¨

ç”±äºæœ¬é¡¹ç›®åŒ…å« Seleniâ um ç½‘é¡µæˆªå›¾åŠŸèƒ½â ï¼Œéœ€è¦å®‰è£…ä¸€ä¸ªæµè§ˆå™¨ï¼Œé¦–æ¨ Chromeã€‚

æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯å®‰è£…ï¼š

```shell
curl -fsSL https://dl.google.com/linux/linux_signing_key.pub | sudo gpg --dearmor -o /usr/share/keyrings/google-chrome.gpg && echo "deb [arch=amd64 signed-by=/usr/share/keyrings/google-chrome.gpg] http://dl.google.com/linux/chrome/deb/ stable main" | sudo tee /etc/apt/sources.list.d/google-chrome.list && sudo apt update && sudo apt install -y google-chrome-stable
```

æ‰§è¡Œå‘½ä»¤æ£€æŸ¥ Chrome æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```shell
google-chrome -version
```

![](https://pic.code-nav.cn/course_picture/1608440217629360130/hP5QxTbYWfsJZD9y.png)

è¿˜è¦å®‰è£…ä¸­æ–‡å­—ä½“ï¼Œå¦åˆ™ç½‘é¡µæ— â æ³•æ˜¾ç¤ºä¸­æ–‡ï¼ˆè¿™é‡Œæˆ‘â è®© AI å¸®æˆ‘éšä¾¿é€‰äº†ï¼Œä¹Ÿå¯ä»¥å®‰è£…åˆ«çš„ï¼‰ï¼š

```shell
sudo apt install -y fonts-wqy-zenhei fonts-noto-cjk && sudo fc-cache -fv
```

### 7ã€å…¶ä»–æœåŠ¡

é¡¹ç›®è¿˜ç”¨åˆ°äº†ä¸€äº›ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œæ¯”å¦‚ [è…¾è®¯äº‘ COS å¯¹è±¡å­˜å‚¨](https://console.cloud.tencent.com/cos/bucket)ã€[DeepSeek API](https://api-docs.deepseek.com/zh-cn/)ã€[é˜¿é‡Œäº‘ç™¾ç‚¼ API](https://click.aliyun.com/m/1000400408/)ï¼Œå¯ä»¥å»å¯¹åº”çš„å®˜ç½‘å¼€é€šã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/Vq5QAmCLCghtQgZV.webp)

æ³¨æ„ï¼Œæœ€å¥½ç»™å¯¹è±¡å­˜å‚¨å¢åŠ éƒ¨ç½²å‰ç«¯çš„â æœåŠ¡å™¨ IPï¼ˆæˆ–è€…å®é™…â è®¿é—®çš„å‰ç«¯åŸŸåï¼‰çš„è·¨åŸŸé…ç½®ï¼Œå¦åˆ™æœ‰äº›åœºæ™¯ä¸‹å¯èƒ½æ— æ³•æ­£ç¡®è®¿é—®å›¾ç‰‡ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/AzDsKMybsXBV51Hw.webp)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¾æ¬¡è¿›è¡Œåç«¯å’Œå‰ç«¯éƒ¨ç½²ã€‚

## å››ã€åç«¯éƒ¨ç½²

### 1ã€ç¼–å†™ç”Ÿäº§ç¯å¢ƒé…ç½®

ä¿®æ”¹ `application-prod` ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€Redisã€å¯¹è±¡å­˜å‚¨ã€å„ç§å¤§æ¨¡å‹çš„ API Key ç­‰ï¼Œæ›¿æ¢ä¸ºä¸Šè¿°å®‰è£…ä¾èµ–æ—¶æŒ‡å®šçš„é…ç½®ï¼ˆå¦‚ç”¨æˆ·åã€å¯†ç ï¼‰ã€‚

æ³¨æ„ï¼Œä¸ºäº†æ€§èƒ½å’Œå®‰å…¨ï¼Œæœ€å¥½å…³é—­ MyBaâ tis Flex çš„æ—¥å¿—ã€â ä»¥åŠ AI ç›¸å…³çš„æ—¥å¿—ï¼Œè¿˜è¦ç»™ Knife4j æ¥å£æ–‡æ¡£è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ã€‚

å‚è€ƒé…ç½®å¦‚ä¸‹ï¼š

```yaml
# çº¿ä¸Šé…ç½®æ–‡ä»¶
# @author <a href="https://github.com/liyupi">ç¨‹åºå‘˜é±¼çš®</a>
# @from <a href="https://codefather.cn">ç¼–ç¨‹å¯¼èˆª</a>
spring:
  # mysql
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://110.42.141.105:3306/yu_ai_code_mother
    username: yu_ai_code_mother_user
    password: 12345678
  # redis
  data:
    redis:
      host: 110.42.141.105
      port: 6379
      database: 0
      password: 12345678
      ttl: 3600
# AI
langchain4j:
  open-ai:
    chat-model:
      base-url: https://api.deepseek.com
      api-key: <your-api-key>
      model-name: deepseek-chat
      max-tokens: 8192
      log-requests: false
      log-responses: false
    streaming-chat-model:
      base-url: https://api.deepseek.com
      api-key: <your-api-key>
      model-name: deepseek-chat
      max-tokens: 8192
      log-requests: false
      log-responses: false
    # æ¨ç† AI æ¨¡å‹é…ç½®ï¼ˆç”¨äºå¤æ‚çš„æ¨ç†ä»»åŠ¡ï¼‰
    reasoning-streaming-chat-model:
      base-url: https://api.deepseek.com
      api-key: <your-api-key>
      model-name: deepseek-chat
      max-tokens: 8192
      temperature: 0.1
      log-requests: false
      log-responses: false
    # æ™ºèƒ½è·¯ç”± AI æ¨¡å‹é…ç½®
    routing-chat-model:
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      api-key: <your-api-key>
      model-name: qwen-turbo
      max-tokens: 100
      log-requests: false
      log-responses: false
# æ·»åŠ  COS å¯¹è±¡å­˜å‚¨é…ç½®ï¼ˆéœ€è¦ä»è…¾è®¯äº‘è·å–ï¼‰
cos:
  client:
    host: <your-custom-domain.com>
    secretId: <your-secret-id>
    secretKey: <your-secret-key>
    region: <your-region>
    bucket: <your-bucket-name>
# é˜¿é‡Œäº‘ DashScope é…ç½®
dashscope:
  api-key: <your-api-key>
  image-model: wan2.2-t2i-flash
# Pexels å›¾ç‰‡æœç´¢é…ç½®
pexels:
  api-key: <your-api-key>
# ç”Ÿäº§ç¯å¢ƒå…³é—­æ—¥å¿—
mybatis-flex:
  configuration:
    log-impl: ''
# æ¥å£æ–‡æ¡£é…ç½®
knife4j:
  basic:
    enable: true
    username: root
    password: 123456
# éƒ¨ç½²è·¯å¾„
code:
  deploy-host: http://110.42.141.105/dist
```

ğŸ’¡ å»ºè®®æŠŠè¿™ä¸ªé…ç½®æ–‡ä»¶æ·»åŠ åˆ° `.gitignore` ä¸­ï¼Œåˆ«ä¸å°å¿ƒå¼€æºå‡ºæ¥äº†ã€‚

ä¹‹å‰æˆ‘ä»¬çš„è€ç‰ˆæœ¬é¡¹ç›®ä¸­ï¼Œéƒ¨ç½²è·¯å¾„æ˜¯â é€šè¿‡å¸¸é‡æŒ‡å®šçš„ï¼Œç°åœ¨éœ€â è¦ä¿®æ”¹ä¸ºè¯»å–é…ç½®æ–‡ä»¶è·å–ã€‚ä¿®æ”¹ AppServiceImpl çš„ä»£ç ï¼š

```java
@Value("${code.deploy-host:http://localhost}")
private String deployHost;

// 10. æ„å»ºåº”ç”¨è®¿é—® URL
String appDeployUrl = String.format("%s/%s/", deployHost, deployKey);
```

### 2ã€æ‰“åŒ…è¿è¡Œ

é¦–å…ˆæ›´æ”¹ `pom.xml` æ–‡ä»¶çš„æ‰“åŒ…é…ç½®ï¼Œåˆ é™¤æ‰ maven æ’ä»¶é…ç½®çš„ `excludes` å—ï¼š

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <configuration>
                <excludes>
                    <exclude>
                        <groupId>org.projectlombok</groupId>
                        <artifactId>lombok</artifactId>
                        <version>1.18.38</version>
                    </exclude>
                </excludes>
            </configuration>
        </plugin>
    </plugins>
</build>
```

å¦åˆ™å¯èƒ½æ‰“åŒ…æ—¶ä¼šé‡åˆ°è¿™ä¸ªæŠ¥é”™ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/dm60BGANiGpA4z50.webp)

åœ¨ IDEA ä¸­æ‰“å¼€åç«¯é¡¹ç›®ï¼Œå¿½ç•¥æµ‹è¯•å¹¶æ‰“åŒ…ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/9LWD7oT1ujWEzMWc.webp)

æ‰“åŒ…æˆåŠŸï¼Œå¾—åˆ° jar åŒ…æ–‡ä»¶ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/HvdTUe34mWHFtvfP.webp)

å»ºè®®å…ˆåœ¨æœ¬åœ°ç»ˆç«¯è¾“å…¥å‘½ä»¤ä»¥ â prod æ¨¡å¼è¿è¡Œâ  jar åŒ…ï¼Œçœ‹çœ‹é¡¹ç›®èƒ½å¦æ­£å¸¸å¯åŠ¨ï¼š

```shell
java -jar yu-ai-code-mother-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod
```

å‘ç°é¡¹ç›®å¯ä»¥æ­£å¸¸è¿è¡Œã€å„ä¸ªåŠŸèƒ½ä¹Ÿéƒ½æ­£å¸¸ï¼Œå†è¿›è¡Œåç»­æ“ä½œï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/qwSyb81ybYj0bDeF.webp)

### 3ã€éƒ¨ç½²åˆ°æœåŠ¡å™¨

å°†æ‰“å¥½çš„ jar åŒ…é€šè¿‡é¢æ¿ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æŒ‡å®šç›®å½•ä¸‹ï¼Œæˆ‘è¿™é‡Œæ˜¯ `/project/yu-ai-code-mother-backend`ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/nhyUKJ0liUZRLNUv.webp)

ğŸ’¡ å½“ç„¶ä¹Ÿå¯ä»¥å°†ä»£ç ä¸Šä¼ åˆ° GitHub ä¸Šï¼Œç„¶åç”¨ `git clone` å‘½ä»¤ä¸‹è½½ä»£ç ï¼Œå†æ‰§è¡Œ Maven æ‰“åŒ…ã€‚

æ¥ä¸‹æ¥è¿›å…¥ jar åŒ…æ‰€åœ¨ç›®å½• `/project/yu-ai-code-mother-backend` çš„ç»ˆç«¯ï¼Œå…ˆåœ¨å‰å°è¿è¡Œ jar åŒ…ï¼š

```bash
java -jar yu-ai-code-mother-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod
```

æŸ¥çœ‹è¾“å‡ºä¿¡æ¯ï¼Œç¡®å®šé¡¹ç›®å¯åŠ¨æˆåŠŸï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/cEZg9tWdwR57Bgkw.webp)

ç„¶ååœ¨åå°è¿è¡Œ jar åŒ…ï¼Œè¿™æ ·ç»ˆç«¯å…³é—­åé¡¹ç›®ä¾ç„¶ä¼šè¿è¡Œï¼š

```bash
nohup java -jar yu-ai-code-mother-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod > app.log 2>&1 &
```

å¯ä»¥åœ¨ jar åŒ…ç›¸åŒç›®å½•ä¸‹çœ‹åˆ°æ—¥å¿—æ–‡ä»¶ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/lg42kZyj4ZGznIOv.webp)

### 4ã€Nginx é…ç½®

#### åç«¯è½¬å‘é…ç½®

æˆ‘ä»¬çš„é¢„æœŸæ˜¯ï¼šå¦‚æœè®¿é—®çš„æ˜¯åç«¯æ¥å£ï¼ˆåœ°å€æœ‰ `/api` å‰ç¼€ï¼‰ï¼Œåˆ™ Nginx å°†è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡ã€‚

å…ˆåˆ›å»ºä¸€ä¸ªç½‘ç«™ï¼ˆç›¸å½“äºæ–°å»º Nginx ç«™ç‚¹ï¼‰ï¼Œé€‰æ‹© `åå‘ä»£ç†` ç±»å‹ï¼ŒåŸŸåå¡«å†™å½“å‰æœåŠ¡å™¨ IP æˆ–è€…è‡ªå·±çš„åŸŸåï¼Œä»£å·æœ€å¥½ç”¨é¡¹ç›®åç§°ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/DFUwTB4F5WevyrqD.webp)

åˆ›å»ºå¥½ç½‘ç«™åï¼Œç‚¹å‡»é…ç½®ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/wAVVqM1oIAmKyrOz.webp)

ç¼–è¾‘åå‘ä»£ç†çš„é…ç½®ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/P3CQzlmh8lgzLG77.webp)

ä¿®æ”¹åå‘ä»£ç†çš„å‰ç«¯è¯·æ±‚è·¯å¾„ä¸º `/api`ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/3eEZGpl4PpH4gNkO.webp)

ä¿®æ”¹åçš„é…ç½®å¦‚å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/1sUyoL6i8xCYaHIk.webp)

ğŸ’¡ å¦‚æœä¸ç”¨é¢æ¿ï¼Œè€Œæ˜¯è‡ªå·±â éƒ¨ç½² Nginxï¼Œâ éœ€è¦æ‰‹åŠ¨ä¿®æ”¹é…ç½®ï¼š

```nginx
location /api {
  proxy_pass  http://127.0.0.1:8123;
  proxy_set_header Host $proxy_host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_buffering off;
  proxy_set_header Connection "";
}
```

#### SSE é…ç½®

æˆ‘ä»¬ä¸ºäº†é˜²æ­¢ AI ç”Ÿæˆçš„ â SSE è¯·æ±‚è¶…æ—¶ï¼Œâ éœ€è¦ä¿®æ”¹åå‘ä»£ç†é…ç½®ã€‚

ç”±äº Nginx æ˜¯é€šè¿‡å®¹å™¨éƒ¨ç½²ï¼Œéœ€è¦æ‰¾åˆ°å®¹å™¨å†… `/www` å¯¹åº”æŒ‚è½½çš„æœåŠ¡å™¨ç›®å½•ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/8TBzwDsSHKyVCiMb.webp)

æ‰¾åˆ°å®é™…çš„åå‘ä»£ç†é…ç½®æ–‡ä»¶ï¼ŒåŠ ä¸Šä¸€è¡Œé…ç½®ï¼š

```nginx
proxy_read_timeout 900s; # è¯»å–è¶…æ—¶å»¶é•¿ï¼Œé¿å…é•¿è¿æ¥è¢«ä¸­æ–­
```

![](https://pic.code-nav.cn/course_picture/1608440217629360130/j8OHCQXudbUpSszs.webp)

ç°åœ¨å°±èƒ½å¤Ÿç›´æ¥é€šè¿‡ 80 ç«¯å£ï¼ˆå¯çœç•¥ï¼‰æ­£å¸¸è®¿é—®åç«¯æ¥å£æ–‡æ¡£ï¼š[http://{ä½ çš„æœåŠ¡å™¨ IP}/api/doc.html](http://110.42.141.105/api/doc.html)

![](https://pic.code-nav.cn/course_picture/1608440217629360130/6hhpf8gKGeXzcEqf.webp)

è¾“å…¥å¯†ç åå°±çœ‹åˆ°æ¥å£æ–‡æ¡£äº†ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/nlKc9QRaJwf4L4Os.webp)

## äº”ã€å‰ç«¯éƒ¨ç½²

å‰ç«¯éƒ¨ç½²å¯ä»¥å‚è€ƒ [Vite å®˜æ–¹æ–‡æ¡£](https://cn.vitejs.dev/guide/static-deploy.html)ï¼Œåˆ†ä¸ºç¼–å†™ç”Ÿäº§ç¯å¢ƒé…ç½®ã€æ‰“åŒ…æ„å»ºã€éƒ¨ç½²å’Œ Nginx é…ç½®è¿™ 4 ä¸ªæ­¥éª¤ã€‚

### 1ã€ç¼–å†™ç”Ÿäº§ç¯å¢ƒé…ç½®

æ–°å»º `.env.production` æ–‡ä»¶ï¼Œç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè¿™æ ·å‰ç«¯åŸŸåã€è¯·æ±‚åŸŸåå’Œç”Ÿæˆç½‘ç«™çš„éƒ¨ç½²åŸŸåéƒ½ä¿æŒä¸€è‡´ï¼Œè§£å†³è·¨åŸŸå’ŒåŒæºé—®é¢˜ã€‚

```java
VITE_DEPLOY_DOMAIN=/dist

VITE_API_BASE_URL=/api
```

### 2ã€æ‰“åŒ…æ„å»º

ç›´æ¥æ‰§è¡Œå‰ç«¯é¡¹ç›® `package.json` æ–‡ä»¶ä¸­çš„ `build` å‘½ä»¤ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/cjN9aaBEH1v473Ak.webp)

æ„å»ºæˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ° dist ç›®å½•ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/H1nfRgcs3ERYzHEB.webp)

#### æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

å¸¸è§çš„æ„å»ºå¤±è´¥åŸå› æ˜¯ç±»å‹æ ¡éªŒé”™è¯¯ï¼Œå¦‚å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/QkR7piEeoJhs67OO.webp)

è¿™æ˜¯ç”±äºè„šæ‰‹æ¶å†…ç½®çš„ `build` å‘½ä»¤ä¼šæ‰§è¡Œç±»å‹æ£€æŸ¥ï¼Œå¦‚æœé¡¹ç›®ä»£ç ä¸­æœ‰ä»»ä½•ç±»å‹ä¸è§„èŒƒçš„åœ°æ–¹ï¼Œéƒ½ä¼šå¯¼è‡´æ‰“åŒ…å¤±è´¥ï¼

è™½ç„¶å¯ä»¥è‡ªå·±ä¸€ä¸ªä¸ªä¿®å¤ç±»å‹ï¼Œä½†æ˜¯å¤ªå½±å“æ•ˆç‡äº†ï¼Œå¾—ä¸å¿å¤±ï¼Œæ‰€ä»¥å¼•å…¥ä¸€ä¸ª **ä¸æ‰§è¡Œç±»å‹æ£€æŸ¥** çš„æ„å»ºå‘½ä»¤ã€‚

åœ¨ `package.json` æ–‡ä»¶ä¸­å®šä¹‰ `pure-build` å‘½ä»¤ï¼š

```json
{
  "scripts": {
    "dev": "vite",
    "pure-build": "vite build",
    "build": "run-p type-check \"build-only {@}\" --",
  }
}
```

ç„¶åæ‰§è¡Œ `pure-build` å‘½ä»¤ï¼Œæ‰§è¡Œæ‰“åŒ…æ„å»ºå³å¯ã€‚

æ³¨æ„ï¼Œå¦‚æœ Node.js ç‰ˆæœ¬è¾ƒä½ï¼Œä¹Ÿå¯èƒ½ä¼šæ„å»ºå¤±è´¥ï¼Œè¿™æ—¶å¯ä»¥åˆ° [å®˜ç½‘](https://nodejs.org/zh-cn) å®‰è£…æ›´æ–°çš„ç‰ˆæœ¬ï¼Œæœ€å¥½ >= 20 ç‰ˆæœ¬ã€‚

### 3ã€éƒ¨ç½²åˆ°æœåŠ¡å™¨

ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·æ— æ³•ç›´æ¥è®¿é—®æœâ åŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œéœ€è¦â ä½¿ç”¨ Nginx æä¾›é™æ€æ–‡ä»¶çš„è®¿é—®èƒ½åŠ›ã€‚

æŠŠ dist ç›®å½•å†…çš„æ‰€æœ‰æ–‡â ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œâ ä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥ä¸Šä¼ åˆ°ä¹‹å‰é…ç½®çš„ç½‘ç«™çš„ root ç›®å½•ä¸‹ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/HsroJSJWMhODlicF.webp)

å¦‚å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/xKmwogWtwNIncYXt.webp)

ä½†æ˜¯ï¼Œå¦‚æœè®¿é—®æœåŠ¡å™¨ï¼Œä½ ä¼šå‘ç°è¿˜æ˜¯é»˜è®¤ç½‘â ç«™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤å¹¶â æ²¡æœ‰ä» 1Panel çš„ç½‘ç«™ç›®å½•åŠ è½½ç½‘ç«™ï¼éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹ Nginx é…ç½®ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/Yu8AxSi34jobpOJy.webp)

### 4ã€Nginx é…ç½®

æŸ¥çœ‹ Nginx é…ç½®æ–‡ä»¶ï¼Œâ æœç„¶ç¼ºå°‘ rootâ  ç½‘ç«™æ ¹ç›®å½•é…ç½®ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/d5edfgOGPkUuUg29.webp)

åŠ ä¸Šä¸€è¡Œé…ç½®å°±å¥½ï¼š

```nginx
# ä¸»å‰ç«¯ç½‘ç«™æ ¹ç›®å½•
root /www/sites/yu-ai-code-mother/index;
```

![](https://pic.code-nav.cn/course_picture/1608440217629360130/gWYTzRFUqtOgQS0B.webp)

ç„¶åè¾“å…¥æœåŠ¡å™¨ IPï¼ˆæˆ–è€…ä½ é…ç½®çš„åŸŸåï¼‰å°±èƒ½è®¿é—®äº†ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/AM6kSLtXrVafP9YI.webp)

ä½†æ˜¯ç»è¿‡éªŒè¯ï¼Œç›®å‰è®¿é—®é™¤äº†ä¸»é¡µå¤–çš„å…¶ä»–é¡µé¢ï¼ˆæ¯”å¦‚ `/user/login`ï¼‰ï¼Œå¦‚æœåˆ·æ–°é¡µé¢ï¼Œå°±ä¼šå‡ºç° 404 é”™è¯¯ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/aUpcfiryE35cWJOR.png)

è¿™ä¸ªé—®é¢˜æ˜¯ç”±äº Vue æ˜¯å•é¡µé¢åº”ç”¨ï¼ˆå‰ç«¯è·¯ç”±ï¼‰ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶åªæœ‰ `index.html`ï¼ŒæœåŠ¡å™¨ä¸Šä¸å­˜åœ¨å¯¹åº”çš„é¡µé¢æ–‡ä»¶ï¼ˆæ¯”å¦‚ `/user/login.html`ï¼‰ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Nginx é…ç½®è®¿é—®è§„åˆ™ã€‚å¦‚æœæ‰¾ä¸åˆ°æŸä¸ªé¡µé¢æ–‡ä»¶ï¼Œå°±åŠ è½½ä¸»é¡µ index.html æ–‡ä»¶ã€‚

ä¿®æ”¹ Nginx é…ç½®ï¼Œè¡¥å……ä¸‹åˆ—ä»£ç ï¼š

```nginx
# å¤„ç†ä¸»ç½‘ç«™çš„è·¯å¾„è®¿é—®ï¼Œé˜²æ­¢å•é¡µé¢åº”ç”¨ 404
location / {
    try_files $uri $uri/ /index.html =404;
}
```

![](https://pic.code-nav.cn/course_picture/1608440217629360130/lvMpfkWhIy6Omf2q.webp)

ä¿å­˜å¹¶é‡è½½é…ç½®åï¼Œå†æ¬¡åˆ·æ–°é¡µé¢ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/RDfJg37jLCdAeK1Q.webp)

## å…­ã€åº”ç”¨éƒ¨ç½²

è¿™ä¸ªé¡¹ç›®æ¯”è¾ƒç‰¹æ®Šï¼Œé™¤äº†å‰åç«¯â éƒ¨ç½²å¤–ï¼Œè¿˜éœ€è¦ä¸º â AI ç”Ÿæˆçš„åº”ç”¨æä¾›éƒ¨ç½²åœ°å€ã€‚

ç”±äºå‰ç«¯æ˜¯é€šè¿‡ Nginx å®¹â å™¨éƒ¨ç½²çš„ï¼Œæœ‰äº›æœåŠ¡å™¨â ä¸Šçš„æ–‡ä»¶è·¯å¾„æ˜¯æ— æ³•ç›´æ¥åœ¨å®¹å™¨å†…è®¿é—®åˆ°çš„ï¼Œé™¤éåˆ©ç”¨å®¹å™¨çš„æŒ‚è½½èƒ½åŠ›ã€‚

å‰é¢ä¹Ÿæåˆ°äº†ï¼ŒNginx çš„ `/www` è·¯å¾„æ˜ å°„åˆ°äº†æœåŠ¡å™¨æœ¬æœºç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ Nginx èƒ½è®¿é—®åˆ° `/opt/1panel/www` è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªçªç ´å£ï¼Œåç«¯åªè¦æŠŠ AI ç”Ÿæˆçš„åº”ç”¨ä¹Ÿå­˜æ”¾åˆ°è¿™ä¸ªè·¯å¾„ä¸‹å°±å¯ä»¥äº†ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/3hmfwmi8kLzFoWdS.webp)

è¿™é‡Œæˆ‘ä»¬çº¦å®šï¼Œåç«¯éœ€è¦ç¡®ä¿åœ¨ `/www/sites/yu-ai-code-mother/tmp` ç›®å½•ä¸‹ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯æŠŠ jar åŒ…ç§»åŠ¨åˆ°è¿™ä¸ª `/www/sites/yu-ai-code-mother` ç›®å½•ä¸‹è¿è¡Œï¼ˆæˆ–è€…é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹åç«¯å†™å…¥æ–‡ä»¶çš„è·¯å¾„ï¼‰ã€‚

ç›´æ¥å¤åˆ¶ jar åŒ…ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/DpJilw2Y2bYERppt.webp)

å…³é—­ä¹‹å‰å·²ç»å¯åŠ¨çš„è¿›ç¨‹ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/zG6oyHL7OjvtAhqw.webp)

æ‰§è¡Œå‘½ä»¤é‡æ–°å¯åŠ¨ jar åŒ…ï¼š

```shell
nohup java -jar yu-ai-code-mother-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod > app.log 2>&1 &
```

ä¿®æ”¹å‰ç«¯çš„ Nginx é…ç½®ï¼Œé…ç½®è¯·æ±‚ `/dist` è·¯å¾„æ—¶åˆ°é¡¹ç›®éƒ¨ç½²æ ¹ç›®å½•å»å¯»æ‰¾ç½‘é¡µæ–‡ä»¶ï¼š

```nginx
# ä¸ºç”Ÿæˆçš„ç½‘ç«™æä¾›éƒ¨ç½²è®¿é—®èƒ½åŠ›
location /dist/ {
    # ç”Ÿæˆçš„ç½‘ç«™éƒ¨ç½²æ ¹ç›®å½•
    alias /www/sites/yu-ai-code-mother/tmp/code_deploy/;
    try_files $uri $uri/ /dist/index.html =404;
}
```

![](https://pic.code-nav.cn/course_picture/1608440217629360130/OYmB4qQdaUFgsqof.webp)

å¯ä»¥åœ¨ `/www/sites/yu-ai-code-mother/tmp/code_deploy/` ç›®å½•ä¸‹è‡ªå·±æ–°å»ºä¸€ä¸ªç½‘ç«™ç›®å½•æ¥æµ‹è¯•èƒ½å¦è®¿é—®ã€‚æ¯”å¦‚ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/fNKF5uqRsaxedO3f.webp)

èƒ½å¤ŸæˆåŠŸè®¿é—®ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/RDbYFdWYn28FmZ4K.webp)

## ä¸ƒã€æµ‹è¯•éªŒè¯

æœ€åï¼Œæˆ‘ä»¬æ¥å¯¹ä¸Šçº¿æ•ˆæœè¿›è¡ŒéªŒè¯ã€‚

1ï¼‰ç”¨æˆ·æ³¨å†Œç™»å½•

![](https://pic.code-nav.cn/course_picture/1608440217629360130/OYuDwT7UZddQBnKz.webp)

ç„¶åé€šè¿‡ä¿®æ”¹æ•°æ®åº“çš„æ–¹å¼ï¼Œå°†â è¯¥ç”¨æˆ·çš„è§’è‰²è®¾ç½®ä¸ºâ ç®¡ç†å‘˜ï¼Œä»è€Œä½¿ç”¨æ›´å¤šåŠŸèƒ½ã€‚

2ï¼‰è¿›å…¥ä¸»é¡µï¼Œå’Œ AI å¯¹è¯æ¥ç”Ÿæˆä¸€ä¸ªç½‘ç«™ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/leywmEJpF7zaSNqs.webp)

3ï¼‰è¿›å…¥å¯¹è¯é¡µé¢ï¼Œå‘ç° AIâ  è‡ªåŠ¨é€‰æ‹©äº†ç”Ÿæˆæ¨¡â å¼ï¼Œå¹¶ä¸”èƒ½å¤Ÿæµå¼è¾“å‡ºä»£ç ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/ju7v706XxPnZGu1J.webp)

4ï¼‰ç½‘ç«™ç”Ÿæˆå®Œåï¼Œå¯ä»¥ç«‹åˆ»çœ‹åˆ°ç”Ÿæˆçš„æ•ˆæœï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/2N9S9IS7aJImESHg.webp)

è¿˜å¯ä»¥æŸ¥çœ‹ç”Ÿæˆçš„åº”ç”¨è¯¦æƒ…ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/BQ9I1lDGODsjDLhn.webp)

5ï¼‰æ”¯æŒä¿®æ”¹å’Œåˆ é™¤è‡ªå·±çš„åº”ç”¨ä¿¡æ¯ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/3NbmY4tBKmnGhxJh.webp)

6ï¼‰å†æ¥ç”Ÿæˆä¸€ä¸ªæ›´å¤æ‚çš„ç½‘ç«™â ï¼Œé€šè¿‡ AI æ™ºèƒ½â è·¯ç”±è§¦å‘ Vue å·¥ç¨‹é¡¹ç›®ç”Ÿæˆæ¨¡å¼ã€‚

å¯ä»¥å®æ—¶çœ‹åˆ°å·¥å…·è°ƒç”¨çš„è¿‡ç¨‹ï¼Œâ å¹¶ä¸”åœ¨å®Œæˆåè‡ªåŠ¨æ„â å»ºï¼Œç„¶åå±•ç¤ºå‡ºç½‘ç«™çš„è¿è¡Œæ•ˆæœï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/wwJa9EGLaA2kw2a7.webp)

7ï¼‰å¯ä»¥è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¯è§†åŒ–ä¿®æ”¹ç½‘ç«™çš„å†…å®¹ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/fWMlzxXDjO20sLIj.webp)

å¾ˆå¿«å°±ä¿®æ”¹å®Œæˆäº†ï¼Œæ•ˆæœå¦‚å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/uSbYHJJIzE0Kc7s7.webp)

8ï¼‰éƒ¨ç½²ç”Ÿæˆçš„åº”ç”¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/8oOzTsUQMCB6KORM.webp)

èƒ½å¤Ÿè®¿é—®åˆ°éƒ¨ç½²çš„ç½‘ç«™åº”ç”¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/k00EkX7CO8vm7EUi.webp)

9ï¼‰éƒ¨ç½²ç½‘ç«™æˆåŠŸåï¼Œç¨ç­‰ä¸€ä¼šâ å„¿å›åˆ°ä¸»é¡µï¼Œå¯ä»¥çœ‹â åˆ°è‡ªåŠ¨ç”Ÿæˆäº†åº”ç”¨çš„å°é¢å›¾ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/iQeTBWetB9BPeFKW.webp)

10ï¼‰ç®¡ç†å‘˜å¯ä»¥ç®¡ç†å’Œç²¾é€‰åº”ç”¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/bihW0oT7Eo4wnplw.webp)

11ï¼‰è¿‡å‡ åˆ†é’Ÿåï¼ˆæœ‰ç¼“å­˜ï¼‰ï¼Œâ ä¸»é¡µå°±ä¼šå±•ç¤ºå‡ºç²¾é€‰åº”â ç”¨å•¦ã€‚è‡³æ­¤ï¼Œç½‘ç«™éƒ¨ç½²å®Œæˆï¼

![](https://pic.code-nav.cn/course_picture/1608440217629360130/kj3qUvjxzwWmlUI9.webp)

## å…«ã€æ‰©å±•çŸ¥è¯† - åˆ©ç”¨ Docker éƒ¨ç½²

å¯ä»¥æŠŠ Docker å®¹å™¨æŠ€æœ¯ç†è§£ä¸ºå®‰è£…æ“â ä½œç³»ç»Ÿæ—¶çš„é•œåƒã€æˆ–è€…å®‰è£… Aâ PP æ—¶çš„å®‰è£…åŒ…ï¼Œåªè¦å®šä¹‰å¥½ Docker é…ç½®æ–‡ä»¶ï¼Œå°±èƒ½å¿«é€ŸåŸºäºé…ç½®å¯åŠ¨æœåŠ¡æˆ–é¡¹ç›®ã€‚

ç›¸ä¿¡ä½ å·²ç»å‘ç°äº†ï¼Œ1Paneâ l é¢æ¿ä¸‹çš„åº”ç”¨éƒ½â æ˜¯é€šè¿‡ Docker è¿è¡Œçš„ï¼

å¦‚æœæˆ‘ä»¬è¦åˆ©ç”¨ Dockerâ  éƒ¨ç½²åç«¯ï¼Œæµç¨‹æ˜¯â å…ˆæ„å»ºå®¹å™¨é•œåƒï¼Œç„¶åæ ¹æ®é•œåƒå¯åŠ¨å®¹å™¨ã€‚

**âš ï¸** **æ³¨æ„ï¼å†æ¬¡å¼ºè°ƒï¼ï¼è¿™éƒ¨åˆ†åªæ˜¯æ‰©å±•çŸ¥è¯†ï¼Œç”±äºæœ¬é¡¹ç›®æ¶‰åŠçš„ä¾èµ–è¾ƒå¤šï¼Œä¸æ¨èä½¿ç”¨ Docker éƒ¨ç½²ï¼ï¼ï¼**

### æ„å»ºé•œåƒ

æˆ‘ä»¬éœ€è¦ç¼–å†™ Dockerfâ ileï¼Œå°†åç«¯é¡¹ç›®â æ‰“åŒ…ä¸º Docker å®¹å™¨é•œåƒã€‚

Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬é…ç½®æ–‡ä»¶â ï¼ŒåŒ…å«ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œç”¨äºè‡ªåŠ¨â åŒ–æ„å»º Docker å®¹å™¨é•œåƒã€‚æˆ‘ä»¬éœ€è¦åœ¨ Dockerfile ä¸­å®šä¹‰ï¼š

-   åŸºç¡€ç¯å¢ƒï¼ˆæ¯”å¦‚é¢„è£… JDK çš„ Linux ç³»ç»Ÿï¼‰
-   æœ‰å“ªäº›åŸå§‹æ–‡ä»¶ï¼Ÿï¼ˆæ¯”å¦‚é¡¹ç›®æºä»£ç ï¼‰
-   å¦‚ä½•æ„å»ºé¡¹ç›®ï¼Ÿï¼ˆæ¯”å¦‚ maven package å‘½ä»¤æ‰“åŒ…ï¼‰
-   å¦‚ä½•å¯åŠ¨é¡¹ç›®ï¼Ÿï¼ˆæ¯”å¦‚ java -jar å‘½ä»¤ï¼‰

è¿™é‡Œæˆ‘ä»¬æœ‰ 2 ç§ç¼–å†™ Doâ ckerfile â çš„æ–¹å¼ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹ï¼š

#### æ–¹æ³• 1 - è¿è¡Œæ—¶æ‰“åŒ…

åªæŠŠæºä»£ç å¤åˆ¶åˆ° Dockeâ r å·¥ä½œç©ºé—´ä¸­ï¼Œåœ¨â æ„é€ é•œåƒæ—¶æ‰§è¡Œ Maven æ‰“åŒ…ã€‚

Dockerfile ä»£ç å¦‚ä¸‹ï¼š

```dockerfile
# æ³¨æ„ï¼Œæœ¬æ–‡ä»¶ä»…ä¸ºç¤ºä¾‹ï¼ç”±äºæœ¬é¡¹ç›®æ¶‰åŠçš„ä¾èµ–è¾ƒå¤šï¼Œä¸æ¨èä½¿ç”¨ Docker éƒ¨ç½²
# ä½¿ç”¨é¢„è£… Maven å’Œ JDK21 çš„é•œåƒ
FROM maven:3.9-amazoncorretto-21
WORKDIR /app

# åªå¤åˆ¶å¿…è¦çš„æºä»£ç å’Œé…ç½®æ–‡ä»¶
COPY pom.xml .
COPY src ./src

# ä½¿ç”¨ Maven æ‰§è¡Œæ‰“åŒ…
RUN mvn clean package -DskipTests

# æš´éœ²åº”ç”¨ç«¯å£
EXPOSE 8123

# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®å¯åŠ¨åº”ç”¨
CMD ["java", "-jar", "/app/target/yu-ai-code-mother-0.0.1-SNAPSHOT.jar", "--spring.profiles.active=prod"]
```

ä¸ä¼šè‡ªå·±å†™ Dockerfiâ le ä¹Ÿå®Œå…¨æ²¡å…³ç³»â ï¼Œå¯ä»¥ç”¨ AI ç”Ÿæˆæˆ–è€…æ‰¾å…¶ä»–å¼€æºé¡¹ç›®çš„æ–‡ä»¶å³å¯ï¼Œæ¯”å¦‚ï¼š

-   [é±¼çš®çš„ AI ç­”é¢˜åº”ç”¨å¹³å°åç«¯ Dockerfile](https://github.com/liyupi/yudada/blob/master/yudada-backend/Dockerfile)
-   [é±¼çš®çš„ AI ç­”é¢˜åº”ç”¨å¹³å°å‰ç«¯ Dockerfile](https://github.com/liyupi/yudada/blob/master/yudada-frontend/Dockerfile)

#### æ–¹æ³• 2 - é¢„æ‰“åŒ…

æå‰åœ¨è‡ªå·±çš„ç”µè„‘ä¸ŠæŠŠ jar åŒ…æ„å»ºå¥½ï¼Œâ ç›´æ¥æŠŠå¾—åˆ°çš„ targetâ  ç›®å½•ä¸‹çš„ jar åŒ…å¤åˆ¶åˆ° Docker å·¥ä½œç©ºé—´ä¸­ï¼Œæ— éœ€åœ¨æ„é€ é•œåƒæ—¶æ‰“åŒ…ã€‚

Dockerfile ä»£ç å¦‚ä¸‹ï¼š

```dockerfile
# æ³¨æ„ï¼Œæœ¬æ–‡ä»¶ä»…ä¸ºç¤ºä¾‹ï¼ç”±äºæœ¬é¡¹ç›®æ¶‰åŠçš„ä¾èµ–è¾ƒå¤šï¼Œä¸æ¨èä½¿ç”¨ Docker éƒ¨ç½²
# ä½¿ç”¨è½»é‡çº§ JDK21 è¿è¡Œç¯å¢ƒ
FROM openjdk:21-slim

# å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶å·²ç»æ‰“åŒ…å¥½çš„ JAR æ–‡ä»¶ï¼ˆå‡è®¾å·²æ”¾åœ¨å½“å‰ç›®å½•ï¼‰
COPY target/yu-ai-code-mother-0.0.1-SNAPSHOT.jar app.jar

# æš´éœ²åº”ç”¨ç«¯å£
EXPOSE 8123

# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®å¯åŠ¨åº”ç”¨
CMD ["java", "-jar", "app.jar", "--spring.profiles.active=prod"]
```

æ˜¾ç„¶ï¼Œç¬¬ä¸€ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯æ›´åŠ è‡ªåŠ¨åŒ–ï¼Œä¸ç”¨æ¯æ¬¡éƒ¨ç½²é¡¹ç›®éƒ½æ‰‹åŠ¨æ‰“ jar åŒ…ï¼Œå‡å°‘äººå·¥éƒ¨ç½²çš„æˆæœ¬å’Œè¯¯å·®ï¼›ä½†ç¼ºç‚¹æ˜¯æ¯æ¬¡æ„å»ºé•œåƒæ—¶éƒ½è¦æ‹‰å– Maven ä¾èµ–ï¼Œè€—æ—¶æ›´é•¿ã€‚é±¼çš®å»ºè®®å¤§å®¶ **ä¼˜å…ˆé€‰æ‹©ç¬¬ä¸€ç§æ–¹å¼**ï¼Œå¦‚æœå®¹å™¨å¹³å°åœ¨æ„å»ºé•œåƒçš„è¿‡ç¨‹ä¸­è€—æ—¶è¿‡é•¿ã€æˆ–è€…æ— æ³•æ‹‰å–ä¾èµ–ï¼Œé‚£ä¹ˆå†é€‰æ‹©ç¬¬äºŒç§æ–¹å¼ã€‚

è¿™é‡Œé±¼çš®ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œç»™å¤§å®¶â æ¼”ç¤ºç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨â é¡¹ç›®ä¸‹æ–°å»º Dockerfile æ–‡ä»¶ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/2SsQDpcCwgTyrXJe.webp)

#### æ„å»ºé•œåƒ

å°†æ„å»ºé•œåƒéœ€è¦çš„æ–‡ä»¶ï¼ˆDockerfile å’ŒåŒ…å«æ‰“å¥½ jar åŒ…çš„ target ç›®å½•ï¼‰é€šè¿‡é¢æ¿ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ç›®å½•ä¸‹ï¼Œæˆ‘è¿™é‡Œæ˜¯ `/project/yu-ai-code-mother-backend`ã€‚

![](https://pic.code-nav.cn/course_picture/1608440217629360130/OfR4AXbQyrWsyV3r.webp)

ç„¶åè¿›å…¥å®¹å™¨é¢æ¿ï¼Œæ„å»ºé•œåƒï¼Œâ é…ç½®é•œåƒåç§°å’Œ Dâ ockerfile æ–‡ä»¶è·¯å¾„ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/nW41Rkf5zgAvesW1.webp)

ç­‰å¾…æ„å»ºæˆåŠŸï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/uXq2YMwKzdLTXr9A.webp)

æ„å»ºæˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°é•œåƒï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/56CQMilHHLPexVOs.webp)

### å¯åŠ¨å®¹å™¨

åˆ›å»ºå®¹å™¨ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/7Abtu61jhKUP5SyO.webp)

æ³¨æ„å¼€æ”¾ç«¯å£ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/JujKeZBt4KNJNo0d.webp)

å®¹å™¨å¯åŠ¨æˆåŠŸï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/nUWmoRt3ikAv5qRN.webp)

å¯ä»¥é€šè¿‡æ—¥å¿—ç¡®è®¤å¯åŠ¨æˆåŠŸï¼Œæˆ–è€…è·å–é”™è¯¯ä¿¡æ¯æ¥æ’æŸ¥ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/7IfJNhkCdSssrKrm.webp)

ä½†æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨æ— æ³•é€šè¿‡æµè§ˆå™¨è®¿é—®åç«¯æ¥å£æ–‡æ¡£ï¼š[http://{ä½ çš„æœåŠ¡å™¨ IP}/api/doc.html](http://110.42.141.105/api/doc.html)ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„æœåŠ¡å™¨é˜²ç«å¢™æ²¡æœ‰æ”¾å¼€ 8123 ç«¯å£ã€‚**è¿™é‡Œæˆ‘ä»¬æ•…æ„ä¸æ”¾å¼€**ï¼Œå› ä¸ºåœ¨ä¹‹å‰çš„éƒ¨ç½²è§„åˆ’ä¸­ï¼Œåç«¯éœ€è¦é€šè¿‡ Nginx è¿›è¡Œè½¬å‘ï¼Œä»è€Œè§£å†³è·¨åŸŸé—®é¢˜ã€‚

### å®¹å™¨ç¼–æ’

å†åˆ†äº«ä¸€ç§æ›´å¿«éƒ¨ç½²åç«¯çš„æ–¹æ³•â ï¼Œå¯ä»¥åˆ©ç”¨ Docâ ker Compose å¿«é€Ÿéƒ¨ç½²åç«¯ä¾èµ–å’Œåç«¯é¡¹ç›®æœ¬èº«ã€‚

Docker Composeâ  å¯ä»¥ç»„åˆç¼–æ’å¤šä¸ªâ  Docker å®¹å™¨ï¼ŒæŒ‰ç…§é¡ºåºå¿«é€Ÿå¯åŠ¨å¤šä¸ªæœåŠ¡æˆ–é¡¹ç›®ã€‚

ç»™å¤§å®¶æä¾›ä¸€ä¸ªç¤ºä¾‹çš„ Docker Compoâ se é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº† MySâ QLã€Redis å’Œ Spring Boot é¡¹ç›®çš„å¯åŠ¨ï¼Œå¤§å®¶å¯ä»¥åŸºäºè¿™ä¸ªæ–‡ä»¶è¿›è¡Œå®šåˆ¶ä¿®æ”¹ï¼š

```yaml
# Docker Compose æ–‡ä»¶ï¼Œç”¨äº Spring Boot é¡¹ç›®ï¼Œä¾èµ– MySQL å’Œ Redis

version: '3.8'
services:
  # MySQL æ•°æ®åº“æœåŠ¡
  mysql:
    image: mysql:8.0
    container_name: mysql_db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root           # è®¾ç½® MySQL root ç”¨æˆ·çš„å¯†ç 
      MYSQL_DATABASE: yu_ai_code_mother   # è®¾ç½®æ•°æ®åº“åç§°
      MYSQL_USER: root                    # è®¾ç½®ç”¨æˆ·å
      MYSQL_PASSWORD: 123456              # è®¾ç½®å¯†ç 
      TZ: Asia/Shanghai                    # è®¾ç½®æ—¶åŒºä¸ºä¸œå…«åŒº
    ports:
      - "3306:3306"                       # æ˜ å°„ MySQL ç«¯å£åˆ°ä¸»æœº
    volumes:
      - mysql_data:/var/lib/mysql         # æ•°æ®æŒä¹…åŒ–åˆ°å®¿ä¸»æœºï¼ˆä½¿ç”¨ Docker ç®¡ç†çš„å‘½åå·ï¼‰
    command: --default-authentication-plugin=mysql_native_password
  # Redis ç¼“å­˜æœåŠ¡
  redis:
    image: redis:5.0
    container_name: redis_cache
    restart: always
    ports:
      - "6379:6379"                      # æ˜ å°„ Redis ç«¯å£åˆ°ä¸»æœº
    volumes:
      - redis_data:/data                  # æ•°æ®æŒä¹…åŒ–åˆ°å®¿ä¸»æœºï¼ˆä½¿ç”¨ Docker ç®¡ç†çš„å‘½åå·ï¼‰
    environment:
      TZ: Asia/Shanghai                    # è®¾ç½®æ—¶åŒºä¸ºä¸œå…«åŒº
  # Spring Boot åº”ç”¨æœåŠ¡
  springboot_app:
    image: openjdk:11-jre-slim
    container_name: springboot_app
    working_dir: /app
    volumes:
      - .:/app                            # æŒ‚è½½æœ¬åœ°ç›®å½•åˆ°å®¹å™¨ä¸­
    ports:
      - "8123:8123"                      # æ˜ å°„ Spring Boot ç«¯å£åˆ°ä¸»æœº
    environment:
      TZ: Asia/Shanghai                   # è®¾ç½®æ—¶åŒºä¸ºä¸œå…«åŒº
    command: [ "java", "-jar", "target/yu-ai-code-mother-0.0.1-SNAPSHOT.jar", "--spring.profiles.active=prod" ]  # ä½¿ç”¨ prod é…ç½®æ–‡ä»¶å¯åŠ¨ Spring Boot åº”ç”¨
    depends_on:
      - mysql
      - redis
# ä½¿ç”¨ Docker ç®¡ç†çš„å‘½åå·
volumes:
  mysql_data:
  redis_data:
```

æœ‰äº†é…ç½®æ–‡ä»¶åï¼Œå°±å¯ä»¥åˆ©ç”¨é¢â æ¿è‡ªå¸¦çš„å®¹å™¨ç¼–æ’èƒ½â åŠ›ï¼Œå»è¿›è¡Œé¡¹ç›®çš„éƒ¨ç½²äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å°è¯•ä¸€ä¸‹ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/KW99usFeXH052Ytr.webp)

ğŸ’¡ åœ¨é±¼çš®ç¼–ç¨‹å¯¼èˆªçš„ [OJ åœ¨çº¿åˆ¤é¢˜é¡¹ç›®æ•™ç¨‹](https://www.codefather.cn/course/1790980707917017089) ä¸­ï¼Œè®²è§£è¿‡åŸºäº Docker + Docker Compose å¿«é€Ÿéƒ¨ç½²å¾®æœåŠ¡é¡¹ç›®çš„æ–¹æ³•ï¼Œ[è§‚çœ‹è§†é¢‘æ•™ç¨‹](https://www.bilibili.com/video/BV1Cp4y1F7eA)ã€‚

## æœ€å

æˆ‘ä¸ªäººæ„Ÿè§‰å¯¹æ–°æ‰‹æ¥è¯´ï¼Œ1Paâ nel ä¸å¦‚å®å¡”é¢â æ¿æ›´å‹å¥½ï¼Œæ¯•ç«Ÿå…¨å®¹å™¨æ“ä½œï¼Œæ–°æ‰‹å¾ˆå®¹æ˜“åœ¨è·¯å¾„å’Œä¾èµ–ä¸Šè¸©ä¸€äº›å‘ã€‚

è‡³æ­¤ï¼Œæ•´ä¸ªé¡¹ç›®å·²ç»å®Œæˆä¸Šçº¿ï¼Œå¸Œæœ›å¤§å®¶èƒ½é€šâ è¿‡è¿™ä¸ªé¡¹ç›®æŒæ¡ä¼ä¸šçº§ AIâ  é¡¹ç›®çš„å¼€å‘ã€ä¼˜åŒ–å’Œä¸Šçº¿æ–¹æ³•ï¼Œå¾—åˆ°å…¨æ–¹é¢ç¼–ç¨‹èƒ½åŠ›å’Œ AI åº”ç”¨å¼€å‘æŠ€å·§çš„æå‡ã€‚

## æœ¬æœŸä½œä¸š

1ï¼‰å®Œæˆé¡¹ç›®çš„ä¸Šçº¿

2ï¼‰å°è¯•ç»™é¡¹ç›®ç»‘å®šåŸŸåã€æˆ–è€…â ç”³è¯· HTTPS â è¯ä¹¦ï¼ˆé€šè¿‡è‡ªè¡ŒæŸ¥é˜…èµ„æ–™å®ç°ï¼‰

3ï¼‰å®Œæˆæ•´ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”è‡ªè¡Œå¢åŠ  2â  - 3 ä¸ªæ‰©å±•ç‚¹ï¼Œå¯â ä»¥æ–°å¢åŠŸèƒ½ã€ä¹Ÿå¯ä»¥æ˜¯æŸä¸ªä¼˜åŒ–ã€è¿˜å¯ä»¥å°†å…¶ä»–é¡¹ç›®çš„çŸ¥è¯†ç‚¹èåˆåˆ°æœ¬é¡¹ç›®ä¸­ã€‚

## å¸¸è§é—®é¢˜

æœ¬æ•™ç¨‹æ¯ä¸€ä¸ªæ­¥éª¤å’Œç»†èŠ‚éƒ½å°½å¯â èƒ½ç»™å¤§å®¶æä¾›äº†ï¼Œå¦‚â æœè¿˜æœ‰é”™è¯¯ï¼Œåªå¯èƒ½æ˜¯å‡ ä¸ªåŸå› ï¼š

1.  æ²¡æœ‰è®¤çœŸçœ‹æ•™ç¨‹ï¼Œè·³è¿‡äº†æ­¥éª¤ï¼Œè¯·å›åˆ°å‡ºé”™å‰çš„æ­¥éª¤é‡æ–°æ¥è¿‡
2.  æ²¡æœ‰ä½¿ç”¨è·Ÿæ•™ç¨‹ä¸€è‡´çš„ç‰ˆæœ¬å·æˆ–ä»£ç ï¼Œè¯·ç¡®ä¿ç‰ˆæœ¬å·è·Ÿé±¼çš®çš„å®Œå…¨ä¸€è‡´ï¼
3.  ç½‘ç»œåŸå› ï¼Œå¯¼è‡´ä¾èµ–æ— æ³•å®‰è£…ï¼Œé‚£å°±å°è¯•æ›´æ¢æœåŠ¡å™¨çš„ç½‘ç»œ
4.  æœåŠ¡å™¨é…ç½®åŸå› ï¼Œè¯·ç¡®ä¿å†…å­˜ >= 2Gï¼Œä¸ç„¶æ€ä¹ˆå¡ä½çš„éƒ½ä¸çŸ¥é“

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœå‘ç°æ— æ³•æˆªå›¾åº”ç”¨å°é¢å›¾â ï¼Œå¯ä»¥æŸ¥çœ‹æ—¥å¿—ï¼Œå¦‚æœæŠ¥é”™â ä¿¡æ¯æ˜¯æ‰¾ä¸åˆ°æµè§ˆå™¨ï¼Œé‚£å°±é€€å›åˆ°å®‰è£… Chrome æµè§ˆå™¨çš„å†…å®¹é‡æ–°æ¥è¿‡ï¼š

![](https://pic.code-nav.cn/course_picture/1608440217629360130/Z5hOF0TloMxtheVm.webp)


