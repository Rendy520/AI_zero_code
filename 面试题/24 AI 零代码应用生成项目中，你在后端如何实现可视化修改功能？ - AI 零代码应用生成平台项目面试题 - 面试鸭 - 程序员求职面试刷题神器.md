
# AI 零代码应用生成项目中，你在后端如何实现可视化修改功能？

可视化修改功能的核心在于将用户的视觉选择（点击哪个元素）和文本需求（想怎么改）结合起来，然后驱动 AI 对已有的代码文件进行精确的增量修改。

![img](https://pic.code-nav.cn/mianshiya/question_picture/markdown/pdvT18tg_1753196029132-e26788ce-0146-4067-8534-599eeb53bcb2_mianshiya.png)

后端的实现逻辑如下：

1）前端信息收集与传递：用户在前端 `iframe` 中点击一个网页元素后，前端脚本会捕获该元素的信息，并将其与用户的修改指令拼接成一个新的、更丰富的提示词。

2）后端接收增强提示词：后端接收到这个包含了上下文信息的增强提示词。

3）为 AI 提供文件操作工具：为了让 AI 能够进行增量修改，我为 AI Service 注入了一系列文件操作工具，包括：

-   `FileReadTool`：读取指定文件的内容。
-   `FileModifyTool`：用新内容替换文件中的指定旧内容。
-   `FileDeleteTool`：删除文件。
-   `FileDirReadTool`：递归读取目录结构。

4）AI 的自主决策与执行：AI 接收到增强提示词后，会进入一个自主的 **思考-行动** 循环：

-   思考：AI 首先会分析需求，它可能会调用 `readDir` 工具来了解当前的项目结构，然后调用 `readFile` 工具来读取需要修改的文件的原始内容。
-   行动：在读取并理解了文件内容后，AI 会根据用户的修改指令，决定如何修改代码。然后，它会调用 `FileModifyTool`，并提供三个关键参数：要修改的文件路径、需要被替换的旧内容，以及替换后的新内容。

5）后端执行工具并返回结果：后端捕获到 AI 的工具调用请求，实际执行文件修改操作，并将执行结果返回给 AI。AI 再根据这个结果决定是继续修改还是结束任务。
