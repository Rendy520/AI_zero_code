---
source: https://www.codefather.cn/course/1948291549923344386/section/1971139888665432065
---

# 后端本地部署运行（鱼皮代码版） - 【大厂必备】LangChain4j

> ## Excerpt
> 编程导航 - leikooo 环境准备 [AI 零代码应用生成平台。编程导航教程分享，做您编程学习路上的导航员。

---
> 编程导航 - [leikooo](https://www.codefather.cn/user/1608460212774109186)

## 环境准备

-   [AI 零代码应用生成平台](https://www.codefather.cn/course/1948291549923344386/section/1948291861785292802)
-   Redis [网盘安装包](https://pan.baidu.com/s/1-QhCv0Crg2zvwG3ODxvv-Q) 提取码: vmty
-   MySQL5.7 [网盘安装包](https://pan.baidu.com/s/1uIDAzBtxBXHq8YZOfhlI9w?pwd=bbr5) 提取码:bbr5
-   MySQL8.0 [网盘安装包](https://pan.baidu.com/s/1O6TrRCpb66A5hdgy0EY9HA?pwd=g17s)提取码:g17s
-   MySQL [安装指南](https://zhuanlan.zhihu.com/p/37152572)
-   MySQL [官方下载链接](https://dev.mysql.com/downloads/windows/installer/5.7.html)
-   Nginx [官方下载链接](https://nginx.org/en/download.html)
-   Nginx [Windows 百度网盘](https://pan.baidu.com/s/1Z5PHGRd5FrXU_ftgm7JvVA) 提取码: djdm
-   Grafana + prometheus [百度网盘](https://pan.baidu.com/s/13RzYD4NlhyoQlqxXDoAhng?pwd=w7ye) 提取码：w7ye

## 下载源码

### 使用 Git

需要提前安装 Git

-   官方下载 链接 [https://git-scm.com/downloads](https://git-scm.com/downloads)
-   百度网盘 链接: [https://pan.baidu.com/s/1c8w8FPbm-6b7vSS02dSD7w](https://pan.baidu.com/s/1c8w8FPbm-6b7vSS02dSD7w) 提取码: 7fz9

下载下来直接无脑下一步即可安装成功⁠，安装成功之后找到一个⁠ 非中文、路径没有空格的文件夹右键 （win11 shift + 右键）

![](https://pic.code-nav.cn/post_picture/1608460212774109186/Er0P6yfot50gChKW.webp "null")

输入命令 或者直接 CV 粘贴快捷键是 `Ctrl + Ins`

```plain
git clone https://github.com/liyupi/yu-ai-code-mother.git
```

![image.png](https://pic.code-nav.cn/post_picture/1608460212774109186/XkmQDxX94Mo30XHE.webp) clone 完成之后可以看到对应的目录

![](https://pic.code-nav.cn/post_picture/1608460212774109186/7pN7Uy3dG30jyahB.png)

里面的内容是这样的

![](https://pic.code-nav.cn/post_picture/1608460212774109186/eiF6c4RotsGnrph3.webp)

### 下载 zip

1、访问 Github [https://github.com/liyupi/yu-ai-code-mother](https://github.com/liyupi/yu-ai-code-mother#) 下载源码

![](https://pic.code-nav.cn/post_picture/1608460212774109186/Ul37bBEDDnLP6B9x.webp)

2、下载到本地进行解压   ⁠         ⁠                    

![](https://pic.code-nav.cn/post_picture/1608460212774109186/cQFpzaD99lY1NUnK.png)

3、里面的内容是这样的![](https://pic.code-nav.cn/post_picture/1608460212774109186/PesSSM6IWZTlUY9U.webp)

## 本地启动

设置 Maven 完成 [https://www.codefather.cn/post/1836689783992958977](https://www.codefather.cn/post/1836689783992958977)

使用 IDEA 打开项目 y⁠u-ai-code⁠-mother

![](https://pic.code-nav.cn/post_picture/1608460212774109186/p6qFBWA9vkdodAlV.webp)

### 选择 Java 版本

Java 版本为 21

-   本地没有 JDK 可以直接 `Download JDK`
-   本地有 JDK 但是没识别到 `Add JDK from disk` 选着对应目录即可

![](https://pic.code-nav.cn/post_picture/1608460212774109186/s9tPCh2B2ripH3bg.webp)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/S2a9thKHNxwQ5E9j.webp)

没有的话可以使用下面的 `Download JDK`

![](https://pic.code-nav.cn/post_picture/1608460212774109186/iXxxa9CaC5lXwa62.webp)

选择 Java 21

![](https://pic.code-nav.cn/post_picture/1608460212774109186/DXWg2aTNNy6ZFXYY.webp)

### 初始化数据

使用 IDEA 的 Database 功能连接数据库

注意：Database 工具是 I⁠ntelliJ IDE⁠A Ultimate Edition 才有的功能，社区版不支持。

如果你用的是 社区版，需要升⁠级到 Ultima⁠te Edition 才能使用。

如果你用的是 Ultimat⁠e Edition⁠，但界面上找不到 Database 工具，可以：

-   在 IDEA 内 连续按两下 Shift；
-   输入 Database 搜索并打开。

![](https://pic.code-nav.cn/post_picture/1608460212774109186/qj0oy92vE9RZOvxs.webp)

连接本地 MySQL    ⁠         ⁠                   

![](https://pic.code-nav.cn/post_picture/1608460212774109186/yaG39aaYhPCryGry.webp "null")

![](https://pic.code-nav.cn/post_picture/1608460212774109186/gEf0CLxDxGCYCfsV.webp "null")

点击 Download 下载 driver files

![](https://pic.code-nav.cn/post_picture/1608460212774109186/vjble21BMX81z3lw.webp "null")

输入，账号密码之后点击`Test Connection` 成功之后直接点击 `OK`

![](https://pic.code-nav.cn/post_picture/1608460212774109186/CYBwe1kOlFxR0pLr.webp "null")

打开 `yu-ai-code-mother` 找到根目录 `sql` 目录下面的 `create_table.sql`

如果有下面这个黄色的条 **选择 Use MySQL 即可**

![](https://pic.code-nav.cn/post_picture/1608460212774109186/LepHXfuXU6TeNYvP.webp "null")

![](https://pic.code-nav.cn/post_picture/1608460212774109186/UxuJ8Ski4BWo1Kry.webp)

全选 SQL 文件 Ctrl + A 权限文件右键 execute

![](https://pic.code-nav.cn/post_picture/1608460212774109186/vrMewQlcItO4Hc7r.webp)

选择 Data Sources

-   初始化本地就可以选择 @localhost
-   初始化服务器上的 MySQL 就选择 @服务器IP，需要提前连接上服务器的数据库

然后选择 Use Defau⁠lt Schema⁠ 运行 SQL

![](https://pic.code-nav.cn/post_picture/1608460212774109186/oMNHaNU7xVwP0qO8.webp "null")

执行成功之后的情况     ⁠         ⁠                  

![](https://pic.code-nav.cn/post_picture/1608460212774109186/atyGCgEfWoixhO0X.webp)

可以在右侧 Databae 找到创建的 yu\_ai\_code\_mother 数据库

![](https://pic.code-nav.cn/post_picture/1608460212774109186/9tKB28a3QHX62xMM.webp)

如果没有的话可以，找到对应的数据库 yu\_ai\_code\_mother 打勾即可

![](https://pic.code-nav.cn/post_picture/1608460212774109186/YFtD7JXcFYOmYHYd.webp)

### 安装依赖

首先需要配置好本地 `Mavne`， 和`阿里云镜像`，要是没有配置的话可以看一下这篇[文章](https://www.codefather.cn/post/1836689783992958977)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/IMpjjPOh53AKRoXz.webp "null")

然后可以在 Build 看到正在下载依赖

![](https://pic.code-nav.cn/post_picture/1608460212774109186/Gn7tvraCDFZXGtXk.webp)

### 指定生效配置文件

大概有两种需要指定生效配置文件的环境，开发环境、生产环境

1）生产环境：服务器运行 J⁠AR 包 可以使用⁠ 1、3 方法指定

2）开发环境：可以使用 1、2 方法指定

下面是具体指定的方式

1、在 application.yml 制定生效的配置文件

-   **application.yml**：基础配置，所有环境都会加载。
-   **application-{profile}.yml**：激活后加载，优先级高于 `application.yml`，会覆盖其中相同的属性。没有被覆盖的属性还是使用 application.yml 里面的

![](https://pic.code-nav.cn/post_picture/1608460212774109186/EZj42FVlvL5jBccW.webp)

2、在 IDEA 指定配置文件

![](https://pic.code-nav.cn/post_picture/1608460212774109186/sOQILkxmQTzDbQsZ.webp)

3、启动 JAR 包的时候指定生效的配置文件

这里的 xxx 指的是 application-xxx.yml 文件

```yaml
java -jar xxx.jar --spring.profiles.active=xxx
```

### 修改配置文件

配置文件在下面项目的 `resources` 目录

![](https://pic.code-nav.cn/post_picture/1608460212774109186/rR3ucCE6iJ7PsjTu.webp)

-   application.yml 默认是本地运行时生效的配置
-   application-lcoal.yml 这个配置可以写一些自己的敏感信息比如调用大模型的密钥、COS 相关的配置...
-   application-prod.yml 当在服务器指定 `--spring.profiles.active=prod` 才会生效，一般写线上配置，比如：线上 MySQL、Redis ...

#### MySQL 配置

1、如果没有安装 MySQL⁠ 可以参考下面的文⁠档安装一下环境

1）Windows

-   MySQL [安装指南](https://zhuanlan.zhihu.com/p/37152572)
-   MySQL [官方下载链接](https://dev.mysql.com/downloads/windows/installer/5.7.html)

2）Mac 可以使用 [https://github.com/Homebrew/brew](https://github.com/Homebrew/brew) 安装 MySQL

2、在 application-lcoal.yml 修改 MySQL 的账号密码

```yaml
spring:
  datasource: 
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/my_db  # yuapi 是数据库的名称 如果是远程 MySQL 例如： jdbc:mysql://192.129.11.11:3306/my_db
    username: root # 用户名
    password: 123456 # MySQL 设置的密码
```

#### Redis 配置

1、不同的系统安装

1）Windows 可以直接下载 msi 进行下一步即可，Redis [网盘安装包](https://pan.baidu.com/s/1-QhCv0Crg2zvwG3ODxvv-Q) 提取码: vmty

2）Mac 可以使用 [https://github.com/Homebrew/brew](https://github.com/Homebrew/brew) 安装 redis

2、配置

```yaml
spring:
  redis:
    database: 1  
    host: localhost  # 如果线上改成线上 IP
    port: 6379       # Redis 具体运行端口，默认安装 6379
    timeout: 5000    
  #    password: 123456  # 密码，默认安装没有密码，如果服务器 Redis 有密码就修改
```

#### COS 配置

1）后端配置文件需要

```yaml
# 添加 COS 对象存储配置（需要从腾讯云获取）
cos:
  client:
    host: your-custom-domain.com
    secretId: your-secret-id
    secretKey: your-secret-key
    region: ap-shanghai
    bucket: your-bucket-name
```

官方文档：[https://cloud.tencent.com/document/product/436/56390](https://cloud.tencent.com/document/product/436/56390)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/HcFFGA2vfrDaW1Sp.webp "null")

2）APPID、SecretKey 、SecretId 都是 [https://console.cloud.tencent.com/capi](https://console.cloud.tencent.com/capi) 获取的，注意 SecretKey **只能在创建的时候可见**，注意保存！

![](https://pic.code-nav.cn/post_picture/1608460212774109186/UNDNTCevQ39Qfwnj.webp "null")

3）host、bucket、⁠region 都在⁠ COS 对象存储那里获取

首先需要创建存储桶，位置 [https://console.cloud.tencent.com/cos/bucket](https://console.cloud.tencent.com/cos/bucket)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/wuo4PMuCMvlZ37VS.webp "null")

![](https://pic.code-nav.cn/post_picture/1608460212774109186/iV8bPyK9waQhU7Ll.webp "null")

![](https://pic.code-nav.cn/post_picture/1608460212774109186/r7i6JdgSTvd8kZQn.webp "null")

4）获取 host、bucket、region 信息

位置 [https://console.cloud.tencent.com/cos/bucket](https://console.cloud.tencent.com/cos/bucket)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/mTPGf6OcK7S2SUnF.webp "null")

![](https://pic.code-nav.cn/post_picture/1608460212774109186/3dVt4r3WBWoYHHgY.webp "null")

#### Pexels 配置

1、首先注册（有账号直接登录）Pexels 然后直接访问地址：[https://www.pexels.com/api/key](https://www.pexels.com/api/key/)

2、复制 API Key

![](https://pic.code-nav.cn/post_picture/1608460212774109186/olz0NCTelJtRBgWT.webp)

3、将 改成自己实际上的 API Key

```yaml
pexels:
  api-key: <Your API Key>
```

#### 阿里云配置

1、访问地址：[https://bailian.console.aliyun.com/?tab=model#/model-market](https://bailian.console.aliyun.com/?tab=model#/model-market)

2、如果已经有 Key 可以⁠直接复制，没有的话⁠可以直接创建 Key

![](https://pic.code-nav.cn/post_picture/1608460212774109186/Ri6WlRjeXgSTQTAn.webp)

3、复制上面的密钥，替换 

```yaml
# 阿里云 DashScope 配置
dashscope:
  api-key: <Your API Key>
  image-model: wan2.2-t2i-flash
```

4、还有 AI 相关的配置需要替换，替换下面的

**注意**：这个 routing-chat-model 使用的是阿里云的 AI 模型

```yaml
# AI
langchain4j:
  open-ai:
    # 智能路由 AI 模型配置（用于简单的分类任务）
    routing-chat-model:
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      api-key: <Your API Key>
      model-name: qwen-turbo
      max-tokens: 100
      log-requests: true
      log-responses: true
```

#### DeepSeek 配置

1、访问：[https://platform.deepseek.com/api\_keys](https://platform.deepseek.com/api_keys)

2、创建 API Key ，注意**这个 Key 只能在创建的时候可见**，注意保存

![](https://pic.code-nav.cn/post_picture/1608460212774109186/p0e5I7FjCa3Fbpm8.webp)

3、需要提前充值，否者使用会报错

```yaml
dev.langchain4j.exception.InvalidRequestException: 
{"error":{"message":"Insufficient Balance","type":"unknown_error","param":null,
"code":"invalid_request_error"}}
```

![](https://pic.code-nav.cn/post_picture/1608460212774109186/ncbx77AAufchkfU2.webp)

4、替换下面的 

```yaml
# AI
langchain4j:
  open-ai:
    chat-model:
      base-url: https://api.deepseek.com
      api-key: <Your API Key>
      model-name: deepseek-chat
#      strict-json-schema: true
#      response-format: json_object
      max-tokens: 8192
      log-requests: true
      log-responses: true
      max-retries: 3
    streaming-chat-model:
      base-url: https://api.deepseek.com
      api-key: <Your API Key>
      model-name: deepseek-chat
      max-tokens: 8192
      log-requests: true
      log-responses: true
    # 推理 AI 模型配置（用于复杂的推理任务）
    reasoning-streaming-chat-model:
      base-url: https://api.deepseek.com
      api-key: <Your API Key>
      model-name: deepseek-reasoner
      max-tokens: 32768
      temperature: 0.1
      log-requests: true
      log-responses: true
```

### 本地运行

![](https://pic.code-nav.cn/post_picture/1608460212774109186/tz9JdwZuYdi5iAGD.webp)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/sdewyjuutG6vVWP2.webp)

可以访问接口文档地址 [http://localhost:8123/api/doc.html](http://localhost:8123/api/doc.html) 验证是否启动成功

![](https://pic.code-nav.cn/post_picture/1608460212774109186/DUVIEGnND8itQeDg.webp)

### 生成 Jar 包

找到右侧 Maven 选择 ⁠Lifecycle⁠ -> package 双击

![](https://pic.code-nav.cn/post_picture/1608460212774109186/XZh4ZfMAa9RIy7kJ.webp)

___

如果报错的话:

1.  删除 `target` 目录(IDEA 右键删除即可)，重新打包尝试
2.  Maven -> Lifecyle -> clean
3.  退出 IDEA 在`文件管理器`找到该项目的 `.idea` 文件右键删除 ，然后重新打开 IDEA 重新走一遍流程

![](https://pic.code-nav.cn/post_picture/1608460212774109186/Eu1fQqoGQIrMBywf.webp "null")

![](https://pic.code-nav.cn/post_picture/1608460212774109186/bPg2nYmgKE3Xp9Cp.webp)

### 可观测性

1、下载官网或者直接下载 [百度网盘](https://pan.baidu.com/s/13RzYD4NlhyoQlqxXDoAhng?pwd=w7ye) 提取码：w7ye

官网下载链接🔗

-   Prometheus：[https://prometheus.io/download/](https://prometheus.io/download/)
    
-   Grafana：[https://grafana.com/grafana/download?platform=windows](https://grafana.com/grafana/download?platform=windows)
    

2、进行安装

Prometheus 直接解压安装包即可

Grafana 直接安装 msi 点击下一步进行安装即可

#### Windows

##### Prometheus

1、找到解压 Prometheus 的 zip ，然后修改 Prometheus 的配置文件 prometheus.yml

注意：下面这个 yu-ai-cod⁠e-mother 下面⁠的 targets 写的端口 8123 需要和后端运行的 8123

```yaml
# Prometheus 配置文件
global:
  scrape_interval: 15s      # 全局抓取间隔
  evaluation_interval: 15s  # 规则评估间隔

# 告警管理器配置 (可选)
alerting:
  alertmanagers:
    - static_configs:
        - targets:
          # - alertmanager:9093

# 规则文件配置
rule_files:
# - "alert_rules.yml"  # 可以添加告警规则

# 抓取配置
scrape_configs:
  # Prometheus 自身监控
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Spring Boot 应用监控
  - job_name: 'yu-ai-code-mother'
    metrics_path: '/api/actuator/prometheus'  # Spring Boot Actuator 端点
    static_configs:
      - targets: ['localhost:8123']  # 应用服务器地址
    scrape_interval: 10s  # 每 10 秒抓取一次
    scrape_timeout: 10s   # 抓取超时时间
```

2、启动 Prometheus

搜索栏输入 cmd 回车

![](https://pic.code-nav.cn/post_picture/1608460212774109186/em93Rz8ZgwisTaM7.webp)

```yaml
.\prometheus.exe
```

![](https://pic.code-nav.cn/post_picture/1608460212774109186/oQnOAHoKFZNeNKw8.webp)

3、访问 Prometheus 地址 [http://localhost:9090/targets](http://localhost:9090/targets)

需要确保后端服务启动，这里的⁠ State 状态⁠时 UP 。如果状态是 down 就检查一下后端是否启动

![](https://pic.code-nav.cn/post_picture/1608460212774109186/YGw0gfFKpDtJOFDU.webp)

下面是 State 状态是 Down 的状态

![](https://pic.code-nav.cn/post_picture/1608460212774109186/PBRG0QnA5k3VlRdh.webp)

##### Grafana

1、使用 msi 安装之后，找到安装的目录

![](https://pic.code-nav.cn/post_picture/1608460212774109186/Mozib64sh7SC3WPK.webp)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/vzNkFuWm24AQMjsM.webp)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/16nQDsdQFlAuJnvv.webp)

2、在 bin 目录下面，在搜索栏输入 cmd

![](https://pic.code-nav.cn/post_picture/1608460212774109186/WAMmkyJBCwtRsMwW.webp)

3、调出黑窗口，输入

```yaml
.\grafana-server.exe
```

![](https://pic.code-nav.cn/post_picture/1608460212774109186/R0foBNA3MGcsjhXa.webp)

4、访问对应的 URL

默认账号密码如下

-   账号：admin
-   密码：admin

![](https://pic.code-nav.cn/post_picture/1608460212774109186/W9rpxsfU03Mnol7b.webp)

第一次登录可以重新设置用户名⁠密码，当然也可以直⁠接 Skip 即可

![](https://pic.code-nav.cn/post_picture/1608460212774109186/c0VGzEj1HDyip9rS.webp)

5、添加 Connections

![image.png](https://pic.code-nav.cn/post_picture/1608460212774109186/pFngluS3zkoUWZys.webp) ![](https://pic.code-nav.cn/post_picture/1608460212774109186/WTt29iCZbR75G0hm.webp)

这里的 Connection 需要些 [http://localhost:9090](http://localhost:9090/) 就是 Prometheus 运行的地址

![](https://pic.code-nav.cn/post_picture/1608460212774109186/MwWazQKdxtNt3Zmz.webp)

最后其他不用改，直接 Save & test 即可

![](https://pic.code-nav.cn/post_picture/1608460212774109186/3DH2iYi0cZS2NJT1.webp)

6、创建 Dashboards

选择 New -> Import

![](https://pic.code-nav.cn/post_picture/1608460212774109186/O49rqKTvv0TdT3ld.webp)

复制 JSON 数据有两个途径进行复制 1. Github [https://github.com/liyupi/yu-ai-code-mother/blob/master/grafana/ai\_model\_grafana\_config.json](https://github.com/liyupi/yu-ai-code-mother/blob/master/grafana/ai_model_grafana_config.json) 2. 代码小炒 [https://www.codecopy.cn/post/5hijth](https://www.codecopy.cn/post/5hijth)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/IpgXNyxI7WcRlbi5.webp)

7、创建之后可以看到下面页面

注意：显示 No data ⁠是正常的，等到运行⁠后端程序请求 AI 就有数据了

![](https://pic.code-nav.cn/post_picture/1608460212774109186/mS7faPAHOvdAlx4q.webp)

最终运行后端并且调用 AI ⁠生成代码的最终效果⁠大概是下面的情况

![](https://pic.code-nav.cn/post_picture/1608460212774109186/2tPpxWEEd6MWLvaf.webp)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/19xuI0Ctaoym1g8G.webp)

#### Docker

不管是 Windows 还是 Mac 都可以下载 [Docker Desktop](https://www.docker.com/products/docker-desktop/)

##### Prometheus

1、创建 prometheus.yml 这个文件

`**host.docker.internal:8123**` 表示请求宿主机自己的服务的后端（类似于 localhost 但是如果直接请求 local host 请求的是容器内部），如果部署到服务器上就改成服务器对应的地址

```yaml
# Prometheus 配置文件
global:
  scrape_interval: 15s      # 全局抓取间隔
  evaluation_interval: 15s  # 规则评估间隔

# 告警管理器配置 (可选)
alerting:
  alertmanagers:
    - static_configs:
        - targets:
          # - alertmanager:9093

# 规则文件配置
rule_files:
# - "alert_rules.yml"  # 可以添加告警规则

# 抓取配置
scrape_configs:
  # Prometheus 自身监控
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Spring Boot 应用监控
  - job_name: 'yu-ai-code-mother'
    metrics_path: '/api/actuator/prometheus'  # Spring Boot Actuator 端点
    static_configs:
      - targets: ['host.docker.internal:8123']  # 应用服务器地址
    scrape_interval: 10s  # 每 10 秒抓取一次
    scrape_timeout: 10s   # 抓取超时时间
```

2、把上面的文件复制到桌面上⁠（或者任意非中文、⁠无空格的目录上即可）

![](https://pic.code-nav.cn/post_picture/1608460212774109186/eBB9waQ0fxEHvDY9.webp)

3、启动 prometheus

1）进入到包含 `prometheus.yml` 的路径下（输入 ls 命令如下图所示）

![](https://pic.code-nav.cn/post_picture/1608460212774109186/eau9InnFNh4qQ18G.webp "null")

2）输入下面命令

Linux\\Mac 可以这样写

```plain
docker run -d --name prometheus -p 9090:9090 -v ./prometheus.yml:/etc/prometheus/prometheus.yml docker.1panel.live/prom/prometheus
```

Windows 可以这样写

```yaml
docker run -d --name prometheus -p 9090:9090 -v .\prometheus.yml:/etc/prometheus/prometheus.yml docker.1panel.live/prom/prometheus
76163abf607728ab7a16180d83c3c97a7b8de77a2947f52c15155183d2187d35
```

使用这个命令，需要提前 cd desktop 进入到桌面上，也就是 prometheus.yml 文件说在的目录

4、查看效果

访问：[http://localhost:9090](http://localhost:9090/)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/Mlk9WnXXLdNeVUBo.webp)

如果有 DOWN 的情况就确保自己的后端服务是否启动

##### Grafana

1、打开 docker de⁠sktop 的 T⁠erminal 运行下面的代码

```plain
docker run -d --name grafana  -p 3000:3000  docker.1panel.live/grafana/grafana-enterprise
```

![](https://pic.code-nav.cn/post_picture/1608460212774109186/KyRdqZqYvir97EFB.webp)

2、访问 URL：[http://localhost:3000/login](http://localhost:3000/login)

默认账号密码如下

-   账号：admin
-   密码：admin

![](https://pic.code-nav.cn/post_picture/1608460212774109186/OoiKwjrWIHVnPVyG.webp "null")

第一次登录可以重新设置用户名⁠密码，当然也可以直⁠接 Skip 即可

![](https://pic.code-nav.cn/post_picture/1608460212774109186/lbnO0WtHP9qUF4q4.webp)

3、添加 Connections

![image.png](https://pic.code-nav.cn/post_picture/1608460212774109186/pFngluS3zkoUWZys.webp)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/2xzwq4kqJhU3BpZb.webp)

注意：这里设置的 URL 一定是 [**http://host.docker.internal:9090**](http://host.docker.internal:9090/) 不要写 localhost ！

如果只是写 localhost 那么访问的其实是对应 container 内部的 9090 端口，而不是宿主机运行的 Prometheus （也是运行在 container 但是映射到宿主机的 9090 端口）。具体可以看一下官方文档相关的介绍：[官方文档](https://docs.docker.com/desktop/features/networking/#use-cases-and-workarounds)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/MPF6pOeRDUBOmtMS.webp)

4、创建 Dashboards

复制 JSON 数据有两个途径进行复制

1.  Github [https://github.com/liyupi/yu-ai-code-mother/blob/master/grafana/ai\_model\_grafana\_config.json](https://github.com/liyupi/yu-ai-code-mother/blob/master/grafana/ai_model_grafana_config.json)
2.  代码小炒 [https://www.codecopy.cn/post/5hijth](https://www.codecopy.cn/post/5hijth)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/OQdxfkIvaI8le3xq.webp)

5、创建之后可以看到下面页面

注意：显示 No data ⁠是正常的，等到运行⁠后端程序请求 AI 就有数据了

![](https://pic.code-nav.cn/post_picture/1608460212774109186/26TUmdxSuLcNE1IU.webp)

最终运行后端并且调用 AI ⁠生成代码的最终效果⁠大概是下面的情况

![](https://pic.code-nav.cn/post_picture/1608460212774109186/aUbjEeioAv948NBr.webp)

![](https://pic.code-nav.cn/post_picture/1608460212774109186/UzDymnlQFxTcNi9I.webp)

## 部署

后面可以参考这篇文章 [『 后端部署（通用） 』](https://www.codefather.cn/post/1837499403858690049)


